<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>启动数据库设置初始密码 | icetower</title>
    <meta name="description" content="anglo&#96;s blog">
    <link rel="icon" href="/document.png">
    
    <link rel="preload" href="/assets/css/0.styles.e099f1e3.css" as="style"><link rel="preload" href="/assets/js/app.266cfe2f.js" as="script"><link rel="preload" href="/assets/js/46.56a3d07c.js" as="script"><link rel="prefetch" href="/assets/js/10.b5091cc9.js"><link rel="prefetch" href="/assets/js/11.a24bd436.js"><link rel="prefetch" href="/assets/js/12.7388b315.js"><link rel="prefetch" href="/assets/js/13.2a1c4932.js"><link rel="prefetch" href="/assets/js/14.72585167.js"><link rel="prefetch" href="/assets/js/15.938e5faf.js"><link rel="prefetch" href="/assets/js/16.6df16a18.js"><link rel="prefetch" href="/assets/js/17.1508fc36.js"><link rel="prefetch" href="/assets/js/18.8270969e.js"><link rel="prefetch" href="/assets/js/19.3e0c82eb.js"><link rel="prefetch" href="/assets/js/2.96ba48a4.js"><link rel="prefetch" href="/assets/js/20.6178e827.js"><link rel="prefetch" href="/assets/js/21.b609c218.js"><link rel="prefetch" href="/assets/js/22.cd0b4aab.js"><link rel="prefetch" href="/assets/js/23.86d34243.js"><link rel="prefetch" href="/assets/js/24.3fce8531.js"><link rel="prefetch" href="/assets/js/25.76daf806.js"><link rel="prefetch" href="/assets/js/26.ec331448.js"><link rel="prefetch" href="/assets/js/27.4e2f3ca3.js"><link rel="prefetch" href="/assets/js/28.823cac14.js"><link rel="prefetch" href="/assets/js/29.43140ac8.js"><link rel="prefetch" href="/assets/js/3.b2097593.js"><link rel="prefetch" href="/assets/js/30.dcae59a5.js"><link rel="prefetch" href="/assets/js/31.d645177d.js"><link rel="prefetch" href="/assets/js/32.de85708a.js"><link rel="prefetch" href="/assets/js/33.39e8049a.js"><link rel="prefetch" href="/assets/js/34.828b4d3a.js"><link rel="prefetch" href="/assets/js/35.8e6e9a88.js"><link rel="prefetch" href="/assets/js/36.670fc9bd.js"><link rel="prefetch" href="/assets/js/37.51a7194f.js"><link rel="prefetch" href="/assets/js/38.fbe74621.js"><link rel="prefetch" href="/assets/js/39.cfd9364b.js"><link rel="prefetch" href="/assets/js/4.6ff939d2.js"><link rel="prefetch" href="/assets/js/40.17ccb39a.js"><link rel="prefetch" href="/assets/js/41.6eaea21d.js"><link rel="prefetch" href="/assets/js/42.5659ffd0.js"><link rel="prefetch" href="/assets/js/43.0116689d.js"><link rel="prefetch" href="/assets/js/44.08d0b125.js"><link rel="prefetch" href="/assets/js/45.b817a119.js"><link rel="prefetch" href="/assets/js/47.50b17d7e.js"><link rel="prefetch" href="/assets/js/48.5f2b4651.js"><link rel="prefetch" href="/assets/js/49.2ebc1583.js"><link rel="prefetch" href="/assets/js/5.dfb12704.js"><link rel="prefetch" href="/assets/js/50.0fb94caf.js"><link rel="prefetch" href="/assets/js/51.b6bce5e5.js"><link rel="prefetch" href="/assets/js/6.b4dc9923.js"><link rel="prefetch" href="/assets/js/7.796a1a6d.js"><link rel="prefetch" href="/assets/js/8.cdda8563.js"><link rel="prefetch" href="/assets/js/9.1a56c14e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e099f1e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">icetower</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">home</a></div><div class="nav-item"><a href="/note/summary.html" class="nav-link">summary</a></div><div class="nav-item"><a href="/about.html" class="nav-link">about</a></div><div class="nav-item"><a href="http://blog.icetower.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://www.icetower.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  news
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://music.icetower.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  music
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">github</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yanghcc/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  repo-blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/yanghcc?tab=stars" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github-star
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/yanghcc/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">home</a></div><div class="nav-item"><a href="/note/summary.html" class="nav-link">summary</a></div><div class="nav-item"><a href="/about.html" class="nav-link">about</a></div><div class="nav-item"><a href="http://blog.icetower.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://www.icetower.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  news
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://music.icetower.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  music
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">github</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yanghcc/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  repo-blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/yanghcc?tab=stars" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github-star
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/yanghcc/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>sql相关</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/sql/" class="sidebar-link">sql</a></li><li><a href="/sql/problem.html" class="sidebar-link">遇到的问题与解决方案</a></li><li><a href="/sql/mysql.html" class="active sidebar-link">启动数据库设置初始密码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sql/mysql.html#命令行启动关闭重启mysql服务" class="sidebar-link">命令行启动关闭重启MySQL服务</a></li><li class="sidebar-sub-header"><a href="/sql/mysql.html#图像界面启动关闭重启mysql服务" class="sidebar-link">图像界面启动关闭重启MySQL服务</a></li><li class="sidebar-sub-header"><a href="/sql/mysql.html#查看初始密码" class="sidebar-link">查看初始密码</a></li><li class="sidebar-sub-header"><a href="/sql/mysql.html#设置初始化密码" class="sidebar-link">设置初始化密码</a></li><li class="sidebar-sub-header"><a href="/sql/mysql.html#启动报错处理" class="sidebar-link">启动报错处理</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="启动数据库设置初始密码"><a href="#启动数据库设置初始密码" aria-hidden="true" class="header-anchor">#</a> 启动数据库设置初始密码</h1> <p>这一小节介绍在Mac OS、Linux、Windows上启动关闭重启MySQL服务，以及部分图形化界面对服务的操控。安装完成后，可以使用 service 命令启动 mysql 服务，在Mac上<code>service</code>命令不存在。</p> <h2 id="命令行启动关闭重启mysql服务"><a href="#命令行启动关闭重启mysql服务" aria-hidden="true" class="header-anchor">#</a> 命令行启动关闭重启MySQL服务</h2> <p>在命令行终端启动 MySQL 非常方便，下面大概介绍几个平台通过命令启动服务的方法。</p> <h3 id="查看服务是否启动"><a href="#查看服务是否启动" aria-hidden="true" class="header-anchor">#</a> 查看服务是否启动</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 还可以这么查看，MySQL服务器是否启动</span>
<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> mysqld

<span class="token comment"># 查看服务运行的状态</span>
<span class="token function">service</span> mysqld status
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="mac-os-x-下命令操作"><a href="#mac-os-x-下命令操作" aria-hidden="true" class="header-anchor">#</a> Mac OS X 下命令操作</h3> <p>在 Mac 系统下操作起来就非常方便了。安装完之后就可以在终端上运行全局命令 mysql.server 命令，假设这个命令没有，你在系统的MySQL安装目录中找到 mysql.server  命令，运行它是一样的效果。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysqld start
mysql.server start    <span class="token comment"># 1. 启动</span>
mysql.server stop     <span class="token comment"># 2. 停止</span>
mysql.server restart  <span class="token comment"># 3. 重启</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当你安装过 MySQL 并没有找到 mysql.server 命令，那这时你需要找到安装目录中的 mysql.server 命令工具了，如 <code>sudo /usr/local/mysql/support-files/mysql.server start</code></p> <h3 id="linux-下命令操作"><a href="#linux-下命令操作" aria-hidden="true" class="header-anchor">#</a> Linux 下命令操作</h3> <p>Linux生态系统中对服务的操作有点区别。其实在 Mac 系统下也可以直接 <code>mysqld start</code> 来启动服务。</p> <ol><li>启动：<code>service mysqld start</code></li> <li>停止：<code>service mysqld stop</code></li> <li>重启：<code>service mysqld restart</code></li> <li>查看状态：<code>service mysqld status</code></li> <li>查看状态：<code>systemctl status mysqld.service</code></li></ol> <p>systemctl是一个systemd工具，主要负责控制systemd系统和服务管理器，在 Linux 系统中可以通过它来启动 mysql 服务。</p> <p>启动过程中有可能会报错，错误处理，通过 <strong>systemctl status mysqld.service</strong> 和 <strong>journalctl -xe</strong> 命令查看服务启动失败的原因。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl status mysqld.service

  ● mysqld.service - SYSV: MySQL database server.
     Loaded: loaded <span class="token punctuation">(</span>/etc/rc.d/init.d/mysqld<span class="token punctuation">)</span>
     Active: failed <span class="token punctuation">(</span>Result: exit-code<span class="token punctuation">)</span> since 三 2016-11-02 22:14:36 EDT<span class="token punctuation">;</span> 11s ago
       Docs: man:systemd-sysv-generator<span class="token punctuation">(</span>8<span class="token punctuation">)</span>
    Process: 14940 ExecStart<span class="token operator">=</span>/etc/rc.d/init.d/mysqld start <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, status<span class="token operator">=</span>1/FAILURE<span class="token punctuation">)</span>
  
  11月 02 22:14:34 localhost.localdomain systemd<span class="token punctuation">[</span>1<span class="token punctuation">]</span>: Starting SYSV: MySQL database server<span class="token punctuation">..</span><span class="token punctuation">..</span>
  11月 02 22:14:35 localhost.localdomain mysqld<span class="token punctuation">[</span>14940<span class="token punctuation">]</span>: MySQL Daemon failed to start.
  11月 02 22:14:35 localhost.localdomain mysqld<span class="token punctuation">[</span>14940<span class="token punctuation">]</span>: Starting mysqld:  <span class="token punctuation">[</span>FAILED<span class="token punctuation">]</span>
  11月 02 22:14:36 localhost.localdomain systemd<span class="token punctuation">[</span>1<span class="token punctuation">]</span>: mysqld.service: control process exited, code<span class="token operator">=</span>exited status<span class="token operator">=</span>1
  11月 02 22:14:36 localhost.localdomain systemd<span class="token punctuation">[</span>1<span class="token punctuation">]</span>: Failed to start SYSV: MySQL database server<span class="token punctuation">..</span>
  11月 02 22:14:36 localhost.localdomain systemd<span class="token punctuation">[</span>1<span class="token punctuation">]</span>: Unit mysqld.service entered failed state.
  11月 02 22:14:36 localhost.localdomain systemd<span class="token punctuation">[</span>1<span class="token punctuation">]</span>: mysqld.service failed.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看配置文件 my.cnf 的位置</span>
<span class="token function">whereis</span> my.cnf
<span class="token comment"># 输出： my: /etc/my.cnf</span>

<span class="token comment"># 编辑</span>
<span class="token function">vi</span> /etc/my.cnf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>里面有个 log_error=/var/log/mysqld.log 的配置，通过命令 <strong>tail -25 /var/log/mysqld.log</strong> 查看 MySQL 错误日志</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>2016-01-20T10:00:19.935771Z 0 <span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> /usr/sbin/mysqld: Can<span class="token string">'t create/write to file '</span>/var/run/mysqld/mysqld.pid<span class="token string">' (Errcode: 2 - No such file or directory)
2016-01-20T10:00:19.935795Z 0 [ERROR] Can'</span>t start server: can't create PID file: No such <span class="token function">file</span> or directory
160120 18:00:20 mysqld_safe mysqld from pid <span class="token function">file</span> /var/run/mysqld/mysqld.pid ended
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面日志错误说，MySQL服务在启动的时候，不能创建pid文件。前去看一下 mysqld 文件是否存在，不存在创建 mysqld 目录。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 创建 mysqld 目录</span>
<span class="token function">mkdir</span> -p /var/run/mysqld/

<span class="token comment"># 启动MySQL</span>
/etc/init.d/mysqld start

<span class="token comment"># 输出下面内容</span>
<span class="token comment"># Starting mysqld (via systemctl):  Job for mysqld.service failed because the control process exited with error code. See &quot;systemctl status mysqld.service&quot; and &quot;journalctl -xe&quot; for details.</span>
<span class="token comment"># [FAILED]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>创建 mysqld 目录还是启动报错，按照下面命令尝试解决问题</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">ls</span> -ld /var/run/mysqld/

<span class="token comment"># mysqld 文件夹如果不存在通过命令创建</span>

<span class="token function">mkdir</span> /var/run/mysqld

<span class="token comment"># 会输出下面内容</span>
<span class="token comment"># drwxr-xr-x. 2 mysql mysql 60 11月  2 22:15 /var/run/mysqld/</span>
<span class="token function">chown</span> mysql.mysql /var/run/mysqld/
/etc/init.d/mysqld start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>通过查看目录 /var/run/mysqld/ 的属主和属组还是root，mysql并不能在其中创建文件，后修改该目录的属主和属组，启动OK。</p> <p>创建脚本<code>cat start-mysql.sh</code>，这个问题每次都会出现，因为Centos7上MySQL5.7.12系统不兼容启动失败， 每次开机后手动执行，或放在定时调度里。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>  
  
<span class="token function">mkdir</span> -p /var/run/mysqld/  
<span class="token function">chown</span> mysql.mysql /var/run/mysqld/  
  
/etc/init.d/mysqld start  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="windows-下命令操作"><a href="#windows-下命令操作" aria-hidden="true" class="header-anchor">#</a> Windows 下命令操作</h3> <p>Windows平台操作起来有点不顺手，个人感觉 Windows 的DOS太难用了，下面简单的介绍一下操作过程。先找到 MySQL 的安装位置，如我的电脑的安装位置是：C:\Program Files\MySQL\MySQL Server 5.7，我就执行这样的操作：开始-&gt;运行-&gt;输入“cmd”开启命令行，然后输入“C:”。通过命令进入到 MySQL Server 5.7 的 bin 目录下，输入 MySQL 命令行的服务启用命令，如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># net start [mysql服务名]</span>

<span class="token comment"># 启动 mysql 服务</span>
net start mysql

<span class="token comment"># 停止 mysql 服务</span>
net stop mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>有很多情况可能导致无法启动 MySQL，常见解决方法如下：</p> <ol><li>在 CMD 命令中断运行这条命令 C:\Program Files\MySQL\MySQL Server 5.7\bin\mysqladmin-u root -p shutdown 来关闭MYSQL，如果有密码根据提示输入密码即可。</li> <li>在 CMD 命令中断，执行net start mysql启动 MySQL，参考上面方法来启动 MySQL 服务。</li></ol> <h2 id="图像界面启动关闭重启mysql服务"><a href="#图像界面启动关闭重启mysql服务" aria-hidden="true" class="header-anchor">#</a> 图像界面启动关闭重启MySQL服务</h2> <h3 id="mac-os-x-下操作"><a href="#mac-os-x-下操作" aria-hidden="true" class="header-anchor">#</a> Mac OS X 下操作</h3> <p>在 Mac 系统下如果你官方下载安装就可以在<code>系统偏好设置</code> &gt; <code>MySQL</code> 里面点击 <code>Stop MySQL Server</code> 按钮进行启动关闭。</p> <p>通过 <a href="https://www.apachefriends.org/zh_cn/index.html" target="_blank" rel="noopener noreferrer">XAMMPP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 安装的 MySQL ，这个软件安装之后会自动安装 Apache + MySQL + PHP 对于初学者特别方便，新版本是默认安装<code>Apache + MariaDB + PHP + Perl</code>。</p> <h3 id="windows-下操作"><a href="#windows-下操作" aria-hidden="true" class="header-anchor">#</a> Windows 下操作</h3> <p>Windows 系统下启动关闭重启MySQL服务。</p> <h2 id="查看初始密码"><a href="#查看初始密码" aria-hidden="true" class="header-anchor">#</a> 查看初始密码</h2> <p>默认情况下MySQL是有个初始密码，知道了初始密码才能改密码。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost home<span class="token punctuation">]</span><span class="token comment"># grep 'temporary password' /var/log/mysqld.log</span>

2017-07-17T13:40:11.842835Z 1 <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> A temporary password is generated <span class="token keyword">for</span> root@localhost: b<span class="token operator">&amp;</span>iu<span class="token punctuation">(</span>sf<span class="token punctuation">;</span><span class="token operator">&gt;</span>ws
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="设置初始化密码"><a href="#设置初始化密码" aria-hidden="true" class="header-anchor">#</a> 设置初始化密码</h2> <p>启动后我们需要简单配置一下 mysql ，默认安装以后 mysql 的 root 用户是没有密码的，对于生产环境来说，这肯定是不行的，另外还有一些安全相关的设置，可以使用下面这行命令去配置一下，它是一个向导，问你一些问题，你要给出答案，比如是否要设置 root 用户的密码， 密码是什么等等。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql_secure_installation

Enter current password <span class="token keyword">for</span> root <span class="token punctuation">(</span>enter <span class="token keyword">for</span> none<span class="token punctuation">)</span>:
<span class="token comment"># 解释：输入当前 root 用户密码，默认为空，直接回车。</span>

Set root password? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span>  y
<span class="token comment"># 解释：要设置 root 密码吗？输入 y 表示愿意。</span>

Remove anonymous users? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span>  y
<span class="token comment"># 解释：要移除掉匿名用户吗？输入 y 表示愿意。</span>

Disallow root login remotely? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span>  y
<span class="token comment"># 解释：不想让 root 远程登陆吗？输入 y 表示愿意。</span>

Remove <span class="token function">test</span> database and access to it? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span>  y
<span class="token comment"># 解释：要去掉 test 数据库吗？输入 y 表示愿意。</span>

Reload privilege tables now? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span>  y
<span class="token comment"># 解释：想要重新加载权限吗？输入 y 表示愿意。</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>你安装成功后，可以查看一下 MySQL 版本，<code>mysql --version</code>，如果版本并非你所使用的版本，你可以参考这里进行升级数据库操作,Centos6下升级MySQL数据库。</p> <h2 id="启动报错处理"><a href="#启动报错处理" aria-hidden="true" class="header-anchor">#</a> 启动报错处理</h2> <p>下面是我尝试在Mac上启动MySQL报错</p> <p><strong>启动失败</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> /usr/local/mysql/support-files/mysql.server start
Password:
Starting MySQL
<span class="token keyword">.</span> ERROR<span class="token operator">!</span> The server quit without updating PID <span class="token function">file</span> <span class="token punctuation">(</span>/usr/local/mysql/data/localhost.pid
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>通过日志查看报错信息</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 编辑配置文件</span>
<span class="token function">sudo</span> <span class="token function">vim</span> /etc/my.cnf

<span class="token comment"># 在配置文件最后添加一行错误日志输入的配置</span>
log_error <span class="token operator">=</span> /usr/local/mysql/data/error.log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上面添加完成之后，重新启动再查看日志</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> /usr/local/mysql/support-files/mysql.server start
<span class="token function">tail</span> -100 /usr/local/mysql/data/error.log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="日志显示错误一"><a href="#日志显示错误一" aria-hidden="true" class="header-anchor">#</a> 日志显示错误一</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>2017-01-19T03:48:24.695505Z 0 <span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> InnoDB: Unable to lock ./ibdata1 error: 35
2017-01-19T03:48:24.695540Z 0 <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> InnoDB: Check that you <span class="token keyword">do</span> not already have another mysqld process using the same InnoDB data or log files.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>日志显示 mysqld 进程使用相同的InnoDB data 文件或日志文件，通过 <code>ps -ef | grep mysql | grep -v grep</code> 查看是否有该进程，发现果然有，这时候你需要杀掉该进程，我在我本地是杀不掉的，于是我尝试使用 mysqld 启动MySQL，启动成功。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> /usr/local/mysql/bin/mysqld restart
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="日志显示错误二"><a href="#日志显示错误二" aria-hidden="true" class="header-anchor">#</a> 日志显示错误二</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> InnoDB: The innodb_system data <span class="token function">file</span> <span class="token string">'ibdata1'</span> must be writable
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上面的错误信息说的是 <code>ibdata1</code> 文件不可写。<code>ibdata1</code> 是InnoDB的共有表空间，默认情况下会把表空间存放在一个文件<code>ibdata1</code>中，（此原因会造成这个文件越来越大）。所以大概能猜测是 mysql 用户的权限不够了。所以再给 <code>ibdata1</code> 目录分配一下权限即可。</p> <p>这个时候需要查看一下mysql 安装目录权限。使用 chown 改变了整个 mysql 目录的权限，这是一个非常不好的习惯。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">cd</span> /usr/local/mysql
<span class="token function">sudo</span> <span class="token function">chown</span> -R _mysql:_mysql *
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这里需要注意的是，Mac OS系统下，mysql 的用户组和用户名都是 <code>_mysql</code>，Linux 是 <code>mysql</code>。然后再重启 MySQL 你就完事大吉了。</p> <p>上面调试定位错误的方法非常有用。我通过这个方法多次解决各种问题。</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/yanghcc/blog/edit/master/docs/sql/mysql.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/4/2019, 2:47:22 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/sql/problem.html" class="prev">
          遇到的问题与解决方案
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.266cfe2f.js" defer></script><script src="/assets/js/46.56a3d07c.js" defer></script>
  </body>
</html>
