<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>zepto æºç è§£è¯» | icetower</title>
    <meta name="description" content="anglo&#96;s blog">
    <link rel="icon" href="/blog/document.png">
    
    <link rel="preload" href="/blog/assets/css/0.styles.98372b78.css" as="style"><link rel="preload" href="/blog/assets/js/app.bae4038b.js" as="script"><link rel="preload" href="/blog/assets/js/38.f6e289a7.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.350d8323.js"><link rel="prefetch" href="/blog/assets/js/11.95e2312a.js"><link rel="prefetch" href="/blog/assets/js/12.7ddae409.js"><link rel="prefetch" href="/blog/assets/js/13.e0928b5b.js"><link rel="prefetch" href="/blog/assets/js/14.0716d39f.js"><link rel="prefetch" href="/blog/assets/js/15.33598b62.js"><link rel="prefetch" href="/blog/assets/js/16.1219e179.js"><link rel="prefetch" href="/blog/assets/js/17.ab548388.js"><link rel="prefetch" href="/blog/assets/js/18.768f4e4f.js"><link rel="prefetch" href="/blog/assets/js/19.b8112a7a.js"><link rel="prefetch" href="/blog/assets/js/2.370b5d4a.js"><link rel="prefetch" href="/blog/assets/js/20.3a75cd43.js"><link rel="prefetch" href="/blog/assets/js/21.0b3a5483.js"><link rel="prefetch" href="/blog/assets/js/22.67d7e333.js"><link rel="prefetch" href="/blog/assets/js/23.6be9b585.js"><link rel="prefetch" href="/blog/assets/js/24.f5d45aef.js"><link rel="prefetch" href="/blog/assets/js/25.acd8bcfc.js"><link rel="prefetch" href="/blog/assets/js/26.c926a6ed.js"><link rel="prefetch" href="/blog/assets/js/27.6ef2cb8c.js"><link rel="prefetch" href="/blog/assets/js/28.2e877e2c.js"><link rel="prefetch" href="/blog/assets/js/29.b23cbcf0.js"><link rel="prefetch" href="/blog/assets/js/3.b2097593.js"><link rel="prefetch" href="/blog/assets/js/30.a385b249.js"><link rel="prefetch" href="/blog/assets/js/31.5d531805.js"><link rel="prefetch" href="/blog/assets/js/32.14daae88.js"><link rel="prefetch" href="/blog/assets/js/33.00deed18.js"><link rel="prefetch" href="/blog/assets/js/34.7e88fa31.js"><link rel="prefetch" href="/blog/assets/js/35.269d5a9a.js"><link rel="prefetch" href="/blog/assets/js/36.199b7575.js"><link rel="prefetch" href="/blog/assets/js/37.ca0d3fea.js"><link rel="prefetch" href="/blog/assets/js/39.4664880a.js"><link rel="prefetch" href="/blog/assets/js/4.65f70785.js"><link rel="prefetch" href="/blog/assets/js/40.18cad931.js"><link rel="prefetch" href="/blog/assets/js/41.3bafdef9.js"><link rel="prefetch" href="/blog/assets/js/42.f54e2f5f.js"><link rel="prefetch" href="/blog/assets/js/43.12ab04d7.js"><link rel="prefetch" href="/blog/assets/js/44.0d5ebaf3.js"><link rel="prefetch" href="/blog/assets/js/45.1cb3daeb.js"><link rel="prefetch" href="/blog/assets/js/5.7b3df2a9.js"><link rel="prefetch" href="/blog/assets/js/6.876be49e.js"><link rel="prefetch" href="/blog/assets/js/7.b58748c4.js"><link rel="prefetch" href="/blog/assets/js/8.8d44e0b5.js"><link rel="prefetch" href="/blog/assets/js/9.a6e6d0e8.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.98372b78.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">icetower</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">home</a></div><div class="nav-item"><a href="/blog/note/summary.html" class="nav-link">summary</a></div><div class="nav-item"><a href="/blog/about.html" class="nav-link">about</a></div><div class="nav-item"><a href="http://blog.icetower.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://www.icetower.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  news
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://music.icetower.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  music
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">github</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yanghcc/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  repo-blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/yanghcc?tab=stars" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github-star
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/yanghcc/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">home</a></div><div class="nav-item"><a href="/blog/note/summary.html" class="nav-link">summary</a></div><div class="nav-item"><a href="/blog/about.html" class="nav-link">about</a></div><div class="nav-item"><a href="http://blog.icetower.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://www.icetower.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  news
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://music.icetower.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  music
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">github</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yanghcc/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  repo-blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/yanghcc?tab=stars" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github-star
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/yanghcc/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>ğŸš€ Getting started</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/note/" class="sidebar-link">note</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/#é€šè¿‡githubæ·»åŠ æ•°æ®" class="sidebar-link">é€šè¿‡githubæ·»åŠ æ•°æ®</a></li></ul></li><li><a href="/blog/note/glob.html" class="sidebar-link">globç®€ä»‹</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/note/reg.html" class="sidebar-link">Regular</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/note/bit-opration.html" class="sidebar-link">ä½è¿ç®—ç¬¦</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/bit-opration.html#jsä¸­å¸¸ç”¨çš„7ä¸ªä½è¿ç®—ç¬¦" class="sidebar-link">JSä¸­å¸¸ç”¨çš„7ä¸ªä½è¿ç®—ç¬¦</a></li><li class="sidebar-sub-header"><a href="/blog/note/bit-opration.html#ä½è¿ç®—ç¬¦åœ¨jsä¸­çš„å¦™ç”¨" class="sidebar-link">ä½è¿ç®—ç¬¦åœ¨jsä¸­çš„å¦™ç”¨</a></li></ul></li><li><a href="/blog/note/crypto.html" class="sidebar-link">crypto</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/note/fragmentation.html" class="sidebar-link">é˜…è¯»æ•´ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/fragmentation.html#subtile" class="sidebar-link">subtile</a></li></ul></li><li><a href="/blog/note/git.html" class="sidebar-link">git cloneå…‹éš†æˆ–ä¸‹è½½ä¸€ä¸ªä»“åº“å•ä¸ªæ–‡ä»¶å¤¹</a></li><li><a href="/blog/note/html.html" class="sidebar-link">htmlç¬”è®°</a></li><li><a href="/blog/note/nginx.html" class="sidebar-link">nginxå¸¸ç”¨é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/nginx.html#ç®€ä»‹" class="sidebar-link">ç®€ä»‹</a></li></ul></li><li><a href="/blog/note/git.html" class="sidebar-link">git cloneå…‹éš†æˆ–ä¸‹è½½ä¸€ä¸ªä»“åº“å•ä¸ªæ–‡ä»¶å¤¹</a></li><li><a href="/blog/note/remind.html" class="sidebar-link">å¤‡å¿˜å½•</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/remind.html#_2018-04-18" class="sidebar-link">2018-04-18</a></li></ul></li><li><a href="/blog/note/md-sytax.html" class="sidebar-link">Markdownå¸¸ç”¨è¯­æ³•</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/md-sytax.html#æ ‡é¢˜" class="sidebar-link">æ ‡é¢˜</a></li><li class="sidebar-sub-header"><a href="/blog/note/md-sytax.html#äºŒçº§æ ‡é¢˜" class="sidebar-link">äºŒçº§æ ‡é¢˜</a></li><li class="sidebar-sub-header"><a href="/blog/note/md-sytax.html#åˆ—è¡¨" class="sidebar-link">åˆ—è¡¨</a></li><li class="sidebar-sub-header"><a href="/blog/note/md-sytax.html#å¼•ç”¨" class="sidebar-link">å¼•ç”¨</a></li><li class="sidebar-sub-header"><a href="/blog/note/md-sytax.html#å›¾ç‰‡ä¸é“¾æ¥" class="sidebar-link">å›¾ç‰‡ä¸é“¾æ¥</a></li><li class="sidebar-sub-header"><a href="/blog/note/md-sytax.html#ç²—ä½“å’Œæ–œä½“-ç²—ä½“-æ–œä½“" class="sidebar-link">ç²—ä½“å’Œæ–œä½“ ç²—ä½“ æ–œä½“</a></li><li class="sidebar-sub-header"><a href="/blog/note/md-sytax.html#è¡¨æ ¼" class="sidebar-link">è¡¨æ ¼</a></li><li class="sidebar-sub-header"><a href="/blog/note/md-sytax.html#åˆ†å‰²çº¿-ä¸‰ä¸ª" class="sidebar-link">åˆ†å‰²çº¿ ä¸‰ä¸ª*</a></li></ul></li><li><a href="/blog/note/reg.html" class="sidebar-link">Regular</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/note/npm.html" class="sidebar-link">npm å¸¸ç”¨æ¨¡å—</a></li><li><a href="/blog/note/optimization.html" class="sidebar-link">å¸¸ç”¨ä¼˜åŒ–æ•´ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/optimization.html#æ€§èƒ½ä¼˜åŒ–" class="sidebar-link">æ€§èƒ½ä¼˜åŒ–</a></li><li class="sidebar-sub-header"><a href="/blog/note/optimization.html#ä½¿ç”¨-rafï¼ˆrequestanimationframeï¼‰è§¦å‘æ»šåŠ¨äº‹ä»¶" class="sidebar-link">ä½¿ç”¨ rAFï¼ˆrequestAnimationFrameï¼‰è§¦å‘æ»šåŠ¨äº‹ä»¶</a></li></ul></li><li><a href="/blog/note/todo.html" class="sidebar-link">TODO</a></li><li><a href="/blog/note/uuid.html" class="sidebar-link">javascriptç”ŸæˆUUIDæ–¹æ¡ˆ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/uuid.html#uuidç®€ä»‹" class="sidebar-link">UUIDç®€ä»‹</a></li></ul></li><li><a href="/blog/note/umd.html" class="sidebar-link">umd</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/umd.html#é€šç”¨æ¨¡å—å®šä¹‰" class="sidebar-link">é€šç”¨æ¨¡å—å®šä¹‰</a></li></ul></li><li><a href="/blog/note/watch.html" class="sidebar-link">watch</a></li><li><a href="/blog/note/snippets.html" class="sidebar-link">ä»£ç ç‰‡æ®µ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/snippets.html#æ•°ç»„æ“ä½œ" class="sidebar-link">æ•°ç»„æ“ä½œ</a></li></ul></li><li><a href="/blog/note/zepto-src.html" class="active sidebar-link">zepto æºç è§£è¯»</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/note/zepto-src.html#æºç æ³¨é‡Š" class="sidebar-link">æºç æ³¨é‡Š</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="zepto-æºç è§£è¯»"><a href="#zepto-æºç è§£è¯»" aria-hidden="true" class="header-anchor">#</a> zepto æºç è§£è¯»</h1> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>æ¥æºï¼šï¼ˆæ…•è¯¾ç½‘ï¼‰<a href="https://www.imooc.com/learn/745" target="_blank" rel="noopener noreferrer">zeptoæºç åˆ†æè¯¾ç¨‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.kancloud.cn/wangfupeng/zepto-design-srouce/173692" target="_blank" rel="noopener noreferrer">åŸæ–‡æ¡£åœ°å€<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h2 id="æºç æ³¨é‡Š"><a href="#æºç æ³¨é‡Š" aria-hidden="true" class="header-anchor">#</a> æºç æ³¨é‡Š</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* Zepto v1.1.6 - zepto event ajax form ie - zeptojs.com/license */</span>

<span class="token keyword">var</span> Zepto <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> $<span class="token punctuation">,</span> classList<span class="token punctuation">,</span> 

      <span class="token comment">// è·å–æ•°ç»„çš„slice å’Œ filterï¼ˆè¿”å›æ•°ç»„ä¸­çš„æ»¡è¶³å›è°ƒå‡½æ•°ä¸­æŒ‡å®šçš„æ¡ä»¶çš„å…ƒç´ ï¼‰æ–¹æ³•</span>
      emptyArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> slice <span class="token operator">=</span> emptyArray<span class="token punctuation">.</span>slice<span class="token punctuation">,</span> filter <span class="token operator">=</span> emptyArray<span class="token punctuation">.</span>filter<span class="token punctuation">,</span>

      document <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">,</span>
      elementDisplay <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> classCache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      cssNumber <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'column-count'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 
        <span class="token string">'columns'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 
        <span class="token string">'font-weight'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 
        <span class="token string">'line-height'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">'opacity'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 
        <span class="token string">'z-index'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 
        <span class="token string">'zoom'</span><span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token comment">// å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt;</span>
      fragmentRE <span class="token operator">=</span> <span class="token regex">/^\s*&lt;(\w+|!)[^&gt;]*&gt;/</span><span class="token punctuation">,</span>
      <span class="token comment">// åŒ¹é… &lt;img /&gt; &lt;p&gt;&lt;/p&gt;  ä¸åŒ¹é… &lt;img src=&quot;&quot;/&gt; &lt;p&gt;123&lt;/p&gt;</span>
      singleTagRE <span class="token operator">=</span> <span class="token regex">/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;|)$/</span><span class="token punctuation">,</span>
      <span class="token comment">// å•æ ‡ç­¾</span>
      tagExpanderRE <span class="token operator">=</span> <span class="token regex">/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/ig</span><span class="token punctuation">,</span>
      <span class="token comment">// body html</span>
      rootNodeRE <span class="token operator">=</span> <span class="token regex">/^(?:body|html)$/i</span><span class="token punctuation">,</span>
      <span class="token comment">// å¤§å†™å­—æ¯</span>
      capitalRE <span class="token operator">=</span> <span class="token regex">/([A-Z])/g</span><span class="token punctuation">,</span>

      <span class="token comment">// special attributes that should be get/set via method calls</span>
      <span class="token comment">// åº”è¯¥é€šè¿‡æ–¹æ³•è°ƒç”¨æ¥è®¾ç½®/è·å–çš„ç‰¹æ®Šå±æ€§</span>
      methodAttributes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'val'</span><span class="token punctuation">,</span> <span class="token string">'css'</span><span class="token punctuation">,</span> <span class="token string">'html'</span><span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token string">'offset'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

      adjacencyOperators <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">'after'</span><span class="token punctuation">,</span> <span class="token string">'prepend'</span><span class="token punctuation">,</span> <span class="token string">'before'</span><span class="token punctuation">,</span> <span class="token string">'append'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>

      table <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      tableRow <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'tr'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// æŒ‡å®šç‰¹æ®Šå…ƒç´ çš„ å®¹å™¨</span>
      containers <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'tr'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'tbody'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'tbody'</span><span class="token punctuation">:</span> table<span class="token punctuation">,</span> 
        <span class="token string">'thead'</span><span class="token punctuation">:</span> table<span class="token punctuation">,</span> 
        <span class="token string">'tfoot'</span><span class="token punctuation">:</span> table<span class="token punctuation">,</span>
        <span class="token string">'td'</span><span class="token punctuation">:</span> tableRow<span class="token punctuation">,</span> 
        <span class="token string">'th'</span><span class="token punctuation">:</span> tableRow<span class="token punctuation">,</span>
        <span class="token comment">// é™¤äº†ä¸Šé¢æŒ‡å®šçš„ï¼Œå…¶ä»–æ‰€æœ‰å…ƒç´ çš„å®¹å™¨éƒ½æ˜¯ div</span>
        <span class="token string">'*'</span><span class="token punctuation">:</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token comment">// interactive ï¼Ÿï¼Ÿï¼Ÿ</span>
      readyRE <span class="token operator">=</span> <span class="token regex">/complete|loaded|interactive/</span><span class="token punctuation">,</span>

      <span class="token comment">// åŒ¹é…ä¸€ä¸ªåŒ…æ‹¬ï¼ˆå­—æ¯ã€æ•°ç»„ã€ä¸‹åˆ’çº¿ã€-ï¼‰çš„å­—ç¬¦ä¸²</span>
      simpleSelectorRE <span class="token operator">=</span> <span class="token regex">/^[\w-]*$/</span><span class="token punctuation">,</span>

      class2type <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      toString <span class="token operator">=</span> class2type<span class="token punctuation">.</span>toString<span class="token punctuation">,</span>

      zepto <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      camelize<span class="token punctuation">,</span> uniq<span class="token punctuation">,</span>

      tempParent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

      <span class="token comment">// å±æ€§è½¬æ¢ä¸º camalCase æ ¼å¼ã€‚</span>
      <span class="token comment">// $.fn.prop æ–¹æ³•ç”¨åˆ°äº†</span>
      propMap <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'tabindex'</span><span class="token punctuation">:</span> <span class="token string">'tabIndex'</span><span class="token punctuation">,</span>
        <span class="token string">'readonly'</span><span class="token punctuation">:</span> <span class="token string">'readOnly'</span><span class="token punctuation">,</span>
        <span class="token string">'for'</span><span class="token punctuation">:</span> <span class="token string">'htmlFor'</span><span class="token punctuation">,</span>
        <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">'className'</span><span class="token punctuation">,</span>
        <span class="token string">'maxlength'</span><span class="token punctuation">:</span> <span class="token string">'maxLength'</span><span class="token punctuation">,</span>
        <span class="token string">'cellspacing'</span><span class="token punctuation">:</span> <span class="token string">'cellSpacing'</span><span class="token punctuation">,</span>
        <span class="token string">'cellpadding'</span><span class="token punctuation">:</span> <span class="token string">'cellPadding'</span><span class="token punctuation">,</span>
        <span class="token string">'rowspan'</span><span class="token punctuation">:</span> <span class="token string">'rowSpan'</span><span class="token punctuation">,</span>
        <span class="token string">'colspan'</span><span class="token punctuation">:</span> <span class="token string">'colSpan'</span><span class="token punctuation">,</span>
        <span class="token string">'usemap'</span><span class="token punctuation">:</span> <span class="token string">'useMap'</span><span class="token punctuation">,</span>
        <span class="token string">'frameborder'</span><span class="token punctuation">:</span> <span class="token string">'frameBorder'</span><span class="token punctuation">,</span>
        <span class="token string">'contenteditable'</span><span class="token punctuation">:</span> <span class="token string">'contentEditable'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯arrçš„å‡½æ•°</span>
      isArray <span class="token operator">=</span> Array<span class="token punctuation">.</span>isArray <span class="token operator">||</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">object</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> object <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token punctuation">}</span>

  <span class="token comment">// ä¸Šæ–‡å®šä¹‰ zepto = {}</span>
  <span class="token comment">// åˆ¤æ–­ element æ˜¯å¦ç¬¦åˆ selector çš„é€‰æ‹©è¦æ±‚</span>
  zepto<span class="token punctuation">.</span><span class="token function-variable function">matches</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// selectoræœ‰å€¼ï¼Œelementæœ‰å€¼ï¼Œelementæ˜¯æ™®é€šDOMèŠ‚ç‚¹</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>selector <span class="token operator">||</span> <span class="token operator">!</span>element <span class="token operator">||</span> element<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>

    <span class="token comment">// elem.matchesSelector('.item') </span>
    <span class="token comment">// åˆ¤æ–­å½“å‰çš„ elem æ˜¯å¦ç¬¦åˆä¼ å…¥çš„ selector çš„è¦æ±‚ </span>
    <span class="token keyword">var</span> matchesSelector <span class="token operator">=</span> element<span class="token punctuation">.</span>webkitMatchesSelector <span class="token operator">||</span> 
                          element<span class="token punctuation">.</span>mozMatchesSelector <span class="token operator">||</span>
                          element<span class="token punctuation">.</span>oMatchesSelector <span class="token operator">||</span> 
                          element<span class="token punctuation">.</span>matchesSelector
    <span class="token keyword">if</span> <span class="token punctuation">(</span>matchesSelector<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">matchesSelector</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> selector<span class="token punctuation">)</span>

    <span class="token comment">// æµè§ˆå™¨ä¸æ”¯æŒ matchesSelector</span>
    <span class="token comment">// fall back to performing a selector:</span>
    <span class="token keyword">var</span> match<span class="token punctuation">,</span> 
        parent <span class="token operator">=</span> element<span class="token punctuation">.</span>parentNode<span class="token punctuation">,</span> 
        temp <span class="token operator">=</span> <span class="token operator">!</span>parent

    <span class="token comment">// ä¸Šæ–‡å®šä¹‰ tempParent = document.createElement('div'),</span>
    <span class="token comment">// å¦‚æœæ²¡æœ‰parentï¼Œparentèµ‹å€¼ä¸ºä¸€ä¸ªdivï¼Œç„¶åå°†å½“å‰å…ƒç´ åŠ å…¥åˆ°è¿™ä¸ªdivä¸­</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      parent <span class="token operator">=</span> tempParent<span class="token punctuation">;</span>
      tempParent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// (parent = tempParent).appendChild(element); è¿™ç§å†™æ³•ä¸æ˜“è¯»</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// é€šè¿‡ qsa è·å–åŒ¹é…çš„å…ƒç´ ï¼Œåˆ¤æ–­å…¶ä¸­æœ‰æ²¡æœ‰ element</span>
    match <span class="token operator">=</span> <span class="token operator">~</span>zepto<span class="token punctuation">.</span><span class="token function">qsa</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœæ²¡æœ‰parentæ—¶ï¼Œä¹‹å‰æ‰§è¡Œè¿‡  tempParent.appendChild(element);</span>
      <span class="token comment">// æ­¤æ—¶è¦ç§»é™¤å­å…ƒç´ </span>
      tempParent<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// temp &amp;&amp; tempParent.removeChild(element)  // è¿™ç§å†™æ³•ä¸æ˜“è¯»</span>

    <span class="token comment">// è¿”å›æœ€ç»ˆçš„åŒ¹é…ç»“æœï¼Œç»è¿‡ qsa åˆ¤æ–­çš„ç»“æœ</span>
    <span class="token keyword">return</span> match
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> 
           <span class="token function">String</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">:</span>  <span class="token comment">// null undefined</span>
           class2type<span class="token punctuation">[</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;object&quot;</span> 

    <span class="token comment">// ä¸‹æ–‡å®šä¹‰ï¼š</span>
    <span class="token comment">// // Populate the class2type map</span>
    <span class="token comment">// $.each(&quot;Boolean Number String Function Array Date RegExp Object Error&quot;.split(&quot; &quot;), function(i, name) {</span>
    <span class="token comment">//   class2type[ &quot;[object &quot; + name + &quot;]&quot; ] = name.toLowerCase()</span>
    <span class="token comment">// })</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">isFunction</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">type</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;function&quot;</span> <span class="token punctuation">}</span>
  <span class="token comment">// windowçš„ç‰¹ç‚¹ï¼šwindow.window === window</span>
  <span class="token keyword">function</span> <span class="token function">isWindow</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span> <span class="token keyword">return</span> obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> obj <span class="token operator">==</span> obj<span class="token punctuation">.</span>window <span class="token punctuation">}</span>
  <span class="token comment">// document.nodeType === 9</span>
  <span class="token comment">// elem.DOCUMENT_NODE ä¹Ÿç­‰äº 9 ï¼ˆè¿™é‡Œç›´æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯9ä¹Ÿè¡Œï¼Ÿï¼Ÿï¼Ÿï¼‰</span>
  <span class="token keyword">function</span> <span class="token function">isDocument</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span>   <span class="token punctuation">{</span> <span class="token keyword">return</span> obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> obj<span class="token punctuation">.</span><span class="token constant">DOCUMENT_NODE</span> <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span>     <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">type</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;object&quot;</span> <span class="token punctuation">}</span>
  <span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æœ€åŸºæœ¬çš„objectï¼šObject.getPrototypeOf(obj) == Object.prototype</span>
  <span class="token keyword">function</span> <span class="token function">isPlainObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">isObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isWindow</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype
  <span class="token punctuation">}</span>
  <span class="token comment">// æ•°ç»„æˆ–è€…å¯¹è±¡æ•°ç»„</span>
  <span class="token keyword">function</span> <span class="token function">likeArray</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token string">'number'</span> <span class="token punctuation">}</span>

  <span class="token comment">// ç­›é€‰æ•°ç»„ï¼Œè¸¢å‡º null undefined å…ƒç´ </span>
  <span class="token keyword">function</span> <span class="token function">compact</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">filter</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> item <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

  <span class="token comment">// ä¸‹æ–‡å®šä¹‰ï¼š</span>
  <span class="token comment">// $.fn = {</span>
  <span class="token comment">//    concat: emptyArray.concat,</span>
  <span class="token comment">// $.fn.concat.apply([], array) â€”â€” æ— è®º array æ˜¯ä¸æ˜¯æ•°ç»„ï¼Œéƒ½å°†è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œ</span>
  <span class="token comment">// ä¾‹å¦‚ $.fn.concat.call([], 'abc') è¿”å›çš„æ˜¯ ['abc']</span>
  <span class="token keyword">function</span> <span class="token function">flatten</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> array<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> $<span class="token punctuation">.</span>fn<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span> <span class="token punctuation">:</span> array <span class="token punctuation">}</span>

  <span class="token comment">// camelize å·²åœ¨ä¸Šæ–‡å®šä¹‰</span>
  <span class="token comment">// ç”¨äº css çš„ camalCase è½¬æ¢ï¼Œä¾‹å¦‚ background-color è½¬æ¢ä¸º backgroundColor</span>
  <span class="token function-variable function">camelize</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/-+(.)?/g</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> chr</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> chr <span class="token operator">?</span> chr<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

  <span class="token comment">// å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼</span>
  <span class="token keyword">function</span> <span class="token function">dasherize</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/::/g</span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/([A-Z]+)([A-Z][a-z])/g</span><span class="token punctuation">,</span> <span class="token string">'$1_$2'</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/([a-z\d])([A-Z])/g</span><span class="token punctuation">,</span> <span class="token string">'$1_$2'</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/_/g</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// uniqå˜é‡å·²ç»åœ¨å‰é¢å®šä¹‰</span>
  <span class="token comment">// ç”¨æ¥å°† [1,1,2,2,3,3] æ›¿æ¢ä¸º [1,2,3]</span>
  <span class="token function-variable function">uniq</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">filter</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">==</span> idx <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>

  <span class="token comment">// ä¸Šæ–‡å®šä¹‰ classCache = {}</span>
  <span class="token keyword">function</span> <span class="token function">classRE</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name <span class="token keyword">in</span> classCache <span class="token operator">?</span>
           classCache<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token punctuation">:</span> 
           <span class="token punctuation">(</span>classCache<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'(^|\\s)'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'(\\s|$)'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// classCache å­˜å‚¨çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š</span>
    <span class="token comment">// {</span>
    <span class="token comment">//   abc: /(^|\s)abc(\s|$)/,  // èƒ½åŒ¹é… 'abc' æˆ– ' abc ' æˆ– ' abc' æˆ– 'abc '</span>
    <span class="token comment">//   xyz: /(^|\s)abc(\s|$)/,</span>
    <span class="token comment">//   ...</span>
    <span class="token comment">// }</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ä¼ å…¥ä¸€ä¸ª css çš„ name å’Œ valueï¼Œåˆ¤æ–­è¿™ä¸ª value æ˜¯å¦éœ€è¦å¢åŠ  'px'</span>
  <span class="token keyword">function</span> <span class="token function">maybeAddPx</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// dasherize(name) å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼</span>
    <span class="token comment">// !cssNumber[dasherize(name)] åˆ¤æ–­è½¬æ¢å‡ºæ¥çš„ css name æ˜¯å¦å†è¿™ä¸ªæ•°ç»„ä¹‹å¤–</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">==</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>cssNumber<span class="token punctuation">[</span><span class="token function">dasherize</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> 
           <span class="token comment">// å¦‚æœ value æ˜¯æ•°å­—ï¼Œå¹¶ä¸” name ä¸åœ¨ cssNumber æ•°ç»„ä¹‹å†…ï¼Œå°±éœ€è¦åŠ  'px'ï¼Œå¦åˆ™ä¸éœ€è¦</span>
           <span class="token comment">// ä¾‹å¦‚ 'width'ã€'font-size' å°±éœ€è¦åŠ  'px'ï¼Œ 'font-weight' å°±ä¸éœ€è¦åŠ </span>
           value <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span> <span class="token punctuation">:</span> 
           value

    <span class="token comment">// å‰æ–‡å®šä¹‰----------------------</span>
    <span class="token comment">// cssNumber = {</span>
    <span class="token comment">//   'column-count': 1, </span>
    <span class="token comment">//   'columns': 1, </span>
    <span class="token comment">//   'font-weight': 1, </span>
    <span class="token comment">//   'line-height': 1,</span>
    <span class="token comment">//   'opacity': 1, </span>
    <span class="token comment">//   'z-index': 1, </span>
    <span class="token comment">//   'zoom': 1</span>
    <span class="token comment">// },</span>
    <span class="token comment">// function dasherize(str) {</span>
    <span class="token comment">//   return str.replace(/::/g, '/')</span>
    <span class="token comment">//             .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')</span>
    <span class="token comment">//             .replace(/([a-z\d])([A-Z])/g, '$1_$2')</span>
    <span class="token comment">//             .replace(/_/g, '-')</span>
    <span class="token comment">//             .toLowerCase()</span>
    <span class="token comment">// }</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è·å–ä¸€ä¸ªå…ƒç´ çš„é»˜è®¤ display æ ·å¼å€¼ï¼Œå¯èƒ½çš„ç»“æœæ˜¯ï¼šinline block inline-block table .... ï¼ˆnone è½¬æ¢ä¸º blockï¼‰</span>
  <span class="token comment">// $.fn.show æ–¹æ³•ä¸­ç”¨åˆ°äº†</span>
  <span class="token keyword">function</span> <span class="token function">defaultDisplay</span><span class="token punctuation">(</span><span class="token parameter">nodeName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> element<span class="token punctuation">,</span> display

    <span class="token comment">// å‰æ–‡å®šä¹‰ elementDisplay = {}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elementDisplay<span class="token punctuation">[</span>nodeName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token comment">// å¦‚æœ elementDisplay å¯¹è±¡ä¸­ï¼Œæ²¡æœ‰å­˜å‚¨ nodeName çš„ä¿¡æ¯</span>
      <span class="token comment">// åˆ™æ–°å»ºä¸€ä¸ª nodeName å…ƒç´ ï¼Œæ·»åŠ åˆ° body ä¸­</span>
      element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>nodeName<span class="token punctuation">)</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
      <span class="token comment">// è·å–å®ƒçš„é»˜è®¤çš„ display æ ·å¼ä¿¡æ¯ã€‚</span>
      display <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">&quot;display&quot;</span><span class="token punctuation">)</span>
      <span class="token comment">// æ¥ç€é©¬ä¸Šç§»é™¤å…ƒç´ ï¼ï¼ï¼</span>
      element<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
      <span class="token comment">// 'none' æ¢æˆ 'block'ï¼Œå¦å¤–è¿˜å¯èƒ½æ˜¯ 'inline' 'inline-block' 'table' ç­‰ç­‰...</span>
      display <span class="token operator">==</span> <span class="token string">&quot;none&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>display <span class="token operator">=</span> <span class="token string">&quot;block&quot;</span><span class="token punctuation">)</span>
      <span class="token comment">// å­˜å‚¨ä¸‹æ¥</span>
      elementDisplay<span class="token punctuation">[</span>nodeName<span class="token punctuation">]</span> <span class="token operator">=</span> display

      <span class="token comment">// ä¸‹æ–‡å®šä¹‰ </span>
      <span class="token comment">// var nativeGetComputedStyle = getComputedStyle;</span>
      <span class="token comment">// window.getComputedStyle = function(element){</span>
      <span class="token comment">//   try {</span>
      <span class="token comment">//     return nativeGetComputedStyle(element)</span>
      <span class="token comment">//   } catch(e) {</span>
      <span class="token comment">//     return null</span>
      <span class="token comment">//   }</span>
      <span class="token comment">// }</span>
      <span class="token comment">// è§£é‡Šï¼š</span>
      <span class="token comment">// å¦‚æœæµè§ˆå™¨æ”¯æŒ getComputedStyle åˆ™ä½¿ç”¨ï¼Œå¦‚æœä¸æ”¯æŒï¼Œå°±è¿”å› null</span>
      <span class="token comment">// getComputedStyle(elem, 'ä¼ªç±»ï¼Œå¦‚ :link') è¿”å›ä¸€ä¸ª CSSStyleDeclaration å¯¹è±¡ï¼Œé‡Œé¢å­˜å‚¨äº†å…ƒç´ çš„æ ·å¼ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ getPropertyValue('name') æ–¹æ³•è·å–</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æœ€ç»ˆè¿”å› display ç»“æœ</span>
    <span class="token keyword">return</span> elementDisplay<span class="token punctuation">[</span>nodeName<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è¿”å›ä¸€ä¸ªå…ƒç´ çš„å­å…ƒç´ ï¼Œæ•°ç»„å½¢å¼</span>
  <span class="token keyword">function</span> <span class="token function">children</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// æœ‰äº›æµè§ˆå™¨æ”¯æŒ elem.children è·å–å­å…ƒç´ ï¼Œæœ‰äº›ä¸æ”¯æŒ</span>
    <span class="token keyword">return</span> <span class="token string">'children'</span> <span class="token keyword">in</span> element <span class="token operator">?</span>

           <span class="token comment">// ä¸Šæ–‡å®šä¹‰ slice = [].slice</span>
           <span class="token comment">// slice.call(likeArr) å¯ä»¥å°†å¯¹è±¡æ•°ç»„è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„</span>
           <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">:</span>

           <span class="token comment">// æµè§ˆå™¨ä¸æ”¯æŒ elem.children åªèƒ½é€šè¿‡ elem.childNodes è·å–å­å…ƒç´ </span>
           <span class="token comment">// åªå» node.nodeType == 1 çš„å­å…ƒç´ ï¼Œé€šè¿‡ $.map æ‹¼æ¥æˆæ•°ç»„</span>
           <span class="token comment">// $.map ä¸‹æ–‡å®šä¹‰çš„ï¼Œ $.map = function (elements, callback) {....}</span>
           <span class="token comment">// $.map ä½œç”¨ï¼šé’ˆå¯¹ elementsï¼ˆå¯¹è±¡æ•°ç»„æˆ–æ•°ç»„ï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½ç»è¿‡ callback å‡½æ•°çš„è¿‡æ»¤ï¼Œå¹¶å°†è¿‡æ»¤é€šè¿‡çš„å…ƒç´ ï¼Œpushåˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œè¿”å›æ–°æ•°ç»„</span>
           $<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>childNodes<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>nodeType <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> node <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>


  <span class="token comment">// ä¸Šæ–‡å®šä¹‰ zepto = {}</span>
  <span class="token comment">// ä¸Šæ–‡å®šä¹‰ zepto.matches = function(element, selector) { /* åˆ¤æ–­elemæ˜¯å¦ç¬¦åˆselectorçš„è¦æ±‚ */ }</span>

  <span class="token comment">// `$.zepto.fragment` takes a html string and an optional tag name</span>
  <span class="token comment">// to generate DOM nodes nodes from the given html string.</span>
  <span class="token comment">// The generated DOM nodes are returned as an array.</span>
  <span class="token comment">// This function can be overriden in plugins for example to make</span>
  <span class="token comment">// it compatible with browsers that don't support the DOM fully.</span>
  zepto<span class="token punctuation">.</span><span class="token function-variable function">fragment</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">html<span class="token punctuation">,</span> name<span class="token punctuation">,</span> properties</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
      å‚æ•°ï¼š
      @html: å¾…å¤„ç†çš„htmlå­—ç¬¦ä¸²
      @name: é€šè¿‡ name å¯åœ¨ containers ä¸­æŸ¥æ‰¾å®¹å™¨èŠ‚ç‚¹ï¼Œå¦‚æœä¸ä¼ å…¥ï¼Œå–å¾—çš„å®¹å™¨é»˜è®¤ä¸º div
      @properties: èŠ‚ç‚¹å±æ€§å¯¹è±¡
    */</span>

    <span class="token keyword">var</span> dom<span class="token punctuation">,</span> nodes<span class="token punctuation">,</span> container

    <span class="token comment">// ä¸Šæ–‡å®šä¹‰ï¼šsingleTagRE = /^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;|)$/,   // åŒ¹é… &lt;img /&gt; &lt;p&gt;&lt;/p&gt;  ä¸åŒ¹é… &lt;img src=&quot;&quot;/&gt; &lt;p&gt;123&lt;/p&gt;</span>
    <span class="token comment">// å¦‚æœ html æ˜¯å•æ ‡ç­¾ï¼Œåˆ™ç›´æ¥ç”¨è¯¥æ ‡ç­¾åˆ›å»ºå…ƒç´ </span>
    <span class="token comment">// RegExp.$1 è¡¨ç¤ºæ­£åˆ™ä¸­çš„ç¬¬ä¸€ä¸ªæ‹¬å·åŒ¹é…çš„å†…å®¹ï¼Œåœ¨æ­¤å³ (\w+) åŒ¹é…çš„å†…å®¹ï¼Œ</span>
    <span class="token comment">// A special case optimization for a single tag</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>singleTagRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">)</span> dom <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// è¯´æ˜ html ä¸æ˜¯å•æ ‡ç­¾ï¼Œdomæœªè¢«èµ‹å€¼</span>

      <span class="token comment">// ä¸Šæ–‡å®šä¹‰ tagExpanderRE = /&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/ig,   // å•æ ‡ç­¾</span>
      <span class="token comment">// å°† &lt;p/&gt;æˆ–&lt;p /&gt;ï¼Œæ›¿æ¢ä¸º &lt;p&gt;&lt;/p&gt;ï¼Œå°†&lt;p abc/&gt;æ›¿æ¢ä¸º&lt;p&gt;abc&lt;/p&gt;</span>
      <span class="token comment">// &lt;input/&gt; ï¼ˆåœ¨ tagExpanderRE ä¸­å®šä¹‰ï¼‰çš„ä¸æ›¿æ¢</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>html<span class="token punctuation">.</span>replace<span class="token punctuation">)</span> html <span class="token operator">=</span> html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>tagExpanderRE<span class="token punctuation">,</span> <span class="token string">&quot;&lt;$1&gt;&lt;/$2&gt;&quot;</span><span class="token punctuation">)</span>

      <span class="token comment">// fragmentRE = /^\s*&lt;(\w+|!)[^&gt;]*&gt;/,   // å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt;</span>
      <span class="token comment">// å¦‚æœ name æœªä¼ å…¥ï¼Œåˆ™èµ‹å€¼ä¸º html çš„ç¬¬ä¸€ä¸ªæ ‡ç­¾</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> name <span class="token operator">=</span> fragmentRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1</span>

      <span class="token comment">// ä¸Šæ–‡å®šä¹‰</span>
      <span class="token comment">// // æŒ‡å®šç‰¹æ®Šå…ƒç´ çš„ å®¹å™¨</span>
      <span class="token comment">// containers = {</span>
      <span class="token comment">//   'tr': document.createElement('tbody'),</span>
      <span class="token comment">//   'tbody': table, </span>
      <span class="token comment">//   'thead': table, </span>
      <span class="token comment">//   'tfoot': table,</span>
      <span class="token comment">//   'td': tableRow, </span>
      <span class="token comment">//   'th': tableRow,</span>
      <span class="token comment">//   // é™¤äº†ä¸Šé¢æŒ‡å®šçš„ï¼Œå…¶ä»–æ‰€æœ‰å…ƒç´ çš„å®¹å™¨éƒ½æ˜¯ div</span>
      <span class="token comment">//   '*': document.createElement('div')</span>
      <span class="token comment">// },</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>name <span class="token keyword">in</span> containers<span class="token punctuation">)</span><span class="token punctuation">)</span> name <span class="token operator">=</span> <span class="token string">'*'</span>

      container <span class="token operator">=</span> containers<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
      container<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span> html  <span class="token comment">// è½¬å˜ä¸ºå­—ç¬¦ä¸²çš„å¿«æ·æ–¹å¼</span>

      <span class="token comment">// éå† container çš„å­å…ƒç´ ï¼ˆå…ˆè½¬æ¢ä¸ºæ•°ç»„å½¢å¼ï¼‰</span>
      <span class="token comment">// è¿”å›çš„åŒæ—¶ï¼Œå°†æ¯ä¸ªå­å…ƒç´ ç§»é™¤ã€‚</span>
      <span class="token comment">// $.each è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ•°ç»„ slice.call(container.childNodes)</span>
      dom <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>container<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        container<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// èµ‹å€¼å±æ€§</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å…ˆå°†domè½¬æ¢ä¸º zepto å¯¹è±¡</span>
      nodes <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span>

      $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>properties<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¸Šæ–‡å®šä¹‰ï¼š</span>
        <span class="token comment">// // åº”è¯¥é€šè¿‡æ–¹æ³•è°ƒç”¨æ¥è®¾ç½®/è·å–çš„ç‰¹æ®Šå±æ€§</span>
        <span class="token comment">// methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>methodAttributes<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> nodes<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>  <span class="token comment">// æ»¡è¶³ methodAttributes çš„ï¼Œé€šè¿‡æ–¹æ³•èµ‹å€¼</span>
        <span class="token keyword">else</span> nodes<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token comment">// å¦åˆ™ï¼Œé€šè¿‡å±æ€§å¤åˆ¶</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æœ€ç»ˆè¿”å›çš„domå¯èƒ½æœ‰ä¸¤ç§å½¢å¼</span>
    <span class="token comment">// ç¬¬ä¸€ï¼Œå¦‚æœ html æ˜¯å•æ ‡ç­¾ï¼Œåˆ™domè¢«å¤åˆ¶ä¸ºä¸€ä¸ªzeptoå¯¹è±¡ dom = $(document.createElement(RegExp.$1))</span>
    <span class="token comment">// ç¬¬äºŒï¼Œå¦‚æœ html ä¸æ˜¯å•æ ‡ç­¾ï¼Œåˆ™domè¢«å¤åˆ¶ä¸ºä¸€ä¸ªDOMèŠ‚ç‚¹çš„æ•°ç»„</span>
    <span class="token keyword">return</span> dom
  <span class="token punctuation">}</span>


  <span class="token comment">// ä¸Šæ–‡å®šä¹‰ zepto = {}</span>
  <span class="token comment">// ä¸Šæ–‡å®šä¹‰ zepto.matches = function(element, selector) { /* åˆ¤æ–­elemæ˜¯å¦ç¬¦åˆselectorçš„è¦æ±‚ */ }</span>
  <span class="token comment">// ä¸Šæ–‡å®šä¹‰ zepto.fragment = function(html, name, properties) { /* é€šè¿‡htmlå­—ç¬¦ä¸²è·å–æ–‡æ¡£ç¢ç‰‡ */ }</span>

  <span class="token comment">// `$.zepto.Z` swaps out the prototype of the given `dom` array</span>
  <span class="token comment">// of nodes with `$.fn` and thus supplying all the Zepto functions</span>
  <span class="token comment">// to the array. Note that `__proto__` is not supported on Internet</span>
  <span class="token comment">// Explorer. This method can be overriden in plugins.</span>
  zepto<span class="token punctuation">.</span><span class="token function-variable function">Z</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dom<span class="token punctuation">,</span> selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dom <span class="token operator">=</span> dom <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token comment">// å°† dom éšå¼åŸå‹å¼ºåˆ¶æ”¹ä¸º $.fn</span>
    <span class="token comment">// ä¸‹æ–‡ zepto.Z.prototype = $.fn   å› æ­¤ï¼Œdom.__proto__ = $.fn å³ dom.__proto__ = zepto.Z.prototype  å¯ä»¥ä¸è¾ƒçœŸçš„è®¤ä¸º zepto.Z å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆä½†æ„Ÿè§‰è¿™ä¹ˆè®¾è®¡ï¼Œæœ‰äº›è¹©è„šï¼‰</span>
    dom<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> $<span class="token punctuation">.</span>fn
    dom<span class="token punctuation">.</span>selector <span class="token operator">=</span> selector <span class="token operator">||</span> <span class="token string">''</span>
    <span class="token keyword">return</span> dom
  <span class="token punctuation">}</span>

  <span class="token comment">// `$.zepto.isZ` should return `true` if the given object is a Zepto</span>
  <span class="token comment">// collection. This method can be overriden in plugins.</span>
  zepto<span class="token punctuation">.</span><span class="token function-variable function">isZ</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸Šæ–‡ dom.__proto__ = $.fn</span>
    <span class="token comment">// ä¸‹æ–‡ zepto.Z.prototype = $.fn</span>
    <span class="token comment">// å¯çŸ¥ï¼šdom.__proto__ === $.fn === zepto.Z.prototype</span>

    <span class="token comment">// å› æ­¤ï¼Œzeptoå¯¹è±¡éƒ½ç¬¦åˆ object instanceof zepto.Z</span>
    <span class="token keyword">return</span> object <span class="token keyword">instanceof</span> <span class="token class-name">zepto<span class="token punctuation">.</span>Z</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and</span>
  <span class="token comment">// takes a CSS selector and an optional context (and handles various</span>
  <span class="token comment">// special cases).</span>
  <span class="token comment">// This method can be overriden in plugins.</span>
  zepto<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dom
    <span class="token comment">// If nothing given, return an empty Zepto collection</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>selector<span class="token punctuation">)</span> <span class="token keyword">return</span> zepto<span class="token punctuation">.</span><span class="token constant">Z</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// Optimize for string selectors</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å­—ç¬¦ä¸²çš„æƒ…å†µï¼Œä¸€èˆ¬æœ‰ä¸¤ç§ï¼š</span>
      <span class="token comment">// ç¬¬ä¸€ï¼Œä¸€æ®µ html ä»£ç ï¼Œæ—¨åœ¨é€šè¿‡zeptoç”Ÿæˆdomå¯¹è±¡</span>
      <span class="token comment">// ç¬¬äºŒï¼Œä¸€æ®µæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ—¨åœ¨é€šè¿‡zeptoæŸ¥æ‰¾domå¯¹è±¡</span>
      <span class="token comment">// å°†æŸ¥è¯¢ç»“æœå­˜å‚¨åˆ° dom å˜é‡ä¸­</span>

      selector <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// If it's a html fragment, create nodes from it</span>
      <span class="token comment">// Note: In both Chrome 21 and Firefox 15, DOM error 12</span>
      <span class="token comment">// is thrown if the fragment doesn't begin with &lt;</span>

      <span class="token comment">// ä¸Šæ–‡å®šä¹‰ï¼š</span>
      <span class="token comment">// // å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt;</span>
      <span class="token comment">// fragmentRE = /^\s*&lt;(\w+|!)[^&gt;]*&gt;/,</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>selector<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'&lt;'</span> <span class="token operator">&amp;&amp;</span> fragmentRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment">// ç¬¬ä¸€ï¼ŒRegExp.$1å–å‡ºæ¥çš„å°±æ˜¯ç¬¬ä¸€ä¸ªæ ‡ç­¾åç§°ï¼Œå³æ­£åˆ™ä¸­ (\w+|!) å¯¹åº”çš„å†…å®¹</span>
        <span class="token comment">// ç¬¬äºŒï¼Œæ­¤æ—¶çš„ context åº”è¯¥ä¼ å…¥çš„æ˜¯csså±æ€§å¯¹è±¡ï¼ˆè¿™é‡Œä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œè€ç‰ˆçš„ä¸ä¼šä¼ å…¥ contextï¼‰</span>
        dom <span class="token operator">=</span> zepto<span class="token punctuation">.</span><span class="token function">fragment</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">,</span> selector <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token comment">// If there's a context, create a collection on that context first, and select</span>
      <span class="token comment">// nodes from there</span>

      <span class="token comment">// å¦‚æœ selector ä¸æ˜¯htmlå­—ç¬¦ä¸²æ ‡ç­¾ï¼Œå¹¶ä¸” context æœ‰å€¼ï¼Œåˆ™ä»contextä¸­æŸ¥æ‰¾</span>
      <span class="token comment">// find åº”è¯¥æ˜¯åœ¨ $.fn ä¸­å®šä¹‰çš„ï¼Œæœ‰å¾…è§£è¯»ï¼Ÿï¼Ÿï¼Ÿ</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>context <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>
      <span class="token comment">// If it's a CSS selector, use it to select nodes.</span>

      <span class="token comment">// é™¤äº†ä»¥ä¸Šæƒ…å†µï¼Œå°±ä»æ•´ä¸ª document æ‰§è¡Œ qsa çš„æŸ¥æ‰¾</span>
      <span class="token keyword">else</span> dom <span class="token operator">=</span> zepto<span class="token punctuation">.</span><span class="token function">qsa</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> selector<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// If a function is given, call it when the DOM is ready</span>
    <span class="token comment">// å¦‚æœæ˜¯å‡½æ•°ï¼Œåˆ™dom readyæ—¶æ‰§è¡Œï¼Œ</span>
    <span class="token comment">// readyæ–¹æ³•åº”è¯¥åœ¨ $.fn ä¸­å®šä¹‰ï¼Œæœ‰å¾…è§£æ¯’</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>

    <span class="token comment">// If a Zepto collection is given, just return it</span>
    <span class="token comment">// ä¼ å…¥çš„å‚æ•°æœ¬èº«å°±å·²ç»æ˜¯ zepto å¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>zepto<span class="token punctuation">.</span><span class="token function">isZ</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> selector
    <span class="token keyword">else</span> <span class="token punctuation">{</span>

      <span class="token comment">// compactå‡½æ•°ï¼šè¸¢å‡ºæ•°ç»„ä¸­ == null çš„å…ƒç´ </span>
      <span class="token comment">// normalize array if an array of nodes is given</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArray</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span> dom <span class="token operator">=</span> <span class="token function">compact</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>

      <span class="token comment">// å¦‚æœä¼ å…¥çš„æ˜¯objectï¼Œç›´æ¥å¼ºåˆ¶å¡è¿›ä¸€ä¸ªæ•°ç»„</span>
      <span class="token comment">// Wrap DOM nodes.</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span> dom <span class="token operator">=</span> <span class="token punctuation">[</span>selector<span class="token punctuation">]</span><span class="token punctuation">,</span> selector <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token comment">// åŠæ—¶æ¸…ç©º selector ä¸å¦¨ç¢ä¸‹é¢çš„åˆ¤æ–­</span>


      <span class="token comment">// ä»æ­¤å¾€ä¸‹ï¼Œæ„Ÿè§‰å’Œä¸Šæ–‡ selector æ˜¯å­—ç¬¦ä¸²çš„æƒ…å†µä¸‹ï¼Œé‡å¤äº†</span>
      <span class="token comment">// ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span>


      <span class="token comment">// fragmentRE.test å³åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ html æ ‡ç­¾å¼€å¤´ï¼ˆå³æ˜¯å¦æ˜¯html fragementï¼‰</span>
      <span class="token comment">// If it's a html fragment, create nodes from it</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>fragmentRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">//æ­¤æ—¶ï¼Œcontext ä¹Ÿæ˜¯å±æ€§é›†åˆï¼Œä¸æ˜¯å®¹å™¨ï¼ï¼ï¼</span>
        <span class="token comment">//ï¼ˆè¿™é‡Œä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œè€ç‰ˆçš„ä¸ä¼šä¼ å…¥ contextï¼‰</span>
        dom <span class="token operator">=</span> zepto<span class="token punctuation">.</span><span class="token function">fragment</span><span class="token punctuation">(</span>selector<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">,</span> selector <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// åŠæ—¶æ¸…ç©º selector ä¸å¦¨ç¢ä¸‹é¢çš„åˆ¤æ–­</span>
      <span class="token comment">// If there's a context, create a collection on that context first, and select</span>
      <span class="token comment">// nodes from there</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>context <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>
      <span class="token comment">// And last but no least, if it's a CSS selector, use it to select nodes.</span>
      <span class="token keyword">else</span> dom <span class="token operator">=</span> zepto<span class="token punctuation">.</span><span class="token function">qsa</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> selector<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æœ€ç»ˆï¼Œè¿˜æ˜¯é€šè¿‡ zepto.Z åˆ›å»ºäº†å¯¹è±¡</span>
    <span class="token comment">// è¿™é‡Œçš„ domï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„</span>
    <span class="token comment">// create a new Zepto collection from the nodes found</span>
    <span class="token keyword">return</span> zepto<span class="token punctuation">.</span><span class="token constant">Z</span><span class="token punctuation">(</span>dom<span class="token punctuation">,</span> selector<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// `$` will be the base `Zepto` object. When calling this</span>
  <span class="token comment">// function just call `$.zepto.init, which makes the implementation</span>
  <span class="token comment">// details of selecting nodes and creating Zepto collections</span>
  <span class="token comment">// patchable in plugins.</span>
  <span class="token function-variable function">$</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> zepto<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> context<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// $ æœ€ç»ˆè¢«è¿™ä¸ªåŒ¿åå‡½æ•°æ‰€è¿”å›ï¼Œå¹¶å¤åˆ¶ç»™äº†å…¨å±€çš„ Zepto å˜é‡</span>
  <span class="token comment">// å…¨å±€çš„ zepto å˜é‡æš´éœ²ç»™äº† windowï¼Œå¹¶ä¸”å¯èƒ½æœ‰ä¸€ä¸ªåˆ«åâ€”â€” $</span>
  <span class="token comment">// æ­¤ $ éå½¼ $ </span>
  <span class="token comment">// å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè¿™é‡Œè‚¯å®šéå¸¸ç»•ï¼ˆè¿˜ä¸å¦‚æŠŠè¿™é‡Œçš„ $ æ”¹æ”¹åå­—ï¼‰</span>


  <span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> source<span class="token punctuation">,</span> deep</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// key åœ¨ä¸Šæ–‡å·²ç»å®šä¹‰ï¼Œå¦åˆ™å°±æ±¡æŸ“å…¨å±€å˜é‡äº†</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> source<span class="token punctuation">)</span>

      <span class="token comment">// æ·±åº¦é€’å½’ï¼Œé¦–å…ˆå¿…é¡» deep å‚æ•°ä¸º true</span>
      <span class="token comment">// å…¶æ¬¡ï¼Œsource[key] å¿…é¡»æ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œæ‰æœ‰å¿…è¦æ·±åº¦é€’å½’ï¼ˆå¦åˆ™æ²¡å¿…è¦ï¼‰</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>deep <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isArray</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// source[key] æ˜¯å¯¹è±¡ï¼Œè€Œ target[key] ä¸æ˜¯å¯¹è±¡</span>
        <span class="token comment">// åˆ™ target[key] = {} åˆå§‹åŒ–ä¸€ä¸‹ï¼Œå¦åˆ™é€’å½’ä¼šå‡ºé”™çš„</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isPlainObject</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token comment">// source[key] æ˜¯æ•°ç»„ï¼Œè€Œ target[key] ä¸æ˜¯æ•°ç»„</span>
        <span class="token comment">// åˆ™ target[key] = [] åˆå§‹åŒ–ä¸€ä¸‹ï¼Œå¦åˆ™é€’å½’ä¼šå‡ºé”™çš„</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArray</span><span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

        <span class="token comment">// æ‰§è¡Œé€’å½’</span>
        <span class="token function">extend</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> source<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> deep<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// ä¸æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œè¯´æ˜ source[key] æ˜¯ä¸€èˆ¬çš„å€¼ç±»å‹ï¼Œç›´æ¥èµ‹å€¼ç»™ target å°±æ˜¯äº†</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Copy all but undefined properties from one or more</span>
  <span class="token comment">// objects to the `target` object.</span>
  $<span class="token punctuation">.</span><span class="token function-variable function">extend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// ä¸€èˆ¬ä¼ å…¥çš„å‚æ•°ä¼šæ˜¯ï¼š</span>
    <span class="token comment">// (targetObj, srcObj1, srcObj2, srcObj1...)</span>
    <span class="token comment">// (true, targetObj, srcObj1, srcObj2, srcObj1...)</span>

    <span class="token comment">// arguments æ˜¯å¯¹è±¡æ•°ç»„ï¼Œslice.call ä¼šè¿”å›çœŸæ­£çš„æ•°ç»„ï¼ˆæ­¤å¤„è¿”å›ä»ç¬¬äºŒé¡¹å¼€å§‹ï¼‰</span>
    <span class="token keyword">var</span> deep<span class="token punctuation">,</span> args <span class="token operator">=</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯booleanï¼Œè¿™é‡Œä¼šæŠŠç¬¬äºŒä¸ªå‚æ•°å½“åš targetï¼Œå…¶ä»–çš„ä½œä¸º source</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">==</span> <span class="token string">'boolean'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      deep <span class="token operator">=</span> target
      target <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å°†æ‰€æœ‰çš„ source æ·»åŠ åˆ° target ä¸­</span>
    args<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token function">extend</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> arg<span class="token punctuation">,</span> deep<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> target

    <span class="token comment">// æ„Ÿè§‰è¿™æ ·è®¾è®¡æ˜¯æ¯”è¾ƒå¥½ï¼Œå¾ˆå¥½çš„å°†ä¸šåŠ¡å’Œåº•å±‚è¿›è¡Œäº†åˆ†ç¦»ï¼ˆè™½ç„¶æ¯”è¾ƒç®€å•ï¼‰ï¼š</span>
    <span class="token comment">// æ ¸å¿ƒæ–¹æ³•å† function extend(...){...} ä¸­å®šä¹‰ï¼Œ</span>
    <span class="token comment">// è€Œ $.extend æ–¹æ³•ä¸­åšä¸€äº›å¤–å›´çš„åˆ¤æ–­å’Œå¤„ç†ï¼Œæœ€ç»ˆè°ƒç”¨ extend å‡½æ•°å»æ‰§è¡Œ</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// `$.zepto.qsa` is Zepto's CSS selector implementation which</span>
  <span class="token comment">// uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.</span>
  <span class="token comment">// This method can be overriden in plugins.</span>
  zepto<span class="token punctuation">.</span><span class="token function-variable function">qsa</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">/*
      @element: å®¹å™¨
      @selector: é€‰æ‹©å™¨
    */</span>

    <span class="token keyword">var</span> found<span class="token punctuation">,</span>
        maybeID <span class="token operator">=</span> selector<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'#'</span><span class="token punctuation">,</span>
        maybeClass <span class="token operator">=</span> <span class="token operator">!</span>maybeID <span class="token operator">&amp;&amp;</span> selector<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'.'</span><span class="token punctuation">,</span>

        <span class="token comment">// IDæˆ–classå½¢å¼ï¼šè¿”å› selector.slice(1) å³IDæˆ–è€…classçš„å€¼</span>
        <span class="token comment">// å¦åˆ™ï¼šè¿”å› selectorï¼Œå¦‚é€šè¿‡ tagName æŸ¥è¯¢</span>
        nameOnly <span class="token operator">=</span> maybeID <span class="token operator">||</span> maybeClass <span class="token operator">?</span> selector<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> selector<span class="token punctuation">,</span> <span class="token comment">// Ensure that a 1 char tag name still gets checked</span>
        
        <span class="token comment">// æ˜¯å¦æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªå¤æ‚çš„é€‰æ‹©å™¨ï¼Œå¦‚ 'div#div1 .item[link] .red'ï¼‰</span>
        isSimple <span class="token operator">=</span> simpleSelectorRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>nameOnly<span class="token punctuation">)</span>

    <span class="token comment">// ä¸Šæ–‡å®šä¹‰ï¼š</span>
    <span class="token comment">// // åŒ¹é…ä¸€ä¸ªåŒ…æ‹¬ï¼ˆå­—æ¯ã€æ•°ç»„ã€ä¸‹åˆ’çº¿ã€-ï¼‰çš„å­—ç¬¦ä¸²</span>
    <span class="token comment">// simpleSelectorRE = /^[\w-]*$/,</span>



    <span class="token comment">// ä»¥ä¸‹ä»£ç çš„åŸºæœ¬æ€è·¯æ˜¯ï¼š</span>
    <span class="token comment">// 1. ä¼˜å…ˆé€šè¿‡ ID è·å–å…ƒç´ ï¼›</span>
    <span class="token comment">// 2. ç„¶åè¯•å›¾é€šè¿‡ className å’Œ tagName è·å–å…ƒç´ </span>
    <span class="token comment">// 3. æœ€åé€šè¿‡ querySelectorAll æ¥è·å–</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">isDocument</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> isSimple <span class="token operator">&amp;&amp;</span> maybeID<span class="token punctuation">)</span> <span class="token operator">?</span>
           <span class="token comment">// è¿™æ˜¯æœ€ç®€å•çš„å½¢å¼ï¼šå®¹å™¨æ˜¯documentã€é€‰æ‹©å™¨æ˜¯ä¸€ä¸ªid</span>
           <span class="token comment">// å› ä¸º getElementById åªèƒ½åœ¨ document ä¸Šç”¨ï¼Œæ‰€ä»¥è¿™é‡Œå•ç‹¬æ‹¿å‡ºæ¥</span>
           <span class="token punctuation">(</span> <span class="token punctuation">(</span>found <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>nameOnly<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> 
              <span class="token punctuation">[</span>found<span class="token punctuation">]</span> <span class="token punctuation">:</span> 
              <span class="token punctuation">[</span><span class="token punctuation">]</span> 
           <span class="token punctuation">)</span> <span class="token punctuation">:</span>

           <span class="token punctuation">(</span>element<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> element<span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token operator">?</span> 
              <span class="token comment">// å®¹å™¨ä¸æ˜¯ä¸€èˆ¬å…ƒç´ ï¼Œä¹Ÿä¸æ˜¯documentï¼Œç›´æ¥è¿”å› []</span>
              <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">:</span>

              <span class="token comment">// å°†è·å–çš„æ‰€æœ‰å…ƒç´ é›†åˆï¼Œéƒ½è½¬æ¢ä¸ºæ•°ç»„</span>
              <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>
                isSimple <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>maybeID 

                <span class="token comment">// isSimpleæƒ…å†µä¸‹ï¼ŒnameOnly åªå¯èƒ½æ˜¯ className æˆ–è€… tagName</span>
                <span class="token comment">// getElementsByClassName å’Œ getElementsByTagName å¯ä»¥åœ¨ elem ä¸Šç”¨ï¼Œè€Œä¸”æ¯” querySelectorAll é€Ÿåº¦å¿«</span>
                <span class="token comment">// æ‰€ä»¥ï¼Œåªè¦elemå®¹å™¨æœ‰å€¼ï¼Œå°½é‡å•ç‹¬æ‹¿å‡ºæ¥å¤„ç†</span>
                <span class="token operator">?</span> 
                  maybeClass <span class="token operator">?</span> 
                  element<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span>nameOnly<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token comment">// If it's simple, it could be a class</span>
                  element<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>  <span class="token comment">// Or a tag</span>

                <span class="token comment">// æœ€åå…¶ä»–æƒ…å†µï¼Œåªèƒ½é€šè¿‡ querySelectorAll æ¥å¤„ç†</span>
                <span class="token punctuation">:</span> 
                element<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token comment">// Or it's not simple, and we need to query all</span>
              <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ ¹æ® selector ç­›é€‰ nodes </span>
  <span class="token comment">// å¹¶å°† nodes å°è£…ä¸º zepto å¯¹è±¡</span>
  <span class="token comment">// $.fn.filter ä¸‹æ–‡å®šä¹‰</span>
  <span class="token keyword">function</span> <span class="token function">filtered</span><span class="token punctuation">(</span><span class="token parameter">nodes<span class="token punctuation">,</span> selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> selector <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">$</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">$</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// åˆ¤æ–­ parent æ˜¯å¦åŒ…å« node</span>
  $<span class="token punctuation">.</span>contains <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>contains <span class="token operator">?</span>
    <span class="token comment">// æµè§ˆå™¨æ”¯æŒ contains æ–¹æ³•</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> parent <span class="token operator">!==</span> node <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token punctuation">:</span>
    <span class="token comment">// ä¸æ”¯æŒ contains æ–¹æ³•</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>node <span class="token operator">=</span> node<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">===</span> parent<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>

  <span class="token comment">// å¦‚æœ arg æ˜¯å‡½æ•°ï¼Œåˆ™æ”¹å˜å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå’Œå‚æ•°</span>
  <span class="token comment">// å¦‚æœä¸æ˜¯ï¼Œç›´æ¥è¿”å› arg</span>
  <span class="token comment">// $.fn.html æ–¹æ³•å°±ç”¨åˆ°äº†</span>
  <span class="token keyword">function</span> <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> arg<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">arg</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> payload<span class="token punctuation">)</span> <span class="token punctuation">:</span> arg
  <span class="token punctuation">}</span>

  <span class="token comment">// è®¾ç½®å±æ€§</span>
  <span class="token keyword">function</span> <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> node<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">:</span> node<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// è®¾ç½®æˆ–è·å– node çš„ className</span>
  <span class="token comment">// è€ƒè™‘ svg ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span>
  <span class="token comment">// access className property while respecting SVGAnimatedString</span>
  <span class="token keyword">function</span> <span class="token function">className</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> klass <span class="token operator">=</span> node<span class="token punctuation">.</span>className <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
        svg   <span class="token operator">=</span> klass <span class="token operator">&amp;&amp;</span> klass<span class="token punctuation">.</span>baseVal <span class="token operator">!==</span> <span class="token keyword">undefined</span>

    <span class="token comment">// è·å–</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> svg <span class="token operator">?</span> klass<span class="token punctuation">.</span>baseVal <span class="token punctuation">:</span> klass
    <span class="token comment">// è®¾ç½®</span>
    svg <span class="token operator">?</span> <span class="token punctuation">(</span>klass<span class="token punctuation">.</span>baseVal <span class="token operator">=</span> value<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>className <span class="token operator">=</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å°†å­—ç¬¦ä¸²å˜æˆå“åº”çš„å¯¹è±¡æˆ–è€…å€¼ï¼Œä¾‹å¦‚æºä»£ç çš„æ³¨é‡Šï¼š</span>
  <span class="token comment">// &quot;true&quot;  =&gt; true</span>
  <span class="token comment">// &quot;false&quot; =&gt; false</span>
  <span class="token comment">// &quot;null&quot;  =&gt; null</span>
  <span class="token comment">// &quot;42&quot;    =&gt; 42</span>
  <span class="token comment">// &quot;42.5&quot;  =&gt; 42.5</span>
  <span class="token comment">// &quot;08&quot;    =&gt; &quot;08&quot;</span>
  <span class="token comment">// JSON    =&gt; parse if valid</span>
  <span class="token comment">// String  =&gt; self</span>
  <span class="token keyword">function</span> <span class="token function">deserializeValue</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> value <span class="token operator">?</span>

        <span class="token comment">// valueã€æœ‰å€¼ã€çš„æƒ…å†µï¼š</span>
        value <span class="token operator">==</span> <span class="token string">&quot;true&quot;</span> <span class="token operator">||</span>  <span class="token comment">// å¦‚æœ value == 'true'ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æœ¬èº«å°±è¿”å› true ï¼Œå¯¼è‡´æ•´ä¸ªå‡½æ•°è¿”å›true</span>

          <span class="token comment">// value !== 'true' çš„æƒ…å†µï¼š</span>
          <span class="token punctuation">(</span> 
            value <span class="token operator">==</span> <span class="token string">&quot;false&quot;</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token punctuation">:</span> <span class="token comment">// &quot;null&quot;  =&gt; null</span>
            value <span class="token operator">==</span> <span class="token string">&quot;null&quot;</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> <span class="token comment">// &quot;null&quot;  =&gt; null</span>
            <span class="token operator">+</span>value <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">==</span> value <span class="token operator">?</span> <span class="token operator">+</span>value <span class="token punctuation">:</span>  <span class="token comment">// æ•°å­—ï¼š&quot;42&quot; =&gt; 42  &quot;42.5&quot; =&gt; 42.5  ï¼ˆ ä½†æ˜¯ '08' å´ä¸ç¬¦åˆè¿™ä¸ªæ¡ä»¶ ï¼‰</span>
            <span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">[</span>\<span class="token punctuation">[</span>\<span class="token punctuation">{</span><span class="token punctuation">]</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">?</span> $<span class="token punctuation">.</span><span class="token function">parseJSON</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token comment">// '[...]' æˆ–è€… '{...}'</span>
            value <span class="token comment">// å…¶ä»–</span>
          <span class="token punctuation">)</span>

        <span class="token comment">// valueã€æ— å€¼ã€çš„æƒ…å†µï¼š undefined / '' / flase / 0 / null</span>
        <span class="token punctuation">:</span> value 
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> value
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å°†ä¸Šæ–‡å®šä¹‰çš„å‡½æ•°ï¼Œæš´éœ²ç»™ $ å¯¹è±¡ï¼ˆå…¶å® $ æ˜¯ä¸€ä¸ª functionï¼‰</span>
  $<span class="token punctuation">.</span>type <span class="token operator">=</span> type
  $<span class="token punctuation">.</span>isFunction <span class="token operator">=</span> isFunction
  $<span class="token punctuation">.</span>isWindow <span class="token operator">=</span> isWindow
  $<span class="token punctuation">.</span>isArray <span class="token operator">=</span> isArray
  $<span class="token punctuation">.</span>isPlainObject <span class="token operator">=</span> isPlainObject

  $<span class="token punctuation">.</span><span class="token function-variable function">isEmptyObject</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name
    <span class="token keyword">for</span> <span class="token punctuation">(</span>name <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>

  $<span class="token punctuation">.</span><span class="token function-variable function">inArray</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elem<span class="token punctuation">,</span> array<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> emptyArray<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> elem<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  $<span class="token punctuation">.</span>camelCase <span class="token operator">=</span> camelize
  $<span class="token punctuation">.</span><span class="token function-variable function">trim</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> str <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// plugin compatibility</span>
  $<span class="token punctuation">.</span>uuid <span class="token operator">=</span> <span class="token number">0</span>
  $<span class="token punctuation">.</span>support <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  $<span class="token punctuation">.</span>expr <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

  <span class="token comment">// é‡æ–°ç»„ç»‡ elements å¯¹è±¡ï¼ˆæ•°ç»„ã€å¯¹è±¡æˆ–è€…å¯¹è±¡æ•°ç»„ï¼‰ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½ç”¨ callback è¿›è¡Œæ£€éªŒ</span>
  <span class="token comment">// æ£€éªŒé€šè¿‡åï¼Œå°†å…ƒç´ pushè¿›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¹¶è¿”å›</span>
  $<span class="token punctuation">.</span><span class="token function-variable function">map</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elements<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> value<span class="token punctuation">,</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> key

    <span class="token comment">// æ•°ç»„ï¼Œæˆ–è€…å¯¹è±¡æ•°ç»„</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">likeArray</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// éå†ï¼Œç»è¿‡ callback éªŒè¯ï¼Œpushåˆ°ç»“æœä¸­</span>
        value <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

    <span class="token comment">// å¯¹è±¡</span>
    <span class="token keyword">else</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// éå†ï¼Œç»è¿‡ callback éªŒè¯ï¼Œpushåˆ°ç»“æœä¸­</span>
        value <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>elements<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

    <span class="token comment">// è¿”å›æ•°ç»„</span>
    <span class="token comment">// flatten å‡½æ•°ä¸Šæ–‡å®šä¹‰çš„ï¼Œä½œç”¨ï¼šæ— è®º values æ˜¯å¦æ˜¯æ•°ç»„ï¼Œéƒ½å°†è¿”å›ä¸€ä¸ªæ­£ç¡®çš„æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œä¼ å…¥ 'abc' ï¼Œè¿”å› ['abc']</span>
    <span class="token keyword">return</span> <span class="token function">flatten</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// éå† elements æ‰€æœ‰å…ƒç´ ï¼ˆæ•°ç»„ã€å¯¹è±¡æ•°ç»„ã€å¯¹è±¡ï¼‰ï¼Œæ‰§è¡Œ callback æ–¹æ³•ï¼Œæœ€ç»ˆè¿˜æ˜¯è¿”å› elements</span>
  <span class="token comment">// æ³¨æ„1ï¼šcallback.call(elements[i], i, elements[i]) å‡½æ•°æ‰§è¡Œçš„ç¯å¢ƒå’Œå‚æ•°</span>
  <span class="token comment">// æ³¨æ„2ï¼š=== false) return elements ä¸€æ—¦æœ‰å‡½æ•°è¿”å› falseï¼Œå³è·³å‡ºå¾ªç¯ï¼Œç±»ä¼¼ break</span>
  <span class="token comment">// æ³¨æ„3ï¼šæ— è®ºå“ªç§æƒ…å†µï¼Œæœ€ç»ˆè¿”å›çš„è¿˜æ˜¯ elements</span>
  $<span class="token punctuation">.</span><span class="token function-variable function">each</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elements<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> i<span class="token punctuation">,</span> key
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">likeArray</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">return</span> elements
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> elements<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elements<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> elements<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">return</span> elements
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> elements
  <span class="token punctuation">}</span>

  <span class="token comment">// ä¸Šæ–‡å®šä¹‰ï¼šfilter = emptyArray.filter</span>
  <span class="token comment">// ç­›é€‰æ•°ç»„</span>
  $<span class="token punctuation">.</span><span class="token function-variable function">grep</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">elements<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">filter</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token constant">JSON</span><span class="token punctuation">)</span> $<span class="token punctuation">.</span>parseJSON <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span>parse

  <span class="token comment">// Populate the class2type map</span>
  $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token string">&quot;Boolean Number String Function Array Date RegExp Object Error&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    class2type<span class="token punctuation">[</span> <span class="token string">&quot;[object &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span> <span class="token punctuation">]</span> <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">/*
      ä¸Šæ–‡å°† class2type èµ‹å€¼ä¸º {}
      æœ€ç»ˆå°† class2type èµ‹å€¼ä¸ºï¼š
      {
        '[object boolean]': 'boolean',
        '[object number]': 'number',
        '[object string]': 'string',
        ...
      }

      å­˜å‚¨è¿™ä¸ªæ•°æ®æ˜¯ä¸ºäº†æ–¹ä¾¿çš„è·å–ä¸€äº›å¯¹è±¡çš„ç±»å‹ï¼Œ
      ä¾‹å¦‚ Object.prototype.toString.call([]) è¿”å›çš„æ˜¯ '[Object Array]'
      é‚£ä¹ˆå³å¯æ ¹æ®è¿™ä¸ªè·å– [] çš„ç±»å‹æ˜¯ 'array'
    */</span>
    
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Define methods that will be available on all</span>
  <span class="token comment">// Zepto collections</span>
  $<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token punctuation">{</span>

    <span class="token comment">// ä¸ºä½•è¦è¿™ä¹ˆå¤šæ•°ç»„çš„æ–¹æ³•ï¼Ÿ</span>
    <span class="token comment">// å› ä¸ºä¸€ä¸ª zepto å¯¹è±¡ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°ç»„</span>

    <span class="token comment">// Because a collection acts like an array</span>
    <span class="token comment">// copy over these useful array functions.</span>
    forEach<span class="token punctuation">:</span> emptyArray<span class="token punctuation">.</span>forEach<span class="token punctuation">,</span>
    reduce<span class="token punctuation">:</span> emptyArray<span class="token punctuation">.</span>reduce<span class="token punctuation">,</span>  <span class="token comment">// æ–¹æ³•ä½•ç”¨ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span>
    push<span class="token punctuation">:</span> emptyArray<span class="token punctuation">.</span>push<span class="token punctuation">,</span>
    sort<span class="token punctuation">:</span> emptyArray<span class="token punctuation">.</span>sort<span class="token punctuation">,</span>
    indexOf<span class="token punctuation">:</span> emptyArray<span class="token punctuation">.</span>indexOf<span class="token punctuation">,</span>
    concat<span class="token punctuation">:</span> emptyArray<span class="token punctuation">.</span>concat<span class="token punctuation">,</span>

    <span class="token comment">// `map` and `slice` in the jQuery API work differently</span>
    <span class="token comment">// from their array counterparts</span>
    <span class="token function-variable function">map</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// $.map ä¸Šæ–‡å®šä¹‰çš„ï¼Œ $.map = function (elements, callback) {....}</span>
      <span class="token comment">// $.map ä½œç”¨ï¼šé’ˆå¯¹ elementsï¼ˆå¯¹è±¡ã€å¯¹è±¡æ•°ç»„æˆ–æ•°ç»„ï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½ç»è¿‡ callback å‡½æ•°çš„è¿‡æ»¤ï¼Œå¹¶å°†è¿‡æ»¤é€šè¿‡çš„å…ƒç´ ï¼Œpushåˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œè¿”å›æ–°æ•°ç»„</span>

      <span class="token comment">// æœ€åï¼Œç”¨ $ å°è£…è¿”å›</span>
      <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span>
        <span class="token comment">// $.map è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„</span>
        $<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> 
          <span class="token comment">// é’ˆå¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½æ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå¦‚æœå‡½æ•°è¿”å›çš„ !=null å°±å°†æ’å…¥åˆ°æ–°è¿”å›çš„æ•°ç»„</span>
          <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> i<span class="token punctuation">,</span> el<span class="token punctuation">)</span> <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">)</span>

      <span class="token comment">/*
        $('div').map(function(key, value){
          return value.id;
          // æˆ–è€… return this.id;
        })
        è¿™ä¸ªç»“æœå°±æ˜¯ $(['div1', 'div2' ...])
      */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">slice</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// ç›´æ¥æ•°ç»„çš„sliceæ–¹æ³•ï¼Œå¹¶å°†ç»“æœç”¨ $ å°è£…è¿”å›</span>
      <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// åœ¨ zepto.init å‡½æ•°ä¸­ï¼Œå½“ä¼ å…¥çš„å‡½æ•°æ˜¯å‡½æ•°æ—¶ï¼Œå°±ç”¨åˆ°äº† ready </span>
    <span class="token comment">// else if (isFunction(selector)) return $(document).ready(selector)</span>
    <span class="token function-variable function">ready</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// need to check if document.body exists for IE as that browser reports</span>
      <span class="token comment">// document ready when it hasn't yet created the body element</span>

      <span class="token comment">// ä¸‹æ–‡å®šä¹‰ï¼šreadyRE = /complete|loaded|interactive/,</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>readyRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token function">callback</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span>
      <span class="token keyword">else</span> document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token function">callback</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

      <span class="token comment">// è¿”å›å½“å‰å¯¹è±¡</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> idx <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> 
             <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token comment">// æœªä¼ å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€æ•´ä¸ªæ•°ç»„</span>
             <span class="token comment">// æœ‰å‚æ•°ï¼Œåˆ™è¯•å›¾è¿”å›å•ä¸ªå…ƒç´ ï¼ˆå¤§äº0ï¼Œå°äº0 ä¸¤ç§æƒ…å†µï¼‰</span>
             <span class="token keyword">this</span><span class="token punctuation">[</span>
                idx <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">?</span> 
                idx <span class="token punctuation">:</span> 
                idx <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length
            <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// å°†zeptoé›†åˆå˜ä¸ºçº¯æ•°ç»„</span>
    <span class="token function-variable function">toArray</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">size</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// å°†å…ƒç´ ä»è¿™ä¸ªDOMæ ‘ä¸­ç§»é™¤</span>
    <span class="token function-variable function">remove</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parentNode <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">each</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// [].every ES5ä¸­Arrayçš„æ–°ç‰¹æ€§ã€‚å¾ªç¯æ•°ç»„æ¯ä¸ªå…ƒç´ ï¼Œè¿”å›æ˜¯å¦ç¬¦åˆcallbackå‡½æ•°çš„è¦æ±‚</span>

      <span class="token comment">// every å‡½æ•°è¿”å›çš„æ˜¯ false æˆ–è€… trueï¼ˆä¸è¿‡è¿™é‡Œè¿”å›ä»€ä¹ˆæ— æ‰€è°“ï¼Œæ‰§è¡Œå°±å¯ä»¥äº†ï¼‰</span>
      emptyArray<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> el<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// æœ€åè¿”å›æœ¬èº«å¯¹è±¡</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">filter</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// notå‡½æ•°ä¸‹æ–‡å®šä¹‰</span>
      <span class="token comment">// å¦‚æœç»™notä¼ å…¥çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œåˆ™è¿”å›ä¸ç¬¦åˆè¿™ä¸ªå‡½æ•°è§„åˆ™çš„å…ƒç´ çš„æ•°ç»„ï¼ˆç”¨ $ å°è£…ï¼‰</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token comment">// ä¸Šæ–‡å®šä¹‰ï¼šzepto.matches åˆ¤æ–­elementsæ˜¯å¦ç¬¦åˆ selector çš„è¦æ±‚</span>
      <span class="token comment">// zepto.matches = function(element, selector) {...}</span>
      <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token function">filter</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// åˆ©ç”¨ [].filter æ–¹æ³•åšç­›é€‰ï¼Œåˆ©ç”¨ zepto.matches åšåˆ¤æ–­</span>
        <span class="token keyword">return</span> zepto<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> selector<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// $('div') å¯èƒ½åªæœ‰ä¸‰ä¸ª div èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ $('div').add('p') å†ä¸‰ä¸ª div èŠ‚ç‚¹çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸‰ä¸ª p èŠ‚ç‚¹</span>
    <span class="token function-variable function">add</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span>context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// uniqå‡½æ•°â€”â€”æ•°ç»„å»é‡ï¼Œä¾‹å¦‚ï¼šç”¨æ¥å°† [1,1,2,2,3,3] æ›¿æ¢ä¸º [1,2,3]</span>
      <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token function">uniq</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">is</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// æ³¨æ„ï¼šè¿™é‡Œåªå¯¹ this[0] ç¬¬ä¸€ä¸ªå…ƒç´ åšåˆ¤æ–­äº†ï¼Œå…¶ä»–çš„å…ƒç´ ä¸ç®¡äº†</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> zepto<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> selector<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">not</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> nodes<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// å­˜å‚¨æœ€åè¿”å›çš„ç»“æœ</span>

      <span class="token comment">// å¦‚æœå‚æ•°æ˜¯å‡½æ•°</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFunction</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> selector<span class="token punctuation">.</span>call <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">// éå†å¯¹è±¡çš„æ‰€æœ‰å…ƒç´ ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½æ‰§è¡Œä¼ å…¥çš„å‡½æ•°</span>
          <span class="token comment">// å½“å‡½æ•°è¿”å› false æ—¶ï¼ˆå³ä¸ç¬¦åˆå‡½æ•°çš„è§„åˆ™ï¼‰ï¼Œåˆ™å°†å½“å‰å…ƒç´ pushåˆ°ç»“æœä¸­ï¼Œç­‰å¾…è¿”å›</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">selector</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>idx<span class="token punctuation">)</span><span class="token punctuation">)</span> nodes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// å¦‚æœå‚æ•°ä¸æ˜¯å‡½æ•°</span>
      <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¸º excludes èµ‹å€¼</span>
        <span class="token keyword">var</span> excludes <span class="token operator">=</span> 
          <span class="token comment">// å¦‚æœ selector æ˜¯å­—ç¬¦ä¸²ï¼ˆcssé€‰æ‹©å™¨ï¼‰ï¼Œåˆ™ç”¨filterè¿‡æ»¤ï¼Œå°†ç»“æœå­˜å‚¨åˆ° excludes ä¸­</span>
          <span class="token keyword">typeof</span> selector <span class="token operator">==</span> <span class="token string">'string'</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token punctuation">:</span>
          <span class="token comment">// å¦‚æœ selector ä¸æ˜¯å­—ç¬¦ä¸²</span>
          <span class="token comment">// å¦‚æœæ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡æ•°ç»„ï¼ˆå¹¶ä¸” selector.item æ˜¯å‡½æ•°ï¼Ÿï¼Ÿï¼Ÿï¼‰ï¼Œåˆ™ç”Ÿæˆæ•°ç»„ï¼Œèµ‹å€¼ç»™ excludes</span>
          <span class="token punctuation">(</span><span class="token function">likeArray</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>selector<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> 
          <span class="token comment">// å¦åˆ™ç›´æ¥ç”Ÿæˆ zepto å¯¹è±¡ï¼Œèµ‹å€¼ç»™ excludes</span>
            <span class="token punctuation">:</span> <span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>

        <span class="token comment">// è‡³æ­¤ï¼Œexcludes ä¸­å°±å­˜å‚¨äº†é€šè¿‡ selector æŸ¥æ‰¾å‡ºæ¥çš„å…ƒç´ </span>

        <span class="token comment">// [].forEach æ˜¯ES5çš„æ–°ç‰¹æ€§</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">// å–å‡º excludes ä¸­ä¸åŒ…å«çš„å…ƒç´ ï¼Œpushåˆ°ç»“æœä¸­</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>excludes<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> nodes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// è¿”å›æœ€åçš„ç»“æœï¼Œç”¨ $ å°è£…</span>
      <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function-variable function">has</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// ç»è¿‡ filter å‡½æ•°å¤„ç†ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¤„ç†åçš„å€¼</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">isObject</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span> <span class="token operator">?</span>
          <span class="token comment">// å¦‚æœ seletor æ˜¯ objectï¼ˆå¯èƒ½æ˜¯elemèŠ‚ç‚¹ï¼‰ï¼Œåˆ™ç”¨ $.contains åˆ¤æ–­</span>
          $<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> selector<span class="token punctuation">)</span> <span class="token punctuation">:</span>
          <span class="token comment">// å¦åˆ™ï¼ˆselectoræ˜¯cssé€‰æ‹©å­—ç¬¦ä¸²ï¼‰åˆ™è¿”å›findåçš„sizeï¼ˆå¦‚æœ size === 0 å³ç›¸å½“äºè¿”å› falseï¼‰</span>
          <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

          <span class="token comment">// $.fn.find åœ¨ä¸‹æ–‡å®šä¹‰</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">eq</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// å–å‡ºæŒ‡å®šindexçš„å…ƒç´ </span>
      <span class="token comment">// å¯æ”¯æŒ -1ã€0ã€1ã€2 â€¦â€¦</span>
      <span class="token keyword">return</span> idx <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>idx<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token operator">+</span> idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">first</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> el <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token comment">// ä¸æ˜¯ object åˆ™ç›´æ¥è¿”å›</span>
      <span class="token comment">// æ˜¯ object ç±»å‹ï¼Œåˆ™ç”¨ $ å°è£… ï¼ˆå› ä¸ºæ—¶åˆ»éƒ½è¦æ”¯æŒé“¾å¼æ“ä½œï¼ï¼ï¼ï¼‰</span>
      <span class="token keyword">return</span> el <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token operator">?</span> el <span class="token punctuation">:</span> <span class="token function">$</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">last</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> el <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
      <span class="token keyword">return</span> el <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token operator">?</span> el <span class="token punctuation">:</span> <span class="token function">$</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">find</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// result å­˜å‚¨è¿”å›ç»“æœ</span>
      <span class="token keyword">var</span> result<span class="token punctuation">,</span> $<span class="token keyword">this</span> <span class="token operator">=</span> <span class="token keyword">this</span>

      <span class="token comment">// å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªç©ºçš„ zepto å¯¹è±¡</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>selector<span class="token punctuation">)</span> result <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token comment">// å¦‚æœselectoræ˜¯å¯¹è±¡</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">==</span> <span class="token string">'object'</span><span class="token punctuation">)</span>
        result <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">var</span> node <span class="token operator">=</span> <span class="token keyword">this</span>
          <span class="token keyword">return</span> emptyArray<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>$<span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">parent</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> $<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> node<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// å¦‚æœ selector ä¸æ˜¯å¯¹è±¡ï¼ˆå³æ˜¯cssé€‰æ‹©å™¨ï¼‰ï¼š</span>

      <span class="token comment">// å¦‚æœåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä½¿ç”¨ qsa åˆ¤æ–­ï¼Œç»“æœç»è¿‡ $ å°è£…åèµ‹å€¼ç»™ result</span>
      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> result <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>zepto<span class="token punctuation">.</span><span class="token function">qsa</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> selector<span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token comment">// å¦‚æœæœ‰å¤šä¸ªå…ƒç´ ï¼Œåˆ™ä½¿ç”¨ map éå†æ‰€æœ‰å…ƒç´ ï¼Œä½¿ç”¨ qsa é’ˆå¯¹æ¯ä¸ªå…ƒç´ åˆ¤æ–­ï¼Œç¬¦åˆæ¡ä»¶å³è¿”å›ï¼ˆmapå°†è¿”å›åŒ…å«ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„æ–°æ•°ç»„ï¼Œå¹¶ $ å°è£…ï¼Œæ”¯æŒé“¾å¼æ“ä½œï¼ï¼ï¼‰</span>
      <span class="token keyword">else</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> zepto<span class="token punctuation">.</span><span class="token function">qsa</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> selector<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      
      <span class="token comment">// è¿”å›æœ€ç»ˆç»“æœ</span>
      <span class="token keyword">return</span> result
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// ä»å…ƒç´ æœ¬èº«å¼€å§‹ï¼Œé€çº§å‘ä¸Šçº§å…ƒç´ åŒ¹é…ï¼Œå¹¶è¿”å›æœ€å…ˆåŒ¹é…selectorçš„å…ƒç´ </span>
    <span class="token function-variable function">closest</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> collection <span class="token operator">=</span> <span class="token boolean">false</span>

      <span class="token comment">// å¦‚æœ selector æ˜¯å¯¹è±¡ï¼Œåˆ™ç”¨ $ å°è£…åï¼Œèµ‹å€¼ç»™ collection</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> selector <span class="token operator">==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> collection <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>

      <span class="token keyword">while</span> <span class="token punctuation">(</span>
        <span class="token comment">// whileå¾ªç¯çš„åˆ¤æ–­æ¡ä»¶ï¼š</span>
        <span class="token comment">// ç¬¬ä¸€ï¼Œnodeæœ‰å€¼ï¼ˆnodeä¸€å¼€å§‹è¢«èµ‹å€¼ä¸ºå¯¹è±¡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰</span>
        <span class="token comment">// ç¬¬äºŒï¼Œcollectionæœ‰å€¼ï¼ˆä¼ å…¥çš„selectoræ˜¯å¯¹è±¡ï¼‰åˆ™collectionåŒ…å«nodeï¼›collectionæ— å€¼ï¼ˆä¼ å…¥çš„selectoræ˜¯å­—ç¬¦ä¸²ï¼Œcssé€‰æ‹©ï¼‰ï¼Œåˆ™nodeæ»¡è¶³selectoræ¡ä»¶</span>
        <span class="token comment">// æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œä¸æ»¡è¶³ç¬¬äºŒæ¡ä»¶ï¼Œåˆ™å¾ªç¯ç»§ç»­ï¼ˆnodeè¯•å›¾èµ‹å€¼ä¸ºnode.parentNodeï¼‰ï¼›å¦åˆ™ï¼Œå¾ªç¯è·³å‡ºï¼ˆè¯´æ˜å·²ç»æ‰¾åˆ°äº†ç¬¦åˆæ¡ä»¶çš„çˆ¶èŠ‚ç‚¹ï¼‰</span>
        node <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>
                    collection <span class="token operator">?</span> collection<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">:</span> zepto<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> selector<span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
        <span class="token comment">// nodeèµ‹å€¼æˆ node.parentNode</span>
        <span class="token comment">// å‰ææ¡ä»¶æ˜¯ï¼šnode != context &amp;&amp; node ä¸æ˜¯ documentï¼Œå¦‚æœæ˜¯è¿™ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼Œé‚£å°±ä¸ç»§ç»­èµ‹å€¼</span>
        node <span class="token operator">=</span> node <span class="token operator">!==</span> context <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isDocument</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>parentNode
      
      <span class="token comment">// è¿”å›æœ€ç»ˆç»“æœ</span>
      <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// è·å–å¯¹è±¡é›†åˆæ¯ä¸ªå…ƒç´ æ‰€æœ‰çš„ç¥–å…ˆå…ƒç´ ã€‚ $('h1').parents() =&gt; [&lt;div#container&gt;, &lt;body&gt;, &lt;html&gt;]</span>
    <span class="token function-variable function">parents</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> ancestors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nodes <span class="token operator">=</span> <span class="token keyword">this</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>nodes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token comment">// å¯èƒ½éœ€è¦æ‰§è¡Œå¤šæ¬¡ while å¾ªç¯</span>
        <span class="token comment">// æ¯æ¬¡æ‰§è¡Œ $.map å‡½æ•°éƒ½ä¼šå¯¹ nodes é‡æ–°èµ‹å€¼ï¼Œç„¶åå†åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­å¾ªç¯</span>
        <span class="token comment">// å› ä¸ºè¦è·å–æ¯ä¸ªå…ƒç´ çš„æ‰€æœ‰ç¥–å…ˆå…ƒç´ ï¼Œæ‰€ä»¥è¦å¤šæ¬¡å¾ªç¯</span>
        nodes <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">// ä½¿ç”¨ $.mapï¼ˆè¿”å›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„æ–°æ•°ç»„ï¼Œå¹¶ç”¨ $ å°è£…ï¼‰éå†æ‰€æœ‰å…ƒç´ </span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>node <span class="token operator">=</span> node<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isDocument</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> ancestors<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// å°†ç¬¦åˆæ¡ä»¶çš„å…ƒç´ pushåˆ°ç»“æœä¸­</span>
            <span class="token comment">// æ¡ä»¶ï¼šä¸èƒ½æ˜¯ documentï¼Œç»“æœä¸­å…ƒç´ ä¸èƒ½é‡å¤ã€‚å¦åˆ™ä¸æ‰§è¡Œpush</span>
            ancestors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>

            <span class="token comment">// è¿”å›çš„ node ï¼Œå°†æ‹¼æ¥å‡ºæ–°æ•°ç»„ï¼Œé‡æ–°å¤åˆ¶ç»™ nodesï¼Œç„¶åè¯•å›¾ç»§ç»­æ‰§è¡Œ while å¾ªç¯</span>
            <span class="token keyword">return</span> node
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// å¦‚æœcssé€‰æ‹©å™¨å‚æ•°ç»™å‡ºï¼Œè¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ </span>
      <span class="token keyword">return</span> <span class="token function">filtered</span><span class="token punctuation">(</span>ancestors<span class="token punctuation">,</span> selector<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// è·å–å¯¹è±¡é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„ç›´æ¥çˆ¶å…ƒç´ ã€‚å¦‚æœcssé€‰æ‹©å™¨å‚æ•°ç»™å‡ºã€‚è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ ã€‚</span>
    <span class="token function-variable function">parent</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// pluck å‡½æ•°åœ¨ä¸‹æ–‡å®šä¹‰</span>
      <span class="token comment">// parent å‡½æ•°ï¼Œåªè·å–ç¬¬ä¸€çº§çˆ¶èŠ‚ç‚¹å³å¯</span>
      <span class="token keyword">return</span> <span class="token function">filtered</span><span class="token punctuation">(</span><span class="token function">uniq</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string">'parentNode'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> selector<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// è·å¾—æ¯ä¸ªåŒ¹é…å…ƒç´ é›†åˆå…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼Œå¯é€šè¿‡ selector è¿‡æ»¤</span>
    <span class="token function-variable function">children</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">filtered</span><span class="token punctuation">(</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">children</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  selector
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// è·å¾—æ¯ä¸ªåŒ¹é…å…ƒç´ é›†åˆå…ƒç´ çš„å­å…ƒç´ ï¼ŒåŒ…æ‹¬æ–‡å­—å’Œæ³¨é‡ŠèŠ‚ç‚¹</span>
    <span class="token function-variable function">contents</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// è·å–å¯¹è±¡é›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œå¯é€šè¿‡ selector è¿‡æ»¤</span>
    <span class="token function-variable function">siblings</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">filtered</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> el</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// è·å–å…„å¼ŸèŠ‚ç‚¹</span>
        <span class="token keyword">return</span> <span class="token function">filter</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">children</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> child<span class="token operator">!==</span>el <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> selector<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">empty</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// `pluck` is borrowed from Prototype.js</span>
    <span class="token function-variable function">pluck</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">property</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// è·å–è‡ªå®šä¹‰å±æ€§ï¼Œè¿”å›å€¼ï¼Œæ‹¼æ¥æ•°ç»„</span>
      <span class="token keyword">return</span> $<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> el<span class="token punctuation">[</span>property<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">show</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// è¿”å›å½“å‰å¯¹è±¡ï¼Œä¿è¯å¯é“¾å¼æ“ä½œ</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
        <span class="token comment">// ç¬¬ä¸€æ­¥ï¼Œé’ˆå¯¹å†…è”æ ·å¼ï¼Œå°† none æ”¹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¦‚ &lt;p id=&quot;p2&quot; style=&quot;display:none;&quot;&gt;p2&lt;/p&gt;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">==</span> <span class="token string">&quot;none&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">)</span>

        <span class="token comment">// ç¬¬äºŒæ­¥ï¼Œé’ˆå¯¹cssæ ·å¼ï¼Œå¦‚æœæ˜¯ none åˆ™ä¿®æ”¹ä¸ºé»˜è®¤çš„æ˜¾ç¤ºæ ·å¼</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">&quot;display&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token function">defaultDisplay</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span>

        <span class="token comment">// show æ–¹æ³•æ˜¯ä¸ºäº†æ˜¾ç¤ºå¯¹è±¡ï¼Œè€Œå¯¹è±¡éšè—çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šå†…è”æ ·å¼ æˆ– cssæ ·å¼</span>
        <span class="token comment">// this.style.display åªèƒ½è·å–å†…è”æ ·å¼çš„å€¼ï¼ˆè·å–å±æ€§å€¼ï¼‰</span>
        <span class="token comment">// getComputedStyle(this, '').getPropertyValue(&quot;display&quot;) å¯ä»¥è·å–å†…è”ã€cssæ ·å¼çš„å€¼ï¼ˆè·å– renderTree çš„å€¼ï¼‰</span>
        <span class="token comment">// å› æ­¤ï¼Œè¿™ä¸¤æ­¥éƒ½è¦åšåˆ¤æ–­ï¼Œ</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">replaceWith</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newContent</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// å…ˆåœ¨å‰é¢æ’å…¥ï¼Œç„¶åå°†å½“å‰å¯¹è±¡ç§»é™¤</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>newContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">wrap</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">structure</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// æ˜¯å¦æ˜¯å‡½æ•°</span>
      <span class="token keyword">var</span> func <span class="token operator">=</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>structure<span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>func<span class="token punctuation">)</span>
        <span class="token keyword">var</span> dom   <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>structure<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// ä½•æ—¶ç”¨ clone ï¼Ÿ</span>
            <span class="token comment">// ç¬¬ä¸€ï¼Œdom.parentNode è¯´æ˜ dom åœ¨æ–‡æ¡£ç»“æ„ä¸­ï¼Œä¸ clone å°±ä¼šè¢«ç§»åŠ¨</span>
            <span class="token comment">// ç¬¬äºŒï¼Œthis.length &gt; 1 è¯´æ˜å½“å‰å¯¹è±¡æœ‰å¤šä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½è¦æ·»åŠ ï¼Œæ‰€æœ‰è¦clone</span>
            clone <span class="token operator">=</span> dom<span class="token punctuation">.</span>parentNode <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span>

      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// å€Ÿç”¨ wrapAll æ–¹æ³•æ¥åšåŒ…è£…</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span>
          func <span class="token operator">?</span> <span class="token function">structure</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">:</span>
            clone <span class="token operator">?</span> dom<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> dom
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// åœ¨æ‰€æœ‰åŒ¹é…å…ƒç´ å¤–é¢åŒ…ä¸€ä¸ªå•ç‹¬çš„ç»“æ„</span>
    <span class="token function-variable function">wrapAll</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">structure</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å…ˆå°† structure æ’å…¥åˆ°æ–‡æ¡£ç»“æ„</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>structure <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>structure<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">var</span> children
        <span class="token comment">// drill down to the inmost element</span>
        <span class="token comment">// é€šè¿‡å¾ªç¯ï¼Œå°† structure é‡æ–°èµ‹å€¼ä¸ºå½“å‰ structure çš„æœ€æ·±å¤„çš„ä¸€ä¸ªå­å…ƒç´  </span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>children <span class="token operator">=</span> structure<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> structure <span class="token operator">=</span> children<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">// å°†æ‰€æœ‰å­å…ƒç´ éƒ½åŒ…è£¹è¿› structure</span>
        <span class="token function">$</span><span class="token punctuation">(</span>structure<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// è¿”å›å½“å‰å¯¹è±¡</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">wrapInner</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">structure</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// æ˜¯å¦æ˜¯å‡½æ•°</span>
      <span class="token keyword">var</span> func <span class="token operator">=</span> <span class="token function">isFunction</span><span class="token punctuation">(</span>structure<span class="token punctuation">)</span>

      <span class="token comment">// è¿”å›å¯¹è±¡è‡ªèº«ï¼Œä¿è¯é“¾å¼æ“ä½œ</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> contents <span class="token operator">=</span> self<span class="token punctuation">.</span><span class="token function">contents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// æ˜¯å‡½æ•°ï¼Œå³è·å–å‡½æ•°æ‰§è¡Œçš„è¿”å›ç»“æœï¼›å¦åˆ™ç›´æ¥ç”¨ structure å‚æ•°</span>
            dom  <span class="token operator">=</span> func <span class="token operator">?</span> <span class="token function">structure</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">:</span> structure

        <span class="token comment">// å¦‚æœå½“å‰å…ƒç´ æœ‰å†…å®¹ï¼Œåˆ™é€šè¿‡å†…å®¹ wrapAllã€‚æ— å†…å®¹ï¼Œåˆ™ç›´æ¥ç”¨è‡ªèº«çš„ append å¢åŠ </span>
        contents<span class="token punctuation">.</span>length <span class="token operator">?</span> contents<span class="token punctuation">.</span><span class="token function">wrapAll</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span> <span class="token punctuation">:</span> self<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">unwrap</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// é€šè¿‡ this.parent() è·å–æ¯ä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹ï¼ˆé›†åˆï¼‰</span>
      <span class="token comment">// éå†è¿™ä¸ªçˆ¶èŠ‚ç‚¹çš„é›†åˆ</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// å°†å½“å‰çˆ¶èŠ‚ç‚¹æ›¿æ¢ä¸ºå®ƒçš„å­èŠ‚ç‚¹</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// è¿”å›å¯¹è±¡è‡ªèº«ï¼Œä¿è¯é“¾å¼æ“ä½œ</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">clone</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// é€šè¿‡ this.map å¾ªç¯å¯¹è±¡ï¼Œ</span>
      <span class="token comment">// é’ˆå¯¹æ¯ä¸ªå…ƒç´ éƒ½è¿”å›å®ƒçš„clone         è¿™ä¸ª this å’Œå‰é¢çš„ this ä¸ä¸€æ ·</span>
      <span class="token comment">// è¿”å›æ–°æ•°ç»„ï¼ˆç”¨ $ å°è£…ï¼‰</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">hide</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">&quot;display&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// åˆ‡æ¢æ˜¾ç¤ºå’Œéšè—</span>
    <span class="token function-variable function">toggle</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">setting</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">/*
        @setting
        true : å¼ºåˆ¶åˆ‡æ¢ä¸º show
        false : å¼ºåˆ¶åˆ‡æ¢ä¸º hide
      */</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> el <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>

        <span class="token comment">// æ¡ä»¶åˆ¤æ–­ï¼š</span>
        <span class="token comment">// å¦‚æœ setting === undefined åˆ™çœ‹ el.css(&quot;display&quot;) == &quot;none&quot;</span>
        <span class="token comment">// å¦‚æœ setting !== undefined åˆ™çœ‹ !!setting</span>
        <span class="token punctuation">;</span><span class="token punctuation">(</span>setting <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> el<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">&quot;display&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;none&quot;</span> <span class="token punctuation">:</span> setting<span class="token punctuation">)</span> <span class="token operator">?</span> 
        el<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token comment">// å¦‚æœ true åˆ™æ˜¾ç¤º</span>
        el<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¦‚æœ false åˆ™éšè—</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// å€ŸåŠ© previousElementSibling å±æ€§</span>
    <span class="token function-variable function">prev</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string">'previousElementSibling'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>selector <span class="token operator">||</span> <span class="token string">'*'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// å€ŸåŠ© nextElementSibling å±æ€§</span>
    <span class="token function-variable function">next</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string">'nextElementSibling'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>selector <span class="token operator">||</span> <span class="token string">'*'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">html</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> 

        <span class="token comment">// æƒ…å†µ1ï¼šæœ‰å‚æ•°ï¼Œèµ‹å€¼ï¼Œå¹¶è¿”å›è‡ªèº«</span>
        <span class="token number">0</span> <span class="token keyword">in</span> arguments <span class="token operator">?</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">var</span> originHtml <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML
          <span class="token comment">// ä¼ å…¥çš„ html å‚æ•°å…è®¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå…è®¸æ˜¯ä¸€ä¸ªå‡½æ•°</span>
          <span class="token comment">// é€šè¿‡ funcArg å‡½æ•°ï¼š</span>
          <span class="token comment">//  1.å¦‚æœ html æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›html</span>
          <span class="token comment">//  2.å¦‚æœ html æ˜¯å‡½æ•°ï¼Œåˆ™æ‰§è¡Œæ‰§è¡Œå‡½æ•°ï¼ˆä¼ å…¥ idxã€originHtmlï¼‰ï¼Œè¿”å›å‡½æ•°æ‰§è¡Œç»“æœ</span>
          <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span> <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> html<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> originHtml<span class="token punctuation">)</span> <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>

        <span class="token comment">/*
          æ’æ’­ï¼š
          function funcArg(context, arg, idx, payload) {
            return isFunction(arg) ? arg.call(context, idx, payload) : arg
          }
        */</span>

        <span class="token comment">// æƒ…å†µ2ï¼šæ— å‚æ•°ï¼Œå–å€¼</span>
        <span class="token punctuation">(</span><span class="token number">0</span> <span class="token keyword">in</span> <span class="token keyword">this</span> <span class="token operator">?</span> 
          <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML <span class="token punctuation">:</span> <span class="token comment">// ç›´æ¥å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ innerHTML</span>
          <span class="token keyword">null</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">text</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> 

        <span class="token comment">// æƒ…å†µ1ï¼šæœ‰å‚æ•°ï¼Œèµ‹å€¼ï¼Œå¹¶è¿”å›è‡ªèº«</span>
        <span class="token number">0</span> <span class="token keyword">in</span> arguments <span class="token operator">?</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">// funcArgçš„åº”ç”¨ï¼Œå’Œhtmlæ–¹æ³•ä¸­ä¸€æ ·</span>
          <span class="token keyword">var</span> newText <span class="token operator">=</span> <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> newText <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">''</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token operator">+</span>newText
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>

        <span class="token comment">// æƒ…å†µ2ï¼šæ— å‚æ•°ï¼Œå–å€¼</span>
        <span class="token punctuation">(</span><span class="token number">0</span> <span class="token keyword">in</span> <span class="token keyword">this</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span>  <span class="token comment">// ç›´æ¥å€Ÿç”¨ textContent å±æ€§</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">attr</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> result

      <span class="token keyword">return</span> 

        <span class="token comment">// æƒ…å†µ1ï¼šæ— ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯»å–å€¼ï¼ˆè¯»å–å€¼åªèƒ½è¯»å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼‰</span>
        <span class="token punctuation">(</span><span class="token keyword">typeof</span> name <span class="token operator">==</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token keyword">in</span> arguments<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">?</span>
        <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token keyword">undefined</span> <span class="token punctuation">:</span>
          <span class="token comment">/*
            æ³¨é‡Šï¼š
            this[0]æ˜¯ä¸€ä¸ªDOMèŠ‚ç‚¹ï¼Œæœ‰ã€å±æ€§ã€ä¹Ÿæœ‰ã€ç‰¹æ€§ã€
              result = this[0].getAttribute(name) è¯•å›¾è·å– DOMèŠ‚ç‚¹å±æ€§
              name in this[0] åˆ¤æ–­æ˜¯ä¸æ˜¯jså¯¹è±¡çš„å±æ€§
            ç„¶åï¼Œè¯¥è¿”å›å“ªä¸€ä¸ªå°±è¿”å›å“ªä¸€ä¸ª
          */</span>
          <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> name <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> 
          <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token punctuation">:</span> 
          result
        <span class="token punctuation">)</span> <span class="token punctuation">:</span>

        <span class="token comment">// æƒ…å†µ2ï¼šæœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè®¾ç½®å€¼ï¼ˆé’ˆå¯¹æ¯ä¸ªå…ƒç´ è®¾ç½®å€¼ï¼‰</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span>

          <span class="token comment">// ä¼ å…¥çš„å‚æ•°å¯èƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡é›†åˆ</span>
          <span class="token comment">// æ­¤æ—¶ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æ”¾åœ¨ã€æƒ…å†µ1ã€å½“ä¸­ï¼Ÿï¼Ÿï¼Ÿæ­¤æ—¶ï¼Œvalueæ ¹æœ¬æ²¡æœ‰ç”¨å•Šï¼Ÿï¼Ÿï¼Ÿ</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> name<span class="token punctuation">)</span> <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> name<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>

          <span class="token comment">// ä¼ å…¥çš„ä¸æ˜¯å¯¹è±¡ï¼Œå³è®¾ç½®ä¸€ä¸ªå•ä¸€çš„å±æ€§ã€‚</span>
          <span class="token comment">// ä½†æ˜¯ï¼Œè¿™é‡Œçš„ value å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°</span>
          <span class="token comment">// funcArg å³å¤„ç†äº† value æ˜¯å‡½æ•°å’Œéå‡½æ•°çš„ä¸¤ç§æƒ…å†µ</span>
          <span class="token keyword">else</span> <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">removeAttr</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
          <span class="token keyword">this</span><span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>
            <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">attribute</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> attribute<span class="token punctuation">)</span>  <span class="token comment">// å°†å±æ€§è®¾ç½®ä¸ºç©ºï¼ŒsetAttributeä¼šç§»é™¤å±æ€§</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> 
            <span class="token keyword">this</span> <span class="token comment">// æ”¹å‚æ•°å°†æˆä¸º forEach ä¸­å‡½æ•°çš„this</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// è¯»å–ã€è®¾ç½®å±æ€§ï¼ˆjså¯¹è±¡çš„å±æ€§ï¼‰</span>
    <span class="token function-variable function">prop</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// propMap ä¸­å­˜å‚¨çš„ï¼škeyæ˜¯htmlä¸­çš„å±æ€§åç§°ï¼Œvalueæ˜¯jså¯¹è±¡ä¸­çš„å±æ€§åç§°</span>
      <span class="token comment">// ä¾‹å¦‚ï¼Œhtmlä¸­çš„ &quot;class&quot; åœ¨DOMå¯¹è±¡ä¸­ï¼Œå°±éœ€è¦ä½¿ç”¨ &quot;className&quot; è¿™ä¸ªåå­—è¯»å–ï¼ŒåŒç†äºï¼šfor  maxlength  cellspacing ç­‰ç­‰</span>
      name <span class="token operator">=</span> propMap<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> name

      <span class="token comment">/*
        ä¸Šæ–‡å®šä¹‰ï¼š
        propMap = {
          'tabindex': 'tabIndex',
          'readonly': 'readOnly',
          'for': 'htmlFor',
          'class': 'className',
          'maxlength': 'maxLength',
          'cellspacing': 'cellSpacing',
          'cellpadding': 'cellPadding',
          'rowspan': 'rowSpan',
          'colspan': 'colSpan',
          'usemap': 'useMap',
          'frameborder': 'frameBorder',
          'contenteditable': 'contentEditable'
        }
      */</span>
      
      <span class="token keyword">return</span> 

        <span class="token comment">// æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè®¾ç½®å±æ€§</span>
        <span class="token punctuation">(</span><span class="token number">1</span> <span class="token keyword">in</span> arguments<span class="token punctuation">)</span> <span class="token operator">?</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">// è®¾ç½®å±æ€§å€¼ï¼ŒfuncArgå¤„ç†å‡½æ•°æˆ–è€…éå‡½æ•°</span>
          <span class="token keyword">this</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>

        <span class="token comment">// æ— ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯»å–å±æ€§ï¼ˆè¯»å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ï¼‰</span>
        <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// å‰é¢åŠ ä¸Š 'data-' é€šè¿‡ attr è®¾ç½®æˆ–è€…è¯»å–</span>
    <span class="token function-variable function">data</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">/*
        ä¸Šæ–‡å®šä¹‰ï¼š
        capitalRE = /([A-Z])/g,  //å¤§å†™å­—æ¯
      */</span>

      <span class="token comment">//      å‰é¢åŠ ä¸Š 'data-'               å°† 'A' æ›¿æ¢ä¸º '-a'</span>
      <span class="token keyword">var</span> attrName <span class="token operator">=</span> <span class="token string">'data-'</span> <span class="token operator">+</span> name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>capitalRE<span class="token punctuation">,</span> <span class="token string">'-$1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token keyword">in</span> arguments<span class="token punctuation">)</span> <span class="token operator">?</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>attrName<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">:</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span>attrName<span class="token punctuation">)</span>

      <span class="token keyword">return</span> data <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">deserializeValue</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">undefined</span>

      <span class="token comment">/*
        ä¸Šæ–‡å®šä¹‰çš„ï¼ŒdeserializeValue å‡½æ•°çš„ä½œç”¨æ˜¯ï¼š

        // å°†å­—ç¬¦ä¸²å˜æˆå“åº”çš„å¯¹è±¡æˆ–è€…å€¼ï¼Œä¾‹å¦‚æºä»£ç çš„æ³¨é‡Šï¼š
        // &quot;true&quot;  =&gt; true
        // &quot;false&quot; =&gt; false
        // &quot;null&quot;  =&gt; null
        // &quot;42&quot;    =&gt; 42
        // &quot;42.5&quot;  =&gt; 42.5
        // &quot;08&quot;    =&gt; &quot;08&quot;
        // JSON    =&gt; parse if valid
        // String  =&gt; self
      */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">val</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> 

        <span class="token comment">// æœ‰å‚æ•°ï¼Œè®¾ç½®å€¼</span>
        <span class="token number">0</span> <span class="token keyword">in</span> arguments <span class="token operator">?</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">// éå†æ¯ä¸ªå…ƒç´ ï¼Œç›´æ¥å¯¹ value å±æ€§èµ‹å€¼</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>

        <span class="token comment">// æ— å‚æ•°ï¼Œè¯»å–å€¼</span>
        <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
           <span class="token comment">// å¦‚æœå…ƒç´ æ˜¯ &lt;select multiple&gt; å¤šé€‰åˆ—è¡¨</span>
           <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>multiple <span class="token operator">?</span>
           <span class="token comment">// è¿”å›æ‰€æœ‰é€‰ä¸­çš„optionçš„å€¼çš„æ•°ç»„</span>
           <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'option'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selected <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>

                   <span class="token comment">/*
                      ä¸Šæ–‡å®šä¹‰ï¼š
                      pluck: function(property){
                        return $.map(this, function(el){ return el[property] })
                      },
                   */</span>

           <span class="token comment">// å¦‚æœä¸æ˜¯ï¼Œç›´æ¥è·å– value</span>
           <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value
          <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// è·å–ã€è®¾ç½®å…ƒç´ çš„ offset</span>
    <span class="token function-variable function">offset</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">coordinates</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœæœ‰ coordinates å‚æ•°ï¼Œè®¾ç½®åæ ‡å€¼ï¼Œå¹¶è¿”å›å½“å‰å¯¹è±¡</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>coordinates<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> $<span class="token keyword">this</span> <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// æ”¯æŒå‡½æ•°ï¼ˆä¼ å…¥ $this.offset() åšå‚æ•°ï¼‰å’Œéå‡½æ•°</span>
            coords <span class="token operator">=</span> <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> coordinates<span class="token punctuation">,</span> index<span class="token punctuation">,</span> $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// æ‰¾åˆ°æœ€è¿‘çš„ â€œrelativeâ€, â€œabsoluteâ€ or â€œfixedâ€ çš„ç¥–å…ˆå…ƒç´ ï¼Œå¹¶è·å–å®ƒçš„ offset()</span>
            parentOffset <span class="token operator">=</span> $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// left å’Œ top éœ€è¦å»æ‰å®šä½çš„ç¥–å…ˆå…ƒç´ çš„ leftã€top å€¼</span>
            props <span class="token operator">=</span> <span class="token punctuation">{</span>
              top<span class="token punctuation">:</span>  coords<span class="token punctuation">.</span>top  <span class="token operator">-</span> parentOffset<span class="token punctuation">.</span>top<span class="token punctuation">,</span>
              left<span class="token punctuation">:</span> coords<span class="token punctuation">.</span>left <span class="token operator">-</span> parentOffset<span class="token punctuation">.</span>left
            <span class="token punctuation">}</span>

        <span class="token comment">// staticæ—¶ï¼Œè®¾ç½® topã€leftæ˜¯æ— æ•ˆçš„</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>$<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'position'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'static'</span><span class="token punctuation">)</span> props<span class="token punctuation">[</span><span class="token string">'position'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'relative'</span>

        <span class="token comment">// é€šè¿‡ css èµ‹å€¼</span>
        $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// å½“å‰å¯¹è±¡æ˜¯ç©ºï¼Œåˆ™è¿”å› null</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span>

      <span class="token comment">// å¦‚æœæ²¡æœ‰ coordinates å‚æ•°ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ çš„åæ ‡å€¼</span>
      <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">/*
        elem.getBoundingClientRect() è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œ
        åŒ…å«å…ƒç´ çš„ top bottom left right width height çš„å€¼
        ä½†æ˜¯è¿™ä¸ª topã€bottomã€leftã€right æ˜¯ç›¸å¯¹äºæµè§ˆå™¨çª—å£çš„è·ç¦»ï¼Œè€Œä¸æ˜¯é¡µé¢çš„è¾¹ç•Œ
        ï¼ˆæ³¨æ„ï¼Œelem.getBoundingClientRect()åœ¨IEä½ç‰ˆæœ¬æµè§ˆå™¨æœ‰2pxçš„å…¼å®¹é—®é¢˜ï¼‰

        window.pageXOffset å’Œ window.pageYOffset å¯è·å–ç½‘é¡µæ»šåŠ¨çš„è·ç¦»ï¼Œ
        IEä½ç‰ˆæœ¬éœ€è¦ç”¨ document.body.scrollLeft å’Œ document.body.scrollTop å…¼å®¹
      */</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        left<span class="token punctuation">:</span> obj<span class="token punctuation">.</span>left <span class="token operator">+</span> window<span class="token punctuation">.</span>pageXOffset<span class="token punctuation">,</span>
        top<span class="token punctuation">:</span> obj<span class="token punctuation">.</span>top <span class="token operator">+</span> window<span class="token punctuation">.</span>pageYOffset<span class="token punctuation">,</span>
        width<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">,</span>
        height<span class="token punctuation">:</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// è®¾ç½®ã€è·å– css</span>
    <span class="token function-variable function">css</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">property<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

      <span class="token comment">// åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ ·å¼</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> computedStyle<span class="token punctuation">,</span> element <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>element<span class="token punctuation">)</span> <span class="token keyword">return</span>  <span class="token comment">// å¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ æ— å€¼ï¼Œç›´æ¥è¿”å›ã€‚å¦åˆ™ç»§ç»­</span>

        <span class="token comment">// è·å–å…ƒç´ çš„è®¡ç®—åçš„æ ·å¼</span>
        computedStyle <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> property <span class="token operator">==</span> <span class="token string">'string'</span><span class="token punctuation">)</span>
          <span class="token comment">// æƒ…å†µ1ï¼Œå‚æ•°ä¸ºå­—ç¬¦ä¸²å½¢å¼</span>
          <span class="token comment">// å…ˆä»elemå†…è”æ ·å¼è·å–ï¼ˆelement.styleï¼‰ï¼Œæ­¤æ—¶éœ€è¦ camelize(property) è½¬æ¢ï¼Œå¦‚å°† background-color å˜ä¸º backgroundColor</span>
          <span class="token comment">// å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™ä»cssæ ·å¼è·å– computedStyle.getPropertyValue(property) </span>
          <span class="token comment">// ï¼ˆé‡è¦ï¼‰æ³¨é‡Šï¼šelem.style åªèƒ½è·å–å…ƒç´ è®¾ç½®çš„å†…è”æ ·å¼ã€ä¸èƒ½è·å–cssæ ·å¼ï¼›è€Œ getComputedStyle å¯è·å–å†…è”ã€cssæ ·å¼ã€‚</span>
          <span class="token keyword">return</span> element<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token function">camelize</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">||</span> computedStyle<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isArray</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// æƒ…å†µ2ï¼Œå‚æ•°ä¸ºæ•°ç»„å½¢å¼ï¼ˆæ³¨æ„ï¼Œæ­¤æ—¶ isObject æƒ…å†µå°šæœªåˆ¤æ–­ï¼‰</span>
          <span class="token keyword">var</span> props <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
          $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>property<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            props<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token function">camelize</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">||</span> computedStyle<span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span> props  <span class="token comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// å…¶ä»–æƒ…å†µï¼šæœ‰ä¸¤ä¸ªå‚æ•°ã€propertyæ˜¯å¯¹è±¡</span>
      <span class="token keyword">var</span> css <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æƒ…å†µ1ï¼Œproperty æ˜¯å­—ç¬¦ä¸²ï¼Œè®¾ç½®å•ä¸ªæ ·å¼</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value <span class="token operator">&amp;&amp;</span> value <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span>
          <span class="token comment">// å¦‚æœvalueå‚æ•°æ˜¯ '' null undefined åˆ™ç§»é™¤è¿™ä¸ªcssæ ·å¼</span>
          <span class="token comment">// æ³¨ï¼šæ­¤è®¡ç®—åªé€‚ç”¨äºå†…è”æ ·å¼çš„åˆ é™¤ï¼Œå¯¹ css æ ·å¼æ— æ•ˆï¼Œå› ä¸ºå®ƒåªé€šè¿‡ this.style.removeProperty è®¡ç®—ï¼Œè€Œ this.style è·å–ä¸åˆ°cssæ ·å¼</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">removeProperty</span><span class="token punctuation">(</span><span class="token function">dasherize</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span>
          <span class="token comment">// valueæœ‰æ­£å¸¸å€¼ï¼Œå°† css ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦‚ 'font-size:20px'ï¼‰ç­‰å¾…èµ‹å€¼ç»™å†…è”æ ·å¼</span>
          <span class="token comment">// maybeAddPx(property, value) éœ€è¦å¢åŠ  px çš„å¢åŠ ä¸Š</span>
          css <span class="token operator">=</span> <span class="token function">dasherize</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> <span class="token function">maybeAddPx</span><span class="token punctuation">(</span>property<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// æƒ…å†µ2ï¼Œproperty æ˜¯å¯¹è±¡ï¼ˆæ­¤æ—¶å°±ä¸ç®¡ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»€ä¹ˆäº†ï¼Œä¸ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªæ ·å¼</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> property<span class="token punctuation">)</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>property<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> property<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">// å¦‚æœå¯¹è±¡å±æ€§å€¼æ˜¯ '' null undefined åˆ™ç§»é™¤è¿™ä¸ªcssæ ·å¼ï¼ŒåŒç†ï¼Œåªé’ˆå¯¹å†…è”æ ·å¼</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">removeProperty</span><span class="token punctuation">(</span><span class="token function">dasherize</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token keyword">else</span>
            <span class="token comment">// å¦åˆ™ï¼Œç»™ css èµ‹å€¼ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¤šæ ·å¼å±æ€§ç”¨ ; éš”å¼€</span>
            css <span class="token operator">+=</span> <span class="token function">dasherize</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> <span class="token function">maybeAddPx</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> property<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">';'</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// é’ˆå¯¹æ¯ä¸ªå…ƒç´ ï¼Œè®¾ç½®å†…è”æ ·å¼ï¼ˆthis.style.cssTextå¯è·å–ã€è®¾ç½®å†…è”æ ·å¼ï¼‰</span>
      <span class="token comment">// æœ€åè¿”å›è‡ªèº«</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">+=</span> <span class="token string">';'</span> <span class="token operator">+</span> css <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">/*
        ä¸Šæ–‡å®šä¹‰ï¼š
        // å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼
        function dasherize(str) {
          return str.replace(/::/g, '/')
                    .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')
                    .replace(/([a-z\d])([A-Z])/g, '$1_$2')
                    .replace(/_/g, '-')
                    .toLowerCase()
        }
      */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// è·å–ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•å€¼ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰ã€‚å½“elemenå‚æ•°æ²¡æœ‰ç»™å‡ºæ—¶ï¼Œè¿”å›å½“å‰å…ƒç´ åœ¨å…„å¼ŸèŠ‚ç‚¹ä¸­çš„ä½ç½®</span>
    <span class="token function-variable function">index</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">/*
        ä¸Šæ–‡å®šä¹‰ï¼š
        $.fn.indexOf: emptyArray.indexOf
      */</span>

      <span class="token comment">// å…¶å® this æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„æœ¬èº«å°±æœ‰ indexOf ï¼Œä¸ºä½•è¿˜è¦ä¸Šæ–‡çš„è¿™ä¸ªèµ‹å€¼å‘¢ï¼Ÿ</span>
      <span class="token comment">// å› ä¸ºä¸Šæ–‡ä¸­ï¼Œthis.__proto__ ä¿®æ”¹äº†ï¼Œä¸æ˜¯ Array.prototype äº†ï¼Œä¹Ÿå°±æ²¡æœ‰ indexOf æ–¹æ³•äº†</span>
      <span class="token comment">// å› æ­¤è¦æ‰‹åŠ¨èµ‹å€¼ï¼Œéœ€è¦å°†æ•°ç»„å¸¸ç”¨çš„æ–¹æ³•åœ¨é‡æ–°èµ‹å€¼ç»™ $.fn.indexOf</span>

      <span class="token keyword">return</span> element <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">hasClass</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token keyword">return</span> emptyArray<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// this å°±æ˜¯ classRE(name) çš„è¿”å›å€¼ï¼ˆè¿”å›ä¸€ä¸ªæ­£åˆ™ï¼‰</span>
        <span class="token comment">// function className(node, value){...} è·å–æˆ–è€…è®¾ç½®elemçš„className</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token function">className</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token function">classRE</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token comment">// array.some(callback,[ thisObject]); åªè¦æ•°ç»„ä¸­ä¸€é¡¹ç¬¦åˆcallbackè¦æ±‚ï¼Œå³è¿”å›true</span>

      <span class="token comment">/*
        // ä¸Šæ–‡å®šä¹‰ classCache = {}
        function classRE(name) {
          return name in classCache ?
                 classCache[name] : 
                 (classCache[name] = new RegExp('(^|\\s)' + name + '(\\s|$)'))

          // classCache å­˜å‚¨çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š
          // {
          //   abc: /(^|\s)abc(\s|$)/,  // èƒ½åŒ¹é… 'abc' æˆ– ' abc ' æˆ– ' abc' æˆ– 'abc '
          //   xyz: /(^|\s)abc(\s|$)/,
          //   ...
          // }
        }
      */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">addClass</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span>

      <span class="token comment">// é’ˆå¯¹æ‰€æœ‰å…ƒç´ éƒ½æ·»åŠ classNameï¼Œæœ€ç»ˆè¿”å›æœ¬èº«</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// è¯´æ˜å½“å‰å…ƒç´ ä¸æ˜¯ DOM node</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'className'</span> <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>

        <span class="token comment">// classList æ˜¯ä¸€å¼€å§‹å°±å®šä¹‰çš„ç©ºå˜é‡</span>
        classList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token comment">// è·å–å…ƒç´ çš„ clasname      // æ”¯æŒä¼ å…¥å‡½æ•°</span>
        <span class="token keyword">var</span> cls <span class="token operator">=</span> <span class="token function">className</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> newName <span class="token operator">=</span> <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> cls<span class="token punctuation">)</span>
        <span class="token comment">// æŠŠè¦èµ‹å€¼çš„å€¼ï¼ŒæŒ‰ç…§ç©ºç™½åˆ†ç»„ï¼Œéå†</span>
        newName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex">/\s+/g</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">klass</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">// æŠŠå½“å‰å…ƒç´ ä¸å­˜åœ¨çš„classï¼Œpushåˆ°classlistä¸­</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span>klass<span class="token punctuation">)</span><span class="token punctuation">)</span> classList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>klass<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token comment">// å¦‚æœclasslistæœ‰æ•°æ®ï¼Œåˆ™ä¸ºå½“å‰å…ƒç´ èµ‹å€¼æœ€æ–°çš„classå€¼ï¼ˆç°æœ‰çš„classnameå’Œæ–°çš„classnameæ‹¼æ¥ï¼‰</span>
        classList<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token function">className</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> cls <span class="token operator">+</span> <span class="token punctuation">(</span>cls <span class="token operator">?</span> <span class="token string">&quot; &quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> classList<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">removeClass</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// é’ˆå¯¹æ‰€æœ‰å…ƒç´ éƒ½ç§»é™¤classNameï¼Œæœ€ç»ˆè¿”å›æœ¬èº«</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// è¯´æ˜å½“å‰å…ƒç´ ä¸æ˜¯ DOM node</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">'className'</span> <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>

        <span class="token comment">// å¦‚æœå‚æ•°ç©ºï¼Œåˆ™ç§»é™¤å…ƒç´ çš„æ‰€æœ‰class</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">className</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>

        <span class="token comment">// è·å–ç°æœ‰çš„classname</span>
        classList <span class="token operator">=</span> <span class="token function">className</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token comment">// ï¼ˆå¯ä»¥ä¼ å…¥å‡½æ•°ï¼‰éå†æ–°çš„classnameå­—ç¬¦ä¸²</span>
        <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> classList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex">/\s+/g</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">klass</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">// classRE(klass) è¿”å›ä¸€ä¸ªæ­£åˆ™ï¼ŒåŒ¹é… 'classname' æˆ– ' classname ' æˆ– ' classname' æˆ– 'classname '</span>
          <span class="token comment">// é’ˆå¯¹ä¼ å…¥çš„classnameå­—ç¬¦ä¸²ï¼Œå¯¹æ¯ä¸ªç¬¦åˆæ¡ä»¶çš„classnameï¼Œéƒ½æ›¿æ¢ä¸º ' 'ï¼ˆå³åˆ é™¤äº†ï¼‰</span>
          classList <span class="token operator">=</span> classList<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token function">classRE</span><span class="token punctuation">(</span>klass<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token comment">// å¯¹æ•´ç†å¥½çš„classnameï¼Œé‡æ–°èµ‹å€¼ç»™å½“å‰å…ƒç´ </span>
        <span class="token function">className</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> classList<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">toggleClass</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> when</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// when å‚æ•°ç›¸å½“äºä¸€ä¸ªæ¡ä»¶ï¼š</span>
      <span class="token comment">// å¦‚æœ when === true åˆ™å•çº¯æ‰§è¡Œ addClass</span>
      <span class="token comment">// å¦‚æœ when === false åˆ™å•çº¯æ‰§è¡Œ removeClass</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//                   name å¯æ¥æ”¶å‡½æ•°ï¼Œå¯ä»¥æ˜¯ç©ºç™½åˆ†å‰²å¼€æ¥çš„å¤šä¸ªclassname</span>
        <span class="token keyword">var</span> $<span class="token keyword">this</span> <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> names <span class="token operator">=</span> <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> <span class="token function">className</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">// ç”¨ç©ºç™½åˆ†å‰²å¼€å¤šä¸ªclass</span>
        names<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex">/\s+/g</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">klass</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">// å¦‚æœæœ‰ when å‚æ•°ï¼Œåˆ™åªé€šè¿‡whenå‚æ•°åˆ¤æ–­ï¼Œtrueåˆ™åªæ‰§è¡ŒaddClassï¼Œfalseåˆ™åªæ‰§è¡ŒremoveClass</span>
          <span class="token comment">// å¦‚æœæ²¡æœ‰ when å‚æ•°ï¼Œåˆ™åˆ¤æ–­å…ƒç´ æœ‰æ²¡æœ‰è¯¥classï¼Œæœ‰åˆ™ç§»é™¤ï¼Œæ²¡æœ‰åˆ™æ·»åŠ </span>
          <span class="token punctuation">(</span>when <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token operator">!</span>$<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span>klass<span class="token punctuation">)</span> <span class="token punctuation">:</span> when<span class="token punctuation">)</span> <span class="token operator">?</span>
            $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span>klass<span class="token punctuation">)</span> <span class="token punctuation">:</span> $<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span>klass<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">scrollTop</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span>

      <span class="token comment">// æ™®é€šelemæœ‰ scrollTop å±æ€§ï¼Œå¯ä»¥è·å–æˆ–è€…è®¾ç½®topå€¼</span>
      <span class="token comment">// windowå¯¹è±¡æ²¡æœ‰ scrollTop å±æ€§ï¼Œé€šè¿‡ pageYOffset è·å–ï¼Œé€šè¿‡ scrollTo() èµ‹å€¼</span>

      <span class="token keyword">var</span> hasScrollTop <span class="token operator">=</span> <span class="token string">'scrollTop'</span> <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token comment">// value æ— å€¼ï¼Œè·å– top</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> hasScrollTop <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollTop <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageYOffset
      <span class="token comment">// value æœ‰å€¼ï¼Œè®¾ç½® top</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>hasScrollTop <span class="token operator">?</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> value <span class="token punctuation">}</span> <span class="token punctuation">:</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scrollX<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>   <span class="token comment">// window.scrollX è·å–æ¨ªå‘æ»šåŠ¨å€¼</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">scrollLeft</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token keyword">var</span> hasScrollLeft <span class="token operator">=</span> <span class="token string">'scrollLeft'</span> <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> hasScrollLeft <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollLeft <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pageXOffset
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>hasScrollLeft <span class="token operator">?</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> value <span class="token punctuation">}</span> <span class="token punctuation">:</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scrollY<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>   <span class="token comment">// window.scrollX è·å–çºµå‘æ»šåŠ¨å€¼</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">position</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span>

      <span class="token keyword">var</span> elem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// Get *real* offsetParent</span>
        offsetParent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offsetParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå®šä½è¿‡çš„ç¥–å…ˆå…ƒç´  â€œrelativeâ€, â€œabsoluteâ€ or â€œfixedâ€</span>
        <span class="token comment">// Get correct offsets</span>
        offset       <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// è·å–è‡ªèº«çš„offset</span>
        parentOffset <span class="token operator">=</span> rootNodeRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">{</span> top<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> left<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token punctuation">:</span> offsetParent<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// è·å–å®šä½ç¥–å…ˆå…ƒç´ çš„offsetï¼ˆ bodyã€htmlç›´æ¥è®¾ç½® top:0;left:0 ï¼‰</span>
      <span class="token comment">// ä¸Šæ–‡å®šä¹‰ï¼š rootNodeRE = /^(?:body|html)$/i,</span>

      <span class="token comment">// å»æ‰å½“å‰å…ƒç´ çš„ margin å®½åº¦</span>
      <span class="token comment">// Subtract element margins</span>
      <span class="token comment">// note: when an element has margin: auto the offsetLeft and marginLeft</span>
      <span class="token comment">// are the same in Safari causing offset.left to incorrectly be 0</span>
      offset<span class="token punctuation">.</span>top  <span class="token operator">-=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> <span class="token function">$</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'margin-top'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span>
      offset<span class="token punctuation">.</span>left <span class="token operator">-=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> <span class="token function">$</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'margin-left'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span>

      <span class="token comment">// å¢åŠ çˆ¶å…ƒç´ çš„ border å®½åº¦</span>
      <span class="token comment">// Add offsetParent borders</span>
      parentOffset<span class="token punctuation">.</span>top  <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> <span class="token function">$</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'border-top-width'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span>
      parentOffset<span class="token punctuation">.</span>left <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span> <span class="token function">$</span><span class="token punctuation">(</span>offsetParent<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'border-left-width'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span>

      <span class="token comment">// Subtract the two offsets</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        top<span class="token punctuation">:</span>  offset<span class="token punctuation">.</span>top  <span class="token operator">-</span> parentOffset<span class="token punctuation">.</span>top<span class="token punctuation">,</span>
        left<span class="token punctuation">:</span> offset<span class="token punctuation">.</span>left <span class="token operator">-</span> parentOffset<span class="token punctuation">.</span>left
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">offsetParent</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// é€šè¿‡ this.map éå†å½“å‰å¯¹è±¡æ‰€æœ‰å…ƒç´ ï¼Œè¿›è¡Œè®¡ç®—ï¼Œç„¶åæ‹¼æ¥æ–°çš„æ•°ç»„ï¼Œå¹¶è¿”å›ã€‚ä¿è¯é“¾å¼æ“ä½œ</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> parent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetParent <span class="token operator">||</span> document<span class="token punctuation">.</span>body  <span class="token comment">// elem.offsetParent å¯è¿”å›æœ€è¿‘çš„æ”¹å…ƒç´ æœ€è¿‘çš„å·²ç»å®šä½çš„çˆ¶å…ƒç´ </span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>rootNodeRE<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">&quot;position&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">)</span>
          <span class="token comment">// å¦‚æœè·å–çš„parentä¸æ˜¯nullã€ä¸æ˜¯bodyæˆ–htmlã€è€Œä¸”position==static</span>
          <span class="token comment">// åˆ™ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ offsetParentã€å¤§ä¸äº†æ‰¾åˆ° body ä¸ºæ­¢</span>
          parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>offsetParent

        <span class="token comment">// æœ€åè¿”å›æ”¹å…ƒç´ </span>
        <span class="token keyword">return</span> parent
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// for now</span>
  $<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>detach <span class="token operator">=</span> $<span class="token punctuation">.</span>fn<span class="token punctuation">.</span>remove

  <span class="token comment">// Generate the `width` and `height` functions</span>
  <span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token string">'height'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dimension</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// å°† width height å˜ä¸º  Width Height</span>
    <span class="token keyword">var</span> dimensionProperty <span class="token operator">=</span>
      dimension<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/./</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

    $<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>dimension<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">var</span> offset<span class="token punctuation">,</span> el <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

      <span class="token comment">// æƒ…å†µ1ï¼Œæ— å‚æ•°ï¼Œè·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">isWindow</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token operator">?</span> el<span class="token punctuation">[</span><span class="token string">'inner'</span> <span class="token operator">+</span> dimensionProperty<span class="token punctuation">]</span> <span class="token punctuation">:</span>  <span class="token comment">// window.innerHeight</span>
        <span class="token function">isDocument</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token operator">?</span> el<span class="token punctuation">.</span>documentElement<span class="token punctuation">[</span><span class="token string">'scroll'</span> <span class="token operator">+</span> dimensionProperty<span class="token punctuation">]</span> <span class="token punctuation">:</span>  <span class="token comment">// document.documentElement.scrollHeight</span>
        <span class="token punctuation">(</span>offset <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> offset<span class="token punctuation">[</span>dimension<span class="token punctuation">]</span>  <span class="token comment">// this.offset().width</span>

      <span class="token comment">// æƒ…å†µ2ï¼Œæœ‰å‚æ•°ï¼Œè®¾ç½®æ‰€æœ‰å…ƒç´ çš„å€¼</span>
      <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">idx</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        el <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token comment">// é€šè¿‡ css() æ–¹æ³•è®¾ç½®ï¼Œæ”¯æŒä¼ å…¥å‡½æ•°</span>
        el<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span>dimension<span class="token punctuation">,</span> <span class="token function">funcArg</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> el<span class="token punctuation">[</span>dimension<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// é’ˆå¯¹å½“å‰å…ƒç´ ã€éå†å­å…ƒç´ ï¼Œéƒ½æ‰§è¡Œ fun å‡½æ•°</span>
  <span class="token keyword">function</span> <span class="token function">traverseNode</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> fun</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fun</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> node<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      <span class="token function">traverseNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> fun<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ä¸Šæ–‡å®šä¹‰ adjacencyOperators = [ 'after', 'prepend', 'before', 'append' ],</span>
  
  <span class="token comment">// Generate the `after`, `prepend`, `before`, `append`,</span>
  <span class="token comment">// `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.</span>
  adjacencyOperators<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">operator<span class="token punctuation">,</span> operatorIndex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> inside <span class="token operator">=</span> operatorIndex <span class="token operator">%</span> <span class="token number">2</span> <span class="token comment">//=&gt; prepend, append</span>

    $<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>operator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// arguments can be nodes, arrays of nodes, Zepto objects and HTML strings</span>
      <span class="token keyword">var</span> argType<span class="token punctuation">,</span> nodes <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            argType <span class="token operator">=</span> <span class="token function">type</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>
            <span class="token keyword">return</span> argType <span class="token operator">==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> argType <span class="token operator">==</span> <span class="token string">&quot;array&quot;</span> <span class="token operator">||</span> arg <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span>
              arg <span class="token punctuation">:</span> zepto<span class="token punctuation">.</span><span class="token function">fragment</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          parent<span class="token punctuation">,</span> copyByClone <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>nodes<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">this</span>

      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        parent <span class="token operator">=</span> inside <span class="token operator">?</span> target <span class="token punctuation">:</span> target<span class="token punctuation">.</span>parentNode

        <span class="token comment">// convert all methods to a &quot;before&quot; operation</span>
        target <span class="token operator">=</span> operatorIndex <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> target<span class="token punctuation">.</span>nextSibling <span class="token punctuation">:</span>
                 operatorIndex <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> target<span class="token punctuation">.</span>firstChild <span class="token punctuation">:</span>
                 operatorIndex <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">?</span> target <span class="token punctuation">:</span>
                 <span class="token keyword">null</span>

        <span class="token keyword">var</span> parentInDocument <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span> parent<span class="token punctuation">)</span>

        nodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>copyByClone<span class="token punctuation">)</span> node <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
          <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>parent<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

          parent<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> target<span class="token punctuation">)</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>parentInDocument<span class="token punctuation">)</span> <span class="token function">traverseNode</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>nodeName <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> el<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'SCRIPT'</span> <span class="token operator">&amp;&amp;</span>
               <span class="token punctuation">(</span><span class="token operator">!</span>el<span class="token punctuation">.</span>type <span class="token operator">||</span> el<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'text/javascript'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>el<span class="token punctuation">.</span>src<span class="token punctuation">)</span>
              window<span class="token punctuation">[</span><span class="token string">'eval'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> el<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// after    =&gt; insertAfter</span>
    <span class="token comment">// prepend  =&gt; prependTo</span>
    <span class="token comment">// before   =&gt; insertBefore</span>
    <span class="token comment">// append   =&gt; appendTo</span>
    $<span class="token punctuation">.</span>fn<span class="token punctuation">[</span>inside <span class="token operator">?</span> operator<span class="token operator">+</span><span class="token string">'To'</span> <span class="token punctuation">:</span> <span class="token string">'insert'</span><span class="token operator">+</span><span class="token punctuation">(</span>operatorIndex <span class="token operator">?</span> <span class="token string">'Before'</span> <span class="token punctuation">:</span> <span class="token string">'After'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">html</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">$</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">[</span>operator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  zepto<span class="token punctuation">.</span><span class="token class-name">Z</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> $<span class="token punctuation">.</span>fn

  <span class="token comment">// Export internal API functions in the `$.zepto` namespace</span>
  zepto<span class="token punctuation">.</span>uniq <span class="token operator">=</span> uniq
  zepto<span class="token punctuation">.</span>deserializeValue <span class="token operator">=</span> deserializeValue
  $<span class="token punctuation">.</span>zepto <span class="token operator">=</span> zepto

  <span class="token keyword">return</span> $
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

window<span class="token punctuation">.</span>Zepto <span class="token operator">=</span> Zepto
window<span class="token punctuation">.</span>$ <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>$ <span class="token operator">=</span> Zepto<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br><span class="line-number">333</span><br><span class="line-number">334</span><br><span class="line-number">335</span><br><span class="line-number">336</span><br><span class="line-number">337</span><br><span class="line-number">338</span><br><span class="line-number">339</span><br><span class="line-number">340</span><br><span class="line-number">341</span><br><span class="line-number">342</span><br><span class="line-number">343</span><br><span class="line-number">344</span><br><span class="line-number">345</span><br><span class="line-number">346</span><br><span class="line-number">347</span><br><span class="line-number">348</span><br><span class="line-number">349</span><br><span class="line-number">350</span><br><span class="line-number">351</span><br><span class="line-number">352</span><br><span class="line-number">353</span><br><span class="line-number">354</span><br><span class="line-number">355</span><br><span class="line-number">356</span><br><span class="line-number">357</span><br><span class="line-number">358</span><br><span class="line-number">359</span><br><span class="line-number">360</span><br><span class="line-number">361</span><br><span class="line-number">362</span><br><span class="line-number">363</span><br><span class="line-number">364</span><br><span class="line-number">365</span><br><span class="line-number">366</span><br><span class="line-number">367</span><br><span class="line-number">368</span><br><span class="line-number">369</span><br><span class="line-number">370</span><br><span class="line-number">371</span><br><span class="line-number">372</span><br><span class="line-number">373</span><br><span class="line-number">374</span><br><span class="line-number">375</span><br><span class="line-number">376</span><br><span class="line-number">377</span><br><span class="line-number">378</span><br><span class="line-number">379</span><br><span class="line-number">380</span><br><span class="line-number">381</span><br><span class="line-number">382</span><br><span class="line-number">383</span><br><span class="line-number">384</span><br><span class="line-number">385</span><br><span class="line-number">386</span><br><span class="line-number">387</span><br><span class="line-number">388</span><br><span class="line-number">389</span><br><span class="line-number">390</span><br><span class="line-number">391</span><br><span class="line-number">392</span><br><span class="line-number">393</span><br><span class="line-number">394</span><br><span class="line-number">395</span><br><span class="line-number">396</span><br><span class="line-number">397</span><br><span class="line-number">398</span><br><span class="line-number">399</span><br><span class="line-number">400</span><br><span class="line-number">401</span><br><span class="line-number">402</span><br><span class="line-number">403</span><br><span class="line-number">404</span><br><span class="line-number">405</span><br><span class="line-number">406</span><br><span class="line-number">407</span><br><span class="line-number">408</span><br><span class="line-number">409</span><br><span class="line-number">410</span><br><span class="line-number">411</span><br><span class="line-number">412</span><br><span class="line-number">413</span><br><span class="line-number">414</span><br><span class="line-number">415</span><br><span class="line-number">416</span><br><span class="line-number">417</span><br><span class="line-number">418</span><br><span class="line-number">419</span><br><span class="line-number">420</span><br><span class="line-number">421</span><br><span class="line-number">422</span><br><span class="line-number">423</span><br><span class="line-number">424</span><br><span class="line-number">425</span><br><span class="line-number">426</span><br><span class="line-number">427</span><br><span class="line-number">428</span><br><span class="line-number">429</span><br><span class="line-number">430</span><br><span class="line-number">431</span><br><span class="line-number">432</span><br><span class="line-number">433</span><br><span class="line-number">434</span><br><span class="line-number">435</span><br><span class="line-number">436</span><br><span class="line-number">437</span><br><span class="line-number">438</span><br><span class="line-number">439</span><br><span class="line-number">440</span><br><span class="line-number">441</span><br><span class="line-number">442</span><br><span class="line-number">443</span><br><span class="line-number">444</span><br><span class="line-number">445</span><br><span class="line-number">446</span><br><span class="line-number">447</span><br><span class="line-number">448</span><br><span class="line-number">449</span><br><span class="line-number">450</span><br><span class="line-number">451</span><br><span class="line-number">452</span><br><span class="line-number">453</span><br><span class="line-number">454</span><br><span class="line-number">455</span><br><span class="line-number">456</span><br><span class="line-number">457</span><br><span class="line-number">458</span><br><span class="line-number">459</span><br><span class="line-number">460</span><br><span class="line-number">461</span><br><span class="line-number">462</span><br><span class="line-number">463</span><br><span class="line-number">464</span><br><span class="line-number">465</span><br><span class="line-number">466</span><br><span class="line-number">467</span><br><span class="line-number">468</span><br><span class="line-number">469</span><br><span class="line-number">470</span><br><span class="line-number">471</span><br><span class="line-number">472</span><br><span class="line-number">473</span><br><span class="line-number">474</span><br><span class="line-number">475</span><br><span class="line-number">476</span><br><span class="line-number">477</span><br><span class="line-number">478</span><br><span class="line-number">479</span><br><span class="line-number">480</span><br><span class="line-number">481</span><br><span class="line-number">482</span><br><span class="line-number">483</span><br><span class="line-number">484</span><br><span class="line-number">485</span><br><span class="line-number">486</span><br><span class="line-number">487</span><br><span class="line-number">488</span><br><span class="line-number">489</span><br><span class="line-number">490</span><br><span class="line-number">491</span><br><span class="line-number">492</span><br><span class="line-number">493</span><br><span class="line-number">494</span><br><span class="line-number">495</span><br><span class="line-number">496</span><br><span class="line-number">497</span><br><span class="line-number">498</span><br><span class="line-number">499</span><br><span class="line-number">500</span><br><span class="line-number">501</span><br><span class="line-number">502</span><br><span class="line-number">503</span><br><span class="line-number">504</span><br><span class="line-number">505</span><br><span class="line-number">506</span><br><span class="line-number">507</span><br><span class="line-number">508</span><br><span class="line-number">509</span><br><span class="line-number">510</span><br><span class="line-number">511</span><br><span class="line-number">512</span><br><span class="line-number">513</span><br><span class="line-number">514</span><br><span class="line-number">515</span><br><span class="line-number">516</span><br><span class="line-number">517</span><br><span class="line-number">518</span><br><span class="line-number">519</span><br><span class="line-number">520</span><br><span class="line-number">521</span><br><span class="line-number">522</span><br><span class="line-number">523</span><br><span class="line-number">524</span><br><span class="line-number">525</span><br><span class="line-number">526</span><br><span class="line-number">527</span><br><span class="line-number">528</span><br><span class="line-number">529</span><br><span class="line-number">530</span><br><span class="line-number">531</span><br><span class="line-number">532</span><br><span class="line-number">533</span><br><span class="line-number">534</span><br><span class="line-number">535</span><br><span class="line-number">536</span><br><span class="line-number">537</span><br><span class="line-number">538</span><br><span class="line-number">539</span><br><span class="line-number">540</span><br><span class="line-number">541</span><br><span class="line-number">542</span><br><span class="line-number">543</span><br><span class="line-number">544</span><br><span class="line-number">545</span><br><span class="line-number">546</span><br><span class="line-number">547</span><br><span class="line-number">548</span><br><span class="line-number">549</span><br><span class="line-number">550</span><br><span class="line-number">551</span><br><span class="line-number">552</span><br><span class="line-number">553</span><br><span class="line-number">554</span><br><span class="line-number">555</span><br><span class="line-number">556</span><br><span class="line-number">557</span><br><span class="line-number">558</span><br><span class="line-number">559</span><br><span class="line-number">560</span><br><span class="line-number">561</span><br><span class="line-number">562</span><br><span class="line-number">563</span><br><span class="line-number">564</span><br><span class="line-number">565</span><br><span class="line-number">566</span><br><span class="line-number">567</span><br><span class="line-number">568</span><br><span class="line-number">569</span><br><span class="line-number">570</span><br><span class="line-number">571</span><br><span class="line-number">572</span><br><span class="line-number">573</span><br><span class="line-number">574</span><br><span class="line-number">575</span><br><span class="line-number">576</span><br><span class="line-number">577</span><br><span class="line-number">578</span><br><span class="line-number">579</span><br><span class="line-number">580</span><br><span class="line-number">581</span><br><span class="line-number">582</span><br><span class="line-number">583</span><br><span class="line-number">584</span><br><span class="line-number">585</span><br><span class="line-number">586</span><br><span class="line-number">587</span><br><span class="line-number">588</span><br><span class="line-number">589</span><br><span class="line-number">590</span><br><span class="line-number">591</span><br><span class="line-number">592</span><br><span class="line-number">593</span><br><span class="line-number">594</span><br><span class="line-number">595</span><br><span class="line-number">596</span><br><span class="line-number">597</span><br><span class="line-number">598</span><br><span class="line-number">599</span><br><span class="line-number">600</span><br><span class="line-number">601</span><br><span class="line-number">602</span><br><span class="line-number">603</span><br><span class="line-number">604</span><br><span class="line-number">605</span><br><span class="line-number">606</span><br><span class="line-number">607</span><br><span class="line-number">608</span><br><span class="line-number">609</span><br><span class="line-number">610</span><br><span class="line-number">611</span><br><span class="line-number">612</span><br><span class="line-number">613</span><br><span class="line-number">614</span><br><span class="line-number">615</span><br><span class="line-number">616</span><br><span class="line-number">617</span><br><span class="line-number">618</span><br><span class="line-number">619</span><br><span class="line-number">620</span><br><span class="line-number">621</span><br><span class="line-number">622</span><br><span class="line-number">623</span><br><span class="line-number">624</span><br><span class="line-number">625</span><br><span class="line-number">626</span><br><span class="line-number">627</span><br><span class="line-number">628</span><br><span class="line-number">629</span><br><span class="line-number">630</span><br><span class="line-number">631</span><br><span class="line-number">632</span><br><span class="line-number">633</span><br><span class="line-number">634</span><br><span class="line-number">635</span><br><span class="line-number">636</span><br><span class="line-number">637</span><br><span class="line-number">638</span><br><span class="line-number">639</span><br><span class="line-number">640</span><br><span class="line-number">641</span><br><span class="line-number">642</span><br><span class="line-number">643</span><br><span class="line-number">644</span><br><span class="line-number">645</span><br><span class="line-number">646</span><br><span class="line-number">647</span><br><span class="line-number">648</span><br><span class="line-number">649</span><br><span class="line-number">650</span><br><span class="line-number">651</span><br><span class="line-number">652</span><br><span class="line-number">653</span><br><span class="line-number">654</span><br><span class="line-number">655</span><br><span class="line-number">656</span><br><span class="line-number">657</span><br><span class="line-number">658</span><br><span class="line-number">659</span><br><span class="line-number">660</span><br><span class="line-number">661</span><br><span class="line-number">662</span><br><span class="line-number">663</span><br><span class="line-number">664</span><br><span class="line-number">665</span><br><span class="line-number">666</span><br><span class="line-number">667</span><br><span class="line-number">668</span><br><span class="line-number">669</span><br><span class="line-number">670</span><br><span class="line-number">671</span><br><span class="line-number">672</span><br><span class="line-number">673</span><br><span class="line-number">674</span><br><span class="line-number">675</span><br><span class="line-number">676</span><br><span class="line-number">677</span><br><span class="line-number">678</span><br><span class="line-number">679</span><br><span class="line-number">680</span><br><span class="line-number">681</span><br><span class="line-number">682</span><br><span class="line-number">683</span><br><span class="line-number">684</span><br><span class="line-number">685</span><br><span class="line-number">686</span><br><span class="line-number">687</span><br><span class="line-number">688</span><br><span class="line-number">689</span><br><span class="line-number">690</span><br><span class="line-number">691</span><br><span class="line-number">692</span><br><span class="line-number">693</span><br><span class="line-number">694</span><br><span class="line-number">695</span><br><span class="line-number">696</span><br><span class="line-number">697</span><br><span class="line-number">698</span><br><span class="line-number">699</span><br><span class="line-number">700</span><br><span class="line-number">701</span><br><span class="line-number">702</span><br><span class="line-number">703</span><br><span class="line-number">704</span><br><span class="line-number">705</span><br><span class="line-number">706</span><br><span class="line-number">707</span><br><span class="line-number">708</span><br><span class="line-number">709</span><br><span class="line-number">710</span><br><span class="line-number">711</span><br><span class="line-number">712</span><br><span class="line-number">713</span><br><span class="line-number">714</span><br><span class="line-number">715</span><br><span class="line-number">716</span><br><span class="line-number">717</span><br><span class="line-number">718</span><br><span class="line-number">719</span><br><span class="line-number">720</span><br><span class="line-number">721</span><br><span class="line-number">722</span><br><span class="line-number">723</span><br><span class="line-number">724</span><br><span class="line-number">725</span><br><span class="line-number">726</span><br><span class="line-number">727</span><br><span class="line-number">728</span><br><span class="line-number">729</span><br><span class="line-number">730</span><br><span class="line-number">731</span><br><span class="line-number">732</span><br><span class="line-number">733</span><br><span class="line-number">734</span><br><span class="line-number">735</span><br><span class="line-number">736</span><br><span class="line-number">737</span><br><span class="line-number">738</span><br><span class="line-number">739</span><br><span class="line-number">740</span><br><span class="line-number">741</span><br><span class="line-number">742</span><br><span class="line-number">743</span><br><span class="line-number">744</span><br><span class="line-number">745</span><br><span class="line-number">746</span><br><span class="line-number">747</span><br><span class="line-number">748</span><br><span class="line-number">749</span><br><span class="line-number">750</span><br><span class="line-number">751</span><br><span class="line-number">752</span><br><span class="line-number">753</span><br><span class="line-number">754</span><br><span class="line-number">755</span><br><span class="line-number">756</span><br><span class="line-number">757</span><br><span class="line-number">758</span><br><span class="line-number">759</span><br><span class="line-number">760</span><br><span class="line-number">761</span><br><span class="line-number">762</span><br><span class="line-number">763</span><br><span class="line-number">764</span><br><span class="line-number">765</span><br><span class="line-number">766</span><br><span class="line-number">767</span><br><span class="line-number">768</span><br><span class="line-number">769</span><br><span class="line-number">770</span><br><span class="line-number">771</span><br><span class="line-number">772</span><br><span class="line-number">773</span><br><span class="line-number">774</span><br><span class="line-number">775</span><br><span class="line-number">776</span><br><span class="line-number">777</span><br><span class="line-number">778</span><br><span class="line-number">779</span><br><span class="line-number">780</span><br><span class="line-number">781</span><br><span class="line-number">782</span><br><span class="line-number">783</span><br><span class="line-number">784</span><br><span class="line-number">785</span><br><span class="line-number">786</span><br><span class="line-number">787</span><br><span class="line-number">788</span><br><span class="line-number">789</span><br><span class="line-number">790</span><br><span class="line-number">791</span><br><span class="line-number">792</span><br><span class="line-number">793</span><br><span class="line-number">794</span><br><span class="line-number">795</span><br><span class="line-number">796</span><br><span class="line-number">797</span><br><span class="line-number">798</span><br><span class="line-number">799</span><br><span class="line-number">800</span><br><span class="line-number">801</span><br><span class="line-number">802</span><br><span class="line-number">803</span><br><span class="line-number">804</span><br><span class="line-number">805</span><br><span class="line-number">806</span><br><span class="line-number">807</span><br><span class="line-number">808</span><br><span class="line-number">809</span><br><span class="line-number">810</span><br><span class="line-number">811</span><br><span class="line-number">812</span><br><span class="line-number">813</span><br><span class="line-number">814</span><br><span class="line-number">815</span><br><span class="line-number">816</span><br><span class="line-number">817</span><br><span class="line-number">818</span><br><span class="line-number">819</span><br><span class="line-number">820</span><br><span class="line-number">821</span><br><span class="line-number">822</span><br><span class="line-number">823</span><br><span class="line-number">824</span><br><span class="line-number">825</span><br><span class="line-number">826</span><br><span class="line-number">827</span><br><span class="line-number">828</span><br><span class="line-number">829</span><br><span class="line-number">830</span><br><span class="line-number">831</span><br><span class="line-number">832</span><br><span class="line-number">833</span><br><span class="line-number">834</span><br><span class="line-number">835</span><br><span class="line-number">836</span><br><span class="line-number">837</span><br><span class="line-number">838</span><br><span class="line-number">839</span><br><span class="line-number">840</span><br><span class="line-number">841</span><br><span class="line-number">842</span><br><span class="line-number">843</span><br><span class="line-number">844</span><br><span class="line-number">845</span><br><span class="line-number">846</span><br><span class="line-number">847</span><br><span class="line-number">848</span><br><span class="line-number">849</span><br><span class="line-number">850</span><br><span class="line-number">851</span><br><span class="line-number">852</span><br><span class="line-number">853</span><br><span class="line-number">854</span><br><span class="line-number">855</span><br><span class="line-number">856</span><br><span class="line-number">857</span><br><span class="line-number">858</span><br><span class="line-number">859</span><br><span class="line-number">860</span><br><span class="line-number">861</span><br><span class="line-number">862</span><br><span class="line-number">863</span><br><span class="line-number">864</span><br><span class="line-number">865</span><br><span class="line-number">866</span><br><span class="line-number">867</span><br><span class="line-number">868</span><br><span class="line-number">869</span><br><span class="line-number">870</span><br><span class="line-number">871</span><br><span class="line-number">872</span><br><span class="line-number">873</span><br><span class="line-number">874</span><br><span class="line-number">875</span><br><span class="line-number">876</span><br><span class="line-number">877</span><br><span class="line-number">878</span><br><span class="line-number">879</span><br><span class="line-number">880</span><br><span class="line-number">881</span><br><span class="line-number">882</span><br><span class="line-number">883</span><br><span class="line-number">884</span><br><span class="line-number">885</span><br><span class="line-number">886</span><br><span class="line-number">887</span><br><span class="line-number">888</span><br><span class="line-number">889</span><br><span class="line-number">890</span><br><span class="line-number">891</span><br><span class="line-number">892</span><br><span class="line-number">893</span><br><span class="line-number">894</span><br><span class="line-number">895</span><br><span class="line-number">896</span><br><span class="line-number">897</span><br><span class="line-number">898</span><br><span class="line-number">899</span><br><span class="line-number">900</span><br><span class="line-number">901</span><br><span class="line-number">902</span><br><span class="line-number">903</span><br><span class="line-number">904</span><br><span class="line-number">905</span><br><span class="line-number">906</span><br><span class="line-number">907</span><br><span class="line-number">908</span><br><span class="line-number">909</span><br><span class="line-number">910</span><br><span class="line-number">911</span><br><span class="line-number">912</span><br><span class="line-number">913</span><br><span class="line-number">914</span><br><span class="line-number">915</span><br><span class="line-number">916</span><br><span class="line-number">917</span><br><span class="line-number">918</span><br><span class="line-number">919</span><br><span class="line-number">920</span><br><span class="line-number">921</span><br><span class="line-number">922</span><br><span class="line-number">923</span><br><span class="line-number">924</span><br><span class="line-number">925</span><br><span class="line-number">926</span><br><span class="line-number">927</span><br><span class="line-number">928</span><br><span class="line-number">929</span><br><span class="line-number">930</span><br><span class="line-number">931</span><br><span class="line-number">932</span><br><span class="line-number">933</span><br><span class="line-number">934</span><br><span class="line-number">935</span><br><span class="line-number">936</span><br><span class="line-number">937</span><br><span class="line-number">938</span><br><span class="line-number">939</span><br><span class="line-number">940</span><br><span class="line-number">941</span><br><span class="line-number">942</span><br><span class="line-number">943</span><br><span class="line-number">944</span><br><span class="line-number">945</span><br><span class="line-number">946</span><br><span class="line-number">947</span><br><span class="line-number">948</span><br><span class="line-number">949</span><br><span class="line-number">950</span><br><span class="line-number">951</span><br><span class="line-number">952</span><br><span class="line-number">953</span><br><span class="line-number">954</span><br><span class="line-number">955</span><br><span class="line-number">956</span><br><span class="line-number">957</span><br><span class="line-number">958</span><br><span class="line-number">959</span><br><span class="line-number">960</span><br><span class="line-number">961</span><br><span class="line-number">962</span><br><span class="line-number">963</span><br><span class="line-number">964</span><br><span class="line-number">965</span><br><span class="line-number">966</span><br><span class="line-number">967</span><br><span class="line-number">968</span><br><span class="line-number">969</span><br><span class="line-number">970</span><br><span class="line-number">971</span><br><span class="line-number">972</span><br><span class="line-number">973</span><br><span class="line-number">974</span><br><span class="line-number">975</span><br><span class="line-number">976</span><br><span class="line-number">977</span><br><span class="line-number">978</span><br><span class="line-number">979</span><br><span class="line-number">980</span><br><span class="line-number">981</span><br><span class="line-number">982</span><br><span class="line-number">983</span><br><span class="line-number">984</span><br><span class="line-number">985</span><br><span class="line-number">986</span><br><span class="line-number">987</span><br><span class="line-number">988</span><br><span class="line-number">989</span><br><span class="line-number">990</span><br><span class="line-number">991</span><br><span class="line-number">992</span><br><span class="line-number">993</span><br><span class="line-number">994</span><br><span class="line-number">995</span><br><span class="line-number">996</span><br><span class="line-number">997</span><br><span class="line-number">998</span><br><span class="line-number">999</span><br><span class="line-number">1000</span><br><span class="line-number">1001</span><br><span class="line-number">1002</span><br><span class="line-number">1003</span><br><span class="line-number">1004</span><br><span class="line-number">1005</span><br><span class="line-number">1006</span><br><span class="line-number">1007</span><br><span class="line-number">1008</span><br><span class="line-number">1009</span><br><span class="line-number">1010</span><br><span class="line-number">1011</span><br><span class="line-number">1012</span><br><span class="line-number">1013</span><br><span class="line-number">1014</span><br><span class="line-number">1015</span><br><span class="line-number">1016</span><br><span class="line-number">1017</span><br><span class="line-number">1018</span><br><span class="line-number">1019</span><br><span class="line-number">1020</span><br><span class="line-number">1021</span><br><span class="line-number">1022</span><br><span class="line-number">1023</span><br><span class="line-number">1024</span><br><span class="line-number">1025</span><br><span class="line-number">1026</span><br><span class="line-number">1027</span><br><span class="line-number">1028</span><br><span class="line-number">1029</span><br><span class="line-number">1030</span><br><span class="line-number">1031</span><br><span class="line-number">1032</span><br><span class="line-number">1033</span><br><span class="line-number">1034</span><br><span class="line-number">1035</span><br><span class="line-number">1036</span><br><span class="line-number">1037</span><br><span class="line-number">1038</span><br><span class="line-number">1039</span><br><span class="line-number">1040</span><br><span class="line-number">1041</span><br><span class="line-number">1042</span><br><span class="line-number">1043</span><br><span class="line-number">1044</span><br><span class="line-number">1045</span><br><span class="line-number">1046</span><br><span class="line-number">1047</span><br><span class="line-number">1048</span><br><span class="line-number">1049</span><br><span class="line-number">1050</span><br><span class="line-number">1051</span><br><span class="line-number">1052</span><br><span class="line-number">1053</span><br><span class="line-number">1054</span><br><span class="line-number">1055</span><br><span class="line-number">1056</span><br><span class="line-number">1057</span><br><span class="line-number">1058</span><br><span class="line-number">1059</span><br><span class="line-number">1060</span><br><span class="line-number">1061</span><br><span class="line-number">1062</span><br><span class="line-number">1063</span><br><span class="line-number">1064</span><br><span class="line-number">1065</span><br><span class="line-number">1066</span><br><span class="line-number">1067</span><br><span class="line-number">1068</span><br><span class="line-number">1069</span><br><span class="line-number">1070</span><br><span class="line-number">1071</span><br><span class="line-number">1072</span><br><span class="line-number">1073</span><br><span class="line-number">1074</span><br><span class="line-number">1075</span><br><span class="line-number">1076</span><br><span class="line-number">1077</span><br><span class="line-number">1078</span><br><span class="line-number">1079</span><br><span class="line-number">1080</span><br><span class="line-number">1081</span><br><span class="line-number">1082</span><br><span class="line-number">1083</span><br><span class="line-number">1084</span><br><span class="line-number">1085</span><br><span class="line-number">1086</span><br><span class="line-number">1087</span><br><span class="line-number">1088</span><br><span class="line-number">1089</span><br><span class="line-number">1090</span><br><span class="line-number">1091</span><br><span class="line-number">1092</span><br><span class="line-number">1093</span><br><span class="line-number">1094</span><br><span class="line-number">1095</span><br><span class="line-number">1096</span><br><span class="line-number">1097</span><br><span class="line-number">1098</span><br><span class="line-number">1099</span><br><span class="line-number">1100</span><br><span class="line-number">1101</span><br><span class="line-number">1102</span><br><span class="line-number">1103</span><br><span class="line-number">1104</span><br><span class="line-number">1105</span><br><span class="line-number">1106</span><br><span class="line-number">1107</span><br><span class="line-number">1108</span><br><span class="line-number">1109</span><br><span class="line-number">1110</span><br><span class="line-number">1111</span><br><span class="line-number">1112</span><br><span class="line-number">1113</span><br><span class="line-number">1114</span><br><span class="line-number">1115</span><br><span class="line-number">1116</span><br><span class="line-number">1117</span><br><span class="line-number">1118</span><br><span class="line-number">1119</span><br><span class="line-number">1120</span><br><span class="line-number">1121</span><br><span class="line-number">1122</span><br><span class="line-number">1123</span><br><span class="line-number">1124</span><br><span class="line-number">1125</span><br><span class="line-number">1126</span><br><span class="line-number">1127</span><br><span class="line-number">1128</span><br><span class="line-number">1129</span><br><span class="line-number">1130</span><br><span class="line-number">1131</span><br><span class="line-number">1132</span><br><span class="line-number">1133</span><br><span class="line-number">1134</span><br><span class="line-number">1135</span><br><span class="line-number">1136</span><br><span class="line-number">1137</span><br><span class="line-number">1138</span><br><span class="line-number">1139</span><br><span class="line-number">1140</span><br><span class="line-number">1141</span><br><span class="line-number">1142</span><br><span class="line-number">1143</span><br><span class="line-number">1144</span><br><span class="line-number">1145</span><br><span class="line-number">1146</span><br><span class="line-number">1147</span><br><span class="line-number">1148</span><br><span class="line-number">1149</span><br><span class="line-number">1150</span><br><span class="line-number">1151</span><br><span class="line-number">1152</span><br><span class="line-number">1153</span><br><span class="line-number">1154</span><br><span class="line-number">1155</span><br><span class="line-number">1156</span><br><span class="line-number">1157</span><br><span class="line-number">1158</span><br><span class="line-number">1159</span><br><span class="line-number">1160</span><br><span class="line-number">1161</span><br><span class="line-number">1162</span><br><span class="line-number">1163</span><br><span class="line-number">1164</span><br><span class="line-number">1165</span><br><span class="line-number">1166</span><br><span class="line-number">1167</span><br><span class="line-number">1168</span><br><span class="line-number">1169</span><br><span class="line-number">1170</span><br><span class="line-number">1171</span><br><span class="line-number">1172</span><br><span class="line-number">1173</span><br><span class="line-number">1174</span><br><span class="line-number">1175</span><br><span class="line-number">1176</span><br><span class="line-number">1177</span><br><span class="line-number">1178</span><br><span class="line-number">1179</span><br><span class="line-number">1180</span><br><span class="line-number">1181</span><br><span class="line-number">1182</span><br><span class="line-number">1183</span><br><span class="line-number">1184</span><br><span class="line-number">1185</span><br><span class="line-number">1186</span><br><span class="line-number">1187</span><br><span class="line-number">1188</span><br><span class="line-number">1189</span><br><span class="line-number">1190</span><br><span class="line-number">1191</span><br><span class="line-number">1192</span><br><span class="line-number">1193</span><br><span class="line-number">1194</span><br><span class="line-number">1195</span><br><span class="line-number">1196</span><br><span class="line-number">1197</span><br><span class="line-number">1198</span><br><span class="line-number">1199</span><br><span class="line-number">1200</span><br><span class="line-number">1201</span><br><span class="line-number">1202</span><br><span class="line-number">1203</span><br><span class="line-number">1204</span><br><span class="line-number">1205</span><br><span class="line-number">1206</span><br><span class="line-number">1207</span><br><span class="line-number">1208</span><br><span class="line-number">1209</span><br><span class="line-number">1210</span><br><span class="line-number">1211</span><br><span class="line-number">1212</span><br><span class="line-number">1213</span><br><span class="line-number">1214</span><br><span class="line-number">1215</span><br><span class="line-number">1216</span><br><span class="line-number">1217</span><br><span class="line-number">1218</span><br><span class="line-number">1219</span><br><span class="line-number">1220</span><br><span class="line-number">1221</span><br><span class="line-number">1222</span><br><span class="line-number">1223</span><br><span class="line-number">1224</span><br><span class="line-number">1225</span><br><span class="line-number">1226</span><br><span class="line-number">1227</span><br><span class="line-number">1228</span><br><span class="line-number">1229</span><br><span class="line-number">1230</span><br><span class="line-number">1231</span><br><span class="line-number">1232</span><br><span class="line-number">1233</span><br><span class="line-number">1234</span><br><span class="line-number">1235</span><br><span class="line-number">1236</span><br><span class="line-number">1237</span><br><span class="line-number">1238</span><br><span class="line-number">1239</span><br><span class="line-number">1240</span><br><span class="line-number">1241</span><br><span class="line-number">1242</span><br><span class="line-number">1243</span><br><span class="line-number">1244</span><br><span class="line-number">1245</span><br><span class="line-number">1246</span><br><span class="line-number">1247</span><br><span class="line-number">1248</span><br><span class="line-number">1249</span><br><span class="line-number">1250</span><br><span class="line-number">1251</span><br><span class="line-number">1252</span><br><span class="line-number">1253</span><br><span class="line-number">1254</span><br><span class="line-number">1255</span><br><span class="line-number">1256</span><br><span class="line-number">1257</span><br><span class="line-number">1258</span><br><span class="line-number">1259</span><br><span class="line-number">1260</span><br><span class="line-number">1261</span><br><span class="line-number">1262</span><br><span class="line-number">1263</span><br><span class="line-number">1264</span><br><span class="line-number">1265</span><br><span class="line-number">1266</span><br><span class="line-number">1267</span><br><span class="line-number">1268</span><br><span class="line-number">1269</span><br><span class="line-number">1270</span><br><span class="line-number">1271</span><br><span class="line-number">1272</span><br><span class="line-number">1273</span><br><span class="line-number">1274</span><br><span class="line-number">1275</span><br><span class="line-number">1276</span><br><span class="line-number">1277</span><br><span class="line-number">1278</span><br><span class="line-number">1279</span><br><span class="line-number">1280</span><br><span class="line-number">1281</span><br><span class="line-number">1282</span><br><span class="line-number">1283</span><br><span class="line-number">1284</span><br><span class="line-number">1285</span><br><span class="line-number">1286</span><br><span class="line-number">1287</span><br><span class="line-number">1288</span><br><span class="line-number">1289</span><br><span class="line-number">1290</span><br><span class="line-number">1291</span><br><span class="line-number">1292</span><br><span class="line-number">1293</span><br><span class="line-number">1294</span><br><span class="line-number">1295</span><br><span class="line-number">1296</span><br><span class="line-number">1297</span><br><span class="line-number">1298</span><br><span class="line-number">1299</span><br><span class="line-number">1300</span><br><span class="line-number">1301</span><br><span class="line-number">1302</span><br><span class="line-number">1303</span><br><span class="line-number">1304</span><br><span class="line-number">1305</span><br><span class="line-number">1306</span><br><span class="line-number">1307</span><br><span class="line-number">1308</span><br><span class="line-number">1309</span><br><span class="line-number">1310</span><br><span class="line-number">1311</span><br><span class="line-number">1312</span><br><span class="line-number">1313</span><br><span class="line-number">1314</span><br><span class="line-number">1315</span><br><span class="line-number">1316</span><br><span class="line-number">1317</span><br><span class="line-number">1318</span><br><span class="line-number">1319</span><br><span class="line-number">1320</span><br><span class="line-number">1321</span><br><span class="line-number">1322</span><br><span class="line-number">1323</span><br><span class="line-number">1324</span><br><span class="line-number">1325</span><br><span class="line-number">1326</span><br><span class="line-number">1327</span><br><span class="line-number">1328</span><br><span class="line-number">1329</span><br><span class="line-number">1330</span><br><span class="line-number">1331</span><br><span class="line-number">1332</span><br><span class="line-number">1333</span><br><span class="line-number">1334</span><br><span class="line-number">1335</span><br><span class="line-number">1336</span><br><span class="line-number">1337</span><br><span class="line-number">1338</span><br><span class="line-number">1339</span><br><span class="line-number">1340</span><br><span class="line-number">1341</span><br><span class="line-number">1342</span><br><span class="line-number">1343</span><br><span class="line-number">1344</span><br><span class="line-number">1345</span><br><span class="line-number">1346</span><br><span class="line-number">1347</span><br><span class="line-number">1348</span><br><span class="line-number">1349</span><br><span class="line-number">1350</span><br><span class="line-number">1351</span><br><span class="line-number">1352</span><br><span class="line-number">1353</span><br><span class="line-number">1354</span><br><span class="line-number">1355</span><br><span class="line-number">1356</span><br><span class="line-number">1357</span><br><span class="line-number">1358</span><br><span class="line-number">1359</span><br><span class="line-number">1360</span><br><span class="line-number">1361</span><br><span class="line-number">1362</span><br><span class="line-number">1363</span><br><span class="line-number">1364</span><br><span class="line-number">1365</span><br><span class="line-number">1366</span><br><span class="line-number">1367</span><br><span class="line-number">1368</span><br><span class="line-number">1369</span><br><span class="line-number">1370</span><br><span class="line-number">1371</span><br><span class="line-number">1372</span><br><span class="line-number">1373</span><br><span class="line-number">1374</span><br><span class="line-number">1375</span><br><span class="line-number">1376</span><br><span class="line-number">1377</span><br><span class="line-number">1378</span><br><span class="line-number">1379</span><br><span class="line-number">1380</span><br><span class="line-number">1381</span><br><span class="line-number">1382</span><br><span class="line-number">1383</span><br><span class="line-number">1384</span><br><span class="line-number">1385</span><br><span class="line-number">1386</span><br><span class="line-number">1387</span><br><span class="line-number">1388</span><br><span class="line-number">1389</span><br><span class="line-number">1390</span><br><span class="line-number">1391</span><br><span class="line-number">1392</span><br><span class="line-number">1393</span><br><span class="line-number">1394</span><br><span class="line-number">1395</span><br><span class="line-number">1396</span><br><span class="line-number">1397</span><br><span class="line-number">1398</span><br><span class="line-number">1399</span><br><span class="line-number">1400</span><br><span class="line-number">1401</span><br><span class="line-number">1402</span><br><span class="line-number">1403</span><br><span class="line-number">1404</span><br><span class="line-number">1405</span><br><span class="line-number">1406</span><br><span class="line-number">1407</span><br><span class="line-number">1408</span><br><span class="line-number">1409</span><br><span class="line-number">1410</span><br><span class="line-number">1411</span><br><span class="line-number">1412</span><br><span class="line-number">1413</span><br><span class="line-number">1414</span><br><span class="line-number">1415</span><br><span class="line-number">1416</span><br><span class="line-number">1417</span><br><span class="line-number">1418</span><br><span class="line-number">1419</span><br><span class="line-number">1420</span><br><span class="line-number">1421</span><br><span class="line-number">1422</span><br><span class="line-number">1423</span><br><span class="line-number">1424</span><br><span class="line-number">1425</span><br><span class="line-number">1426</span><br><span class="line-number">1427</span><br><span class="line-number">1428</span><br><span class="line-number">1429</span><br><span class="line-number">1430</span><br><span class="line-number">1431</span><br><span class="line-number">1432</span><br><span class="line-number">1433</span><br><span class="line-number">1434</span><br><span class="line-number">1435</span><br><span class="line-number">1436</span><br><span class="line-number">1437</span><br><span class="line-number">1438</span><br><span class="line-number">1439</span><br><span class="line-number">1440</span><br><span class="line-number">1441</span><br><span class="line-number">1442</span><br><span class="line-number">1443</span><br><span class="line-number">1444</span><br><span class="line-number">1445</span><br><span class="line-number">1446</span><br><span class="line-number">1447</span><br><span class="line-number">1448</span><br><span class="line-number">1449</span><br><span class="line-number">1450</span><br><span class="line-number">1451</span><br><span class="line-number">1452</span><br><span class="line-number">1453</span><br><span class="line-number">1454</span><br><span class="line-number">1455</span><br><span class="line-number">1456</span><br><span class="line-number">1457</span><br><span class="line-number">1458</span><br><span class="line-number">1459</span><br><span class="line-number">1460</span><br><span class="line-number">1461</span><br><span class="line-number">1462</span><br><span class="line-number">1463</span><br><span class="line-number">1464</span><br><span class="line-number">1465</span><br><span class="line-number">1466</span><br><span class="line-number">1467</span><br><span class="line-number">1468</span><br><span class="line-number">1469</span><br><span class="line-number">1470</span><br><span class="line-number">1471</span><br><span class="line-number">1472</span><br><span class="line-number">1473</span><br><span class="line-number">1474</span><br><span class="line-number">1475</span><br><span class="line-number">1476</span><br><span class="line-number">1477</span><br><span class="line-number">1478</span><br><span class="line-number">1479</span><br><span class="line-number">1480</span><br><span class="line-number">1481</span><br><span class="line-number">1482</span><br><span class="line-number">1483</span><br><span class="line-number">1484</span><br><span class="line-number">1485</span><br><span class="line-number">1486</span><br><span class="line-number">1487</span><br><span class="line-number">1488</span><br><span class="line-number">1489</span><br><span class="line-number">1490</span><br><span class="line-number">1491</span><br><span class="line-number">1492</span><br><span class="line-number">1493</span><br><span class="line-number">1494</span><br><span class="line-number">1495</span><br><span class="line-number">1496</span><br><span class="line-number">1497</span><br><span class="line-number">1498</span><br><span class="line-number">1499</span><br><span class="line-number">1500</span><br><span class="line-number">1501</span><br><span class="line-number">1502</span><br><span class="line-number">1503</span><br><span class="line-number">1504</span><br><span class="line-number">1505</span><br><span class="line-number">1506</span><br><span class="line-number">1507</span><br><span class="line-number">1508</span><br><span class="line-number">1509</span><br><span class="line-number">1510</span><br><span class="line-number">1511</span><br><span class="line-number">1512</span><br><span class="line-number">1513</span><br><span class="line-number">1514</span><br><span class="line-number">1515</span><br><span class="line-number">1516</span><br><span class="line-number">1517</span><br><span class="line-number">1518</span><br><span class="line-number">1519</span><br><span class="line-number">1520</span><br><span class="line-number">1521</span><br><span class="line-number">1522</span><br><span class="line-number">1523</span><br><span class="line-number">1524</span><br><span class="line-number">1525</span><br><span class="line-number">1526</span><br><span class="line-number">1527</span><br><span class="line-number">1528</span><br><span class="line-number">1529</span><br><span class="line-number">1530</span><br><span class="line-number">1531</span><br><span class="line-number">1532</span><br><span class="line-number">1533</span><br><span class="line-number">1534</span><br><span class="line-number">1535</span><br><span class="line-number">1536</span><br><span class="line-number">1537</span><br><span class="line-number">1538</span><br><span class="line-number">1539</span><br><span class="line-number">1540</span><br><span class="line-number">1541</span><br><span class="line-number">1542</span><br><span class="line-number">1543</span><br><span class="line-number">1544</span><br><span class="line-number">1545</span><br><span class="line-number">1546</span><br><span class="line-number">1547</span><br><span class="line-number">1548</span><br><span class="line-number">1549</span><br><span class="line-number">1550</span><br><span class="line-number">1551</span><br><span class="line-number">1552</span><br><span class="line-number">1553</span><br><span class="line-number">1554</span><br><span class="line-number">1555</span><br><span class="line-number">1556</span><br><span class="line-number">1557</span><br><span class="line-number">1558</span><br><span class="line-number">1559</span><br><span class="line-number">1560</span><br><span class="line-number">1561</span><br><span class="line-number">1562</span><br><span class="line-number">1563</span><br><span class="line-number">1564</span><br><span class="line-number">1565</span><br><span class="line-number">1566</span><br><span class="line-number">1567</span><br><span class="line-number">1568</span><br><span class="line-number">1569</span><br><span class="line-number">1570</span><br><span class="line-number">1571</span><br><span class="line-number">1572</span><br><span class="line-number">1573</span><br><span class="line-number">1574</span><br><span class="line-number">1575</span><br><span class="line-number">1576</span><br><span class="line-number">1577</span><br><span class="line-number">1578</span><br><span class="line-number">1579</span><br><span class="line-number">1580</span><br><span class="line-number">1581</span><br><span class="line-number">1582</span><br><span class="line-number">1583</span><br><span class="line-number">1584</span><br><span class="line-number">1585</span><br><span class="line-number">1586</span><br><span class="line-number">1587</span><br><span class="line-number">1588</span><br><span class="line-number">1589</span><br><span class="line-number">1590</span><br><span class="line-number">1591</span><br><span class="line-number">1592</span><br><span class="line-number">1593</span><br><span class="line-number">1594</span><br><span class="line-number">1595</span><br><span class="line-number">1596</span><br><span class="line-number">1597</span><br><span class="line-number">1598</span><br><span class="line-number">1599</span><br><span class="line-number">1600</span><br><span class="line-number">1601</span><br><span class="line-number">1602</span><br><span class="line-number">1603</span><br><span class="line-number">1604</span><br><span class="line-number">1605</span><br><span class="line-number">1606</span><br><span class="line-number">1607</span><br><span class="line-number">1608</span><br><span class="line-number">1609</span><br><span class="line-number">1610</span><br><span class="line-number">1611</span><br><span class="line-number">1612</span><br><span class="line-number">1613</span><br><span class="line-number">1614</span><br><span class="line-number">1615</span><br><span class="line-number">1616</span><br><span class="line-number">1617</span><br><span class="line-number">1618</span><br><span class="line-number">1619</span><br><span class="line-number">1620</span><br><span class="line-number">1621</span><br><span class="line-number">1622</span><br><span class="line-number">1623</span><br><span class="line-number">1624</span><br><span class="line-number">1625</span><br><span class="line-number">1626</span><br><span class="line-number">1627</span><br><span class="line-number">1628</span><br><span class="line-number">1629</span><br><span class="line-number">1630</span><br><span class="line-number">1631</span><br><span class="line-number">1632</span><br><span class="line-number">1633</span><br><span class="line-number">1634</span><br><span class="line-number">1635</span><br><span class="line-number">1636</span><br><span class="line-number">1637</span><br><span class="line-number">1638</span><br><span class="line-number">1639</span><br><span class="line-number">1640</span><br><span class="line-number">1641</span><br><span class="line-number">1642</span><br><span class="line-number">1643</span><br><span class="line-number">1644</span><br><span class="line-number">1645</span><br><span class="line-number">1646</span><br><span class="line-number">1647</span><br><span class="line-number">1648</span><br><span class="line-number">1649</span><br><span class="line-number">1650</span><br><span class="line-number">1651</span><br><span class="line-number">1652</span><br><span class="line-number">1653</span><br><span class="line-number">1654</span><br><span class="line-number">1655</span><br><span class="line-number">1656</span><br><span class="line-number">1657</span><br><span class="line-number">1658</span><br><span class="line-number">1659</span><br><span class="line-number">1660</span><br><span class="line-number">1661</span><br><span class="line-number">1662</span><br><span class="line-number">1663</span><br><span class="line-number">1664</span><br><span class="line-number">1665</span><br><span class="line-number">1666</span><br><span class="line-number">1667</span><br><span class="line-number">1668</span><br><span class="line-number">1669</span><br><span class="line-number">1670</span><br><span class="line-number">1671</span><br><span class="line-number">1672</span><br><span class="line-number">1673</span><br><span class="line-number">1674</span><br><span class="line-number">1675</span><br><span class="line-number">1676</span><br><span class="line-number">1677</span><br><span class="line-number">1678</span><br><span class="line-number">1679</span><br><span class="line-number">1680</span><br><span class="line-number">1681</span><br><span class="line-number">1682</span><br><span class="line-number">1683</span><br><span class="line-number">1684</span><br><span class="line-number">1685</span><br><span class="line-number">1686</span><br><span class="line-number">1687</span><br><span class="line-number">1688</span><br><span class="line-number">1689</span><br><span class="line-number">1690</span><br><span class="line-number">1691</span><br><span class="line-number">1692</span><br><span class="line-number">1693</span><br><span class="line-number">1694</span><br><span class="line-number">1695</span><br><span class="line-number">1696</span><br><span class="line-number">1697</span><br><span class="line-number">1698</span><br><span class="line-number">1699</span><br><span class="line-number">1700</span><br><span class="line-number">1701</span><br><span class="line-number">1702</span><br><span class="line-number">1703</span><br><span class="line-number">1704</span><br><span class="line-number">1705</span><br><span class="line-number">1706</span><br><span class="line-number">1707</span><br><span class="line-number">1708</span><br><span class="line-number">1709</span><br><span class="line-number">1710</span><br><span class="line-number">1711</span><br><span class="line-number">1712</span><br><span class="line-number">1713</span><br><span class="line-number">1714</span><br><span class="line-number">1715</span><br><span class="line-number">1716</span><br><span class="line-number">1717</span><br><span class="line-number">1718</span><br><span class="line-number">1719</span><br><span class="line-number">1720</span><br><span class="line-number">1721</span><br><span class="line-number">1722</span><br><span class="line-number">1723</span><br><span class="line-number">1724</span><br><span class="line-number">1725</span><br><span class="line-number">1726</span><br><span class="line-number">1727</span><br><span class="line-number">1728</span><br><span class="line-number">1729</span><br><span class="line-number">1730</span><br><span class="line-number">1731</span><br><span class="line-number">1732</span><br><span class="line-number">1733</span><br></div></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/yanghcc/blog/edit/master/docs/note/zepto-src.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/4/2019, 2:47:22 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/blog/note/snippets.html" class="prev">
          ä»£ç ç‰‡æ®µ
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/blog/assets/js/app.bae4038b.js" defer></script><script src="/blog/assets/js/38.f6e289a7.js" defer></script>
  </body>
</html>
